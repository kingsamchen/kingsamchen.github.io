<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Gone with the ruins"><title>ä¸€å‘¨æ‚è®° in Week 1 Feb 2026 | KCçš„åºŸå¢Ÿå †</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 8.1.1"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">ä¸€å‘¨æ‚è®° in Week 1 Feb 2026</h1><a id="logo" href="/.">KCçš„åºŸå¢Ÿå †</a><p class="description">Will you serve in Heaven, or rule in Hell</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/source-code-reading/"><i class="fa fa-archive"> æºç åˆ†æ</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">ä¸€å‘¨æ‚è®° in Week 1 Feb 2026</h1><div class="post-meta">2026-02-08<span> | </span><span class="category"><a href="/categories/CODE-LIFE/">CODE-LIFE</a></span></div><a class="disqus-comment-count" data-disqus-identifier="2026/02/08/weekly-2026-feb-1/" href="/2026/02/08/weekly-2026-feb-1/#disqus_thread"></a><div class="post-content"><p>è¿™å‘¨ï¼ˆ02&#x2F;02 ~ 02&#x2F;08ï¼‰æ˜¯2æœˆä»½ç¬¬ä¸€å‘¨ï¼Œä¸‹å‘¨æ˜¯èŠ‚å‰æœ€åä¸€ä¸ªå·¥ä½œå‘¨äº†ã€‚</p>
<h2 id="Life"><a href="#Life" class="headerlink" title="Life"></a>Life</h2><p>#1</p>
<p>å‘¨ä¸€çš„æ—¶å€™è€å´”ç§èŠæˆ‘è¯´çº¦äº†å‘¨ä¸‰ä¸‹åˆè°ˆç»©æ•ˆï¼Œå› ä¸ºå·²ç»çŸ¥é“äº†å½“åˆè€å´”ç»™æˆ‘æ‰“çš„åˆå§‹ç»©æ•ˆå’Œä»–çš„ä¸€äº›æ‰£åˆ†ç‚¹ï¼Œæ‰€ä»¥æˆ‘æå‰éƒ½åšäº†å‡†å¤‡ï¼Œæœ¬æ¥æ˜¯æ‰“ç®—é€ä¸€æŠ¨å‡»ä¹‹åæ‰¾USçš„å¤§ç»ç†Sâ€œèŠä¸€èŠâ€ã€‚</p>
<p>ç»“æœæ²¡æƒ³åˆ°è€å´”æœ€åæ—¶åˆ»å­¦ Trump TACO äº†ï¼Œç»™äº†æˆ‘ä¸€ä¸ªæ­£å¸¸çš„ç»©æ•ˆï¼Œè€Œä¸”ä»å¤´åˆ°å°¾æ²¡æåˆ°ä¹‹å‰åœ¨+1å’Œhré¢å‰æŠ¨å‡»æˆ‘çš„ç‚¹ã€‚</p>
<p>ä¼°è®¡æ˜¯ä¹‹å‰å‡ºçš„é‚£ä¸ªRCAå½±å“å¤ªå¤§äº†ï¼Œè€Œä¸”äº‹å‰æˆ‘å½“ä¼—æé†’ E2E æœ‰ç›¸å…³å¤±è´¥å¯èƒ½æœ‰å¯èƒ½ï¼Œæ‰€ä»¥è€å´”å¼ºè¡Œç»™æˆ‘æŒ‰å¤´æ‰“é‚£ä¸ªç»©æ•ˆç¡®å®å¤ªæ¬²ç›–å¼¥å½°äº†ã€‚</p>
<p>ä¼°è®¡ä»–ä¹Ÿæ€•æˆ‘çœŸçš„å»æ‰¾Så†²ä»–</p>
<p>ä¸è¿‡æ€ä¹ˆè¯´å‘¢ï¼Œè¿™ä¸ªåˆ©å¥½ä¸æ”¹æ—¢å®šç»“å±€ã€‚åªè¦Sæ‰‹é‡Œæ²¡äººï¼Œè¿˜å¾—ä¾èµ–è€å´”ç»™ä»–åšäº‹ï¼Œ26å¹´è¿˜å¾—æ˜¯æˆ‘åœ¨è¿™å›¢é˜Ÿçš„æœ€åä¸€å¹´ã€‚é™¤éæœ‰å˜æ•°èƒ½é™åˆ¶æ‰è€å´”</p>
<p>ä¸è¿‡è”¡å¸ä»¤ transfer çš„æ—¶é—´å®šäº†ï¼Œè¿™ä¸ªç®—æ˜¯ä¸ªå¤§åˆ©å¥½ï¼Œè™½ç„¶ä»–è‡ªå·±è¯´æ˜¯é€ƒéš¾è·‘åˆ° USï¼Œä½†æ˜¯åªè¦å­˜æœ‰æœºä¼šï¼Œç¿»ç›˜çš„ç†è®ºå¯èƒ½è¿˜æ˜¯æœ‰çš„ã€‚</p>
<p>æ¯•ç«Ÿå½“åˆç¡®å®ä¹Ÿæ²¡æƒ³åˆ°è€å¼ çœŸèƒ½ä¸‹è¯¾å•Šã€‚</p>
<p>#2</p>
<p>å› ä¸ºç§‹å®è¿˜å¤ªå°ï¼Œæ‰€ä»¥ä»Šå¹´æ˜¥èŠ‚å°±ä¸å›å»äº†ã€‚ç»™å®¶é‡Œäººä¹°äº†ç¥¨ï¼Œè®©ä»–ä»¬æ˜¥èŠ‚è¿‡æ¥ã€‚</p>
<p>å®¶é‡Œåˆå››åšä¸œï¼Œæ‰€ä»¥ä»–ä»¬åˆä¸‰ä¸‹åˆå›å»å°±è¡Œï¼Œç„¶ååˆå…­ç¥ å ‚çš„äº‹æƒ…ç»“æŸæˆ‘å¦ˆåˆè¦å†æ¥æ¥ç€å¸¦å¨ƒã€‚</p>
<p>ä¸è¿‡è€å©†è§‰å¾—æ˜¥èŠ‚å‘†åœ¨æ­å·å®åœ¨æ˜¯å¤ªæ— èŠäº†</p>
<p>ä¹‹å‰21å¹´åœ¨æ­å·å‘†æ»¡äº†ä¸€ä¸ªæ˜¥èŠ‚ï¼Œç¡®å®æŒºæ— èŠçš„</p>
<p>#3</p>
<p>è¿™å‘¨æŠŠ Daredevil Born Again S01 çœ‹å®Œäº†ï¼Œå‘¨æ—¥é™ªè€å©†çœ‹äº†é˜¿å‡¡è¾¾3ã€‚è€å©†çœ‹äº†ä¸€åŠä¸­é—´ç›´æ¥ç¡ç€äº† ğŸ¤£</p>
<ul>
<li><strong>é˜¿å‡¡è¾¾ï¼šç«ä¸çƒ¬ Avatar: Fire and Ashâ€ (2025) 3&#x2F;5</strong> æ²¡æœ‰ä¼ çš„é‚£ä¹ˆå·® æ•´ä½“å•†ä¸šç‰‡çš„æ°´å‡†è¿˜æ˜¯æœ‰çš„ å°±æ˜¯å®åœ¨å¤ªé•¿äº† è¿™ä¸ªé•¿åº¦åªåšå•çº¯çš„å•†ä¸šç‰‡å¯¹äºå¡æ¢…éš†æ¥è¯´å°±å¤ªå¤±èº«ä»½äº†</li>
<li><strong>å¤œé­”ä¾ ï¼šé‡ç”Ÿ ç¬¬ä¸€å­£ Daredevil: Born Again Season 1â€ (2025)</strong> è´¨æ„Ÿä¸Šè¿˜æ˜¯å·®Netflixçš„ä¸€ç‚¹ã€‚å¦å¤–ä¸èƒ½å› ä¸ºè¿™ä¸æ˜¯ç½šå”çš„ä¸ªäººå‰§å°±æŠŠäººå†™çš„é‚£ä¹ˆé™æ™ºï¼Œäººç½šå”çš„é£æ ¼è¿™ç¾¤anti-vigilant task forceèƒ½ç›´æ¥é‡Œå¤–é‡Œæ€ç©¿ä¸‰æ¬¡ğŸ˜‘</li>
</ul>
<h2 id="Work"><a href="#Work" class="headerlink" title="Work"></a>Work</h2><p>#1</p>
<p><strong>CppNow 2025 | std::optional â€” Standardizing Optionals over References - A Case Study - Steve Downey</strong> <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=cSOzD78yQV4&list=PL_AKIMJc4roW7umwjjd9Td-rtoqkiyqFl&index=53">https://www.youtube.com/watch?v=cSOzD78yQV4&amp;list=PL_AKIMJc4roW7umwjjd9Td-rtoqkiyqFl&amp;index=53</a></p>
<ul>
<li>æ ¸å¿ƒå†…å®¹æ˜¯ std::optional&lt;T&amp;&gt; æ ‡å‡†åŒ–çš„ä¸€äº›æ•…äº‹</li>
<li>tips: å¼•ç”¨ç‰ˆæœ¬æ˜¯ç‰¹åŒ–ï¼Œå…§éƒ¨å­˜çš„å…¶å®è¿˜æ˜¯æŒ‡é’ˆï¼›ä½†æ˜¯æœ‰æµ·é‡çš„è¯­ä¹‰ç›¸å…³çš„ corner cases</li>
</ul>
<p><strong>C++ Weekly - Ep 517 - Tool Spotlight: ClangBuildAnalyzer</strong> <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=gEQ5_FjCihA">https://www.youtube.com/watch?v=gEQ5_FjCihA</a></p>
<ul>
<li>clang <code>-ftime-trace</code> å¯ä»¥åˆ©ç”¨ <a target="_blank" rel="noopener" href="https://github.com/aras-p/ClangBuildAnalyzer">https://github.com/aras-p/ClangBuildAnalyzer</a> åšè¿›ä¸€æ­¥çš„èšåˆåˆ†æï¼ŒæŒ‰ç…§æ•´ä¸ª build çš„è€—æ—¶è¿›è¡Œè¾“å‡º</li>
<li>å¦å¤–ä¸€ä¸ªæ˜¯ <a target="_blank" rel="noopener" href="https://github.com/jlfwong/speedscope">https://github.com/jlfwong/speedscope</a> å¯ä»¥ç”¨æ¥æŸ¥çœ‹å„ç±»ç«ç„°å›¾</li>
</ul>
<p><strong>C++ Weekly - Ep 200 - Christmas Class 2019 - Chapter 1 of 5 - Understanding Lambdas</strong> <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=3hGSlUGEXtA">https://www.youtube.com/watch?v=3hGSlUGEXtA</a></p>
<ul>
<li>Jason çš„ Christmas ç‰¹è¾‘çš„é¦–ç¯‡</li>
<li>è¿™æ¬¡æ˜¯è®² mutable lambda åš Fibonacci</li>
</ul>
<p><strong>C++ Weekly - Ep 199 - [[nodiscard]] Constructors And Their Uses</strong> <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=E_ROB_xUQQQ">https://www.youtube.com/watch?v=E_ROB_xUQQQ</a></p>
<ul>
<li>C++ 20 å¼€å§‹ <code>[[nodiscard]]</code> å¯ä»¥ä¿®é¥°æ„é€ å‡½æ•°ï¼Œä½œç”¨æ˜¯ä¸ºäº†é¿å…ç»å…¸çš„ <code>std::lock_guard(mutex)</code> è¿™ç§å‹æ ¹æ²¡é”ä¸Šçš„é—®é¢˜</li>
</ul>
<p><strong>C++ Weekly - Ep - 198 - Surprise Uses For <code>explicit</code> Constructors</strong> <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=Q4SXFkTzD28">https://www.youtube.com/watch?v=Q4SXFkTzD28</a></p>
<ul>
<li>ä»»æ„ constructor éƒ½å¯ä»¥æ ‡è®°ä¸º explicitï¼ŒåŒ…æ‹¬ default constructor</li>
<li>æ ‡è®°ä¹‹å <code>&#123;&#125;</code> æˆ–è€… <code>&#123;42, 42&#125;</code> è¿™ç§æ„é€ éƒ½ä¼šå¤±è´¥ï¼Œéœ€è¦æ‰‹åŠ¨åŠ ä¸Šç±»å</li>
</ul>
<p><strong>C++ Weekly - Ep 197 - 25 Years of Best Practices</strong> <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=ayIJ4b6z-7g">https://www.youtube.com/watch?v=ayIJ4b6z-7g</a></p>
<ul>
<li>æ¢ç´¢ 25 å¹´å‰ OS&#x2F;2 ä¸Š Borland C++ å¯¹äº RVO&#x2F;NRVO çš„ä¼˜åŒ–</li>
<li>åŸºæœ¬æ˜¯è€ƒå¤ç³»åˆ—</li>
</ul>
<p><strong>Determining if a template specialization exists</strong> <a target="_blank" rel="noopener" href="https://www.lukas-barth.net/blog/checking-if-specialized/">https://www.lukas-barth.net/blog/checking-if-specialized/</a></p>
<ul>
<li><p>æ£€æŸ¥æ˜¯å¦å­˜åœ¨å‡½æ•°æ¨¡æ¿ç‰¹åŒ–ï¼šç›´æ¥åˆ©ç”¨ SFINAE + std::declval</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>, <span class="keyword">class</span> <span class="title class_">Dummy</span> = <span class="keyword">decltype</span>(std::<span class="built_in">swap</span>&lt;T&gt;(std::<span class="built_in">declval</span>&lt;T &amp;&gt;(),</span><br><span class="line">                                                       std::<span class="built_in">declval</span>&lt;T &amp;&gt;()))&gt;</span><br></pre></td></tr></table></figure>

<p>  ä½†æ˜¯å¦‚æœæƒ³åš generic çš„å®ç°å°±ä¼šæ›´éº»çƒ¦ä¸€äº›</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> betterL = [](<span class="keyword">auto</span> &amp;lhs, <span class="keyword">auto</span> &amp;rhs) -&gt; <span class="keyword">decltype</span>(std::<span class="built_in">swap</span>(lhs, rhs)) &#123;</span><br><span class="line">  <span class="keyword">return</span> std::<span class="built_in">swap</span>(lhs, rhs);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">bool</span> sometype_has_swap =</span><br><span class="line">    std::is_invocable_v&lt;<span class="keyword">decltype</span>(betterL), SomeType &amp;, SomeType &amp;&gt;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>æ£€æŸ¥æ˜¯å¦å­˜åœ¨ç±»æ¨¡æ¿ç‰¹åŒ–ï¼šåˆå§‹æ–¹æ¡ˆä¾èµ– default ctorï¼Œä¹Ÿå³ç›´æ¥å°è¯•æ„é€ ä¸€ä¸ªå¯¹è±¡ <code>decltype(T&#123;&#125;)</code></p>
<ul>
<li><p>æ”¹è¿›æ–¹æ¡ˆæ˜¯æ‹¿ææ„çš„è¿”å›å€¼ï¼Œæ ‡å‡†è§„å®šè¿™éƒ¨åˆ†æ˜¯ void</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span>... Args,</span><br><span class="line">          <span class="keyword">class</span> <span class="title class_">dummy</span> = <span class="keyword">decltype</span>(std::declval&lt;Tmpl&lt;Args...&gt;&gt;().~<span class="built_in">Tmpl</span>&lt;Args...&gt;())&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>  è¿™ä¸ªæ–¹æ¡ˆæœ‰ä¸ªå‘æ˜¯å¦‚æœç‰¹åŒ–æ˜¯æŸä¸ª TU ä¸­é—´éƒ¨åˆ†å¼•å…¥æˆ–è¿™ä¸ªåªæœ‰æŸä¸ªTUæ‰æœ‰ï¼Œé‚£ä¹ˆä¼šå¯¼è‡´ odr-violationï¼Œæ•´ä¸ªç¨‹åºæ˜¯ ill-formed</p>
<p>  å¦å¤–è¿™ä¸ªæ–¹æ¡ˆåœ¨ MSVC ä¸‹æœ‰ä¸€äº›é—®é¢˜ï¼ŒMSVC å¯¹äºå…¶ä»–ç±»å‹å§‹ç»ˆä¼šå®šä¹‰ï¼Œä½†æ˜¯æ²¡æœ‰æä¾› operator()</p>
</li>
</ul>
<p>#2</p>
<p>è¿™å‘¨æŠ½äº†ç‚¹æ—¶é—´ï¼Œåšäº† fawkes å’Œ gin ä¸¤ä¸ªç»´åº¦çš„ benchmarkï¼Œç›®çš„å…¶å®å°±æ˜¯åšä¸€ä¸ªå¿ƒé‡Œæœ‰æ•°ï¼Œåé¢ä¹Ÿæœ‰ä¸€ä¸ªæ¯”è¾ƒ compelling reason è¯´ä¸åº”è¯¥èŠ±é‚£ä¹ˆå¤§ä»£ä»·ç”¨ golang é‡å†™ 2 million LoC çš„ä¸šåŠ¡ä»£ç </p>
<p>æµ‹è¯•æ ¸å¿ƒæ˜¯ä¸¤ä¸ªç‚¹ï¼š</p>
<ul>
<li>ä¸€ä¸ªæ˜¯ç®€å•å­—ç¬¦ä¸²çš„è¿”å›ï¼Œä¸»è¦æ˜¯æƒ³å‹ä¸€ä¸‹æ¡†æ¶çš„æé™</li>
<li>ä¸€ä¸ªæ˜¯éšæœºwait [10ms, 50ms]ï¼Œä¸»è¦æ˜¯æ¨¡æ‹Ÿä¸šåŠ¡åœç­‰åœ¨ç½‘ç»œè¯·æ±‚ä¸Šï¼Œè¿™ä¸ªæ˜¾ç„¶ä¸æ˜¯CPU boundï¼Œä¹Ÿç¬¦åˆå¤§éƒ¨åˆ† rest api servers çš„æƒ…å†µ</li>
</ul>
<p>æµ‹è¯•ç¯å¢ƒæ˜¯ ubuntu 2404ï¼Œ8ä¸ªCPU core ç”¨ taskset åªç»‘å®š0-3ï¼Œwrk ç»‘å®š 4-7ï¼Œé¿å…å½±å“</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> asio = boost::asio;</span><br><span class="line"><span class="keyword">namespace</span> http = boost::beast::http;</span><br><span class="line"></span><br><span class="line"><span class="built_in">DEFINE_uint32</span>(port, <span class="number">7890</span>, <span class="string">&quot;Port number to listen on&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">tls_rnd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">thread_local</span> std::mt19937 eng&#123;std::random_device&#123;&#125;()&#125;;</span><br><span class="line">    <span class="keyword">thread_local</span> std::uniform_int_distribution&lt;<span class="type">int</span>&gt; dist&#123;<span class="number">10</span>, <span class="number">50</span>&#125;; <span class="comment">// NOLINT(*-magic-numbers)</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dist</span>(eng);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125; <span class="comment">// namespace</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span> </span>&#123;</span><br><span class="line">    gflags::<span class="built_in">ParseCommandLineFlags</span>(&amp;argc, &amp;argv, <span class="literal">true</span>);</span><br><span class="line">    spdlog::cfg::<span class="built_in">load_env_levels</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        asio::io_context ioc&#123;<span class="number">1</span>&#125;;</span><br><span class="line">        <span class="function">fawkes::io_thread_pool <span class="title">io_pool</span><span class="params">(<span class="number">4</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="function">fawkes::server <span class="title">server</span><span class="params">(ioc, io_pool)</span></span>;</span><br><span class="line"></span><br><span class="line">        server.<span class="built_in">do_get</span>(<span class="string">&quot;/status&quot;</span>,</span><br><span class="line">                      [](<span class="type">const</span> fawkes::request&amp;, fawkes::response&amp; resp) -&gt; asio::awaitable&lt;<span class="type">void</span>&gt; &#123;</span><br><span class="line">                          resp.<span class="built_in">text</span>(http::status::ok, std::string&#123;<span class="string">&quot;hello world&quot;</span>&#125;);</span><br><span class="line">                          <span class="keyword">co_return</span>;</span><br><span class="line">                      &#125;);</span><br><span class="line"></span><br><span class="line">        server.<span class="built_in">do_get</span>(<span class="string">&quot;/delayed&quot;</span>,</span><br><span class="line">                      [](<span class="type">const</span> fawkes::request&amp;, fawkes::response&amp; resp) -&gt; asio::awaitable&lt;<span class="type">void</span>&gt; &#123;</span><br><span class="line">                          asio::steady_timer <span class="built_in">timer</span>(<span class="keyword">co_await</span> asio::this_coro::executor);</span><br><span class="line">                          timer.<span class="built_in">expires_after</span>(std::chrono::<span class="built_in">milliseconds</span>(<span class="built_in">tls_rnd</span>()));</span><br><span class="line">                          <span class="keyword">co_await</span> timer.<span class="built_in">async_wait</span>();</span><br><span class="line">                          resp.<span class="built_in">text</span>(http::status::ok, std::string&#123;<span class="string">&quot;hello world&quot;</span>&#125;);</span><br><span class="line">                          <span class="keyword">co_return</span>;</span><br><span class="line">                      &#125;);</span><br><span class="line"></span><br><span class="line">        server.<span class="built_in">listen_and_serve</span>(<span class="string">&quot;0.0.0.0&quot;</span>, <span class="built_in">static_cast</span>&lt;std::<span class="type">uint16_t</span>&gt;(FLAGS_port));</span><br><span class="line">        <span class="built_in">SPDLOG_INFO</span>(<span class="string">&quot;Server is listening at &#123;&#125;&quot;</span>, FLAGS_port);</span><br><span class="line"></span><br><span class="line">        ioc.<span class="built_in">run</span>();</span><br><span class="line">    &#125; <span class="built_in">catch</span> (<span class="type">const</span> std::exception&amp; ex) &#123;</span><br><span class="line">        <span class="built_in">SPDLOG_ERROR</span>(<span class="string">&quot;Unexpected error: &#123;&#125;&quot;</span>, ex.<span class="built_in">what</span>());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯¹åº”çš„ gin</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">        <span class="string">&quot;io&quot;</span></span><br><span class="line">        <span class="string">&quot;net/http&quot;</span></span><br><span class="line">        <span class="string">&quot;runtime&quot;</span></span><br><span class="line">        <span class="string">&quot;time&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">		<span class="string">&quot;github.com/valyala/fastrand&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">        runtime.GOMAXPROCS(<span class="number">4</span>)</span><br><span class="line">        r := gin.New()</span><br><span class="line"></span><br><span class="line">        r.GET(<span class="string">&quot;/status&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">                c.String(http.StatusOK, <span class="string">&quot;hello world&quot;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        r.GET(<span class="string">&quot;/delayed&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">                delay := time.Duration(fastrand.Uint32n(<span class="number">41</span>)+<span class="number">10</span>) * time.Millisecond</span><br><span class="line">                time.Sleep(delay)</span><br><span class="line">                c.String(http.StatusOK, <span class="string">&quot;hello world&quot;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        r.Run(<span class="string">&quot;:9876&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”¨ fastrand åŒ…æ˜¯å› ä¸ºæ ‡å‡†åº“çš„ math.rand å­˜åœ¨å…¨å±€é”ç«äº‰ï¼Œä¸è¿‡å®æµ‹ä¸‹æ¥è¿™ä¸ªå·®åˆ«å¯¹ RPS å»¶è¿Ÿ åå å•¥çš„å‡ ä¹æ²¡æœ‰è‚‰çœ¼å¯è§åŒºåˆ«</p>
<p><code>/status</code> çš„ bench ç»“æœå¤§æ¦‚è¿™æ ·</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">#</span><br><span class="line"># fawkes(cpp)</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">$ taskset -c 4-7 wrk -t 4 -c 100 -d 30s http://127.0.0.1:7890/status</span><br><span class="line">Running 30s test @ http://127.0.0.1:7890/status</span><br><span class="line">  4 threads and 100 connections</span><br><span class="line">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br><span class="line">    Latency   118.49us   88.97us   8.52ms   90.55%</span><br><span class="line">    Req/Sec   195.58k     8.21k  211.33k    80.77%</span><br><span class="line">  23366131 requests in 30.10s, 2.20GB read</span><br><span class="line">Requests/sec: 776297.81</span><br><span class="line">Transfer/sec:     74.77MB</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">$ taskset -c 4-7 wrk -t 4 -c 200 -d 30s http://127.0.0.1:7890/status</span><br><span class="line">Running 30s test @ http://127.0.0.1:7890/status</span><br><span class="line">  4 threads and 200 connections</span><br><span class="line">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br><span class="line">    Latency   235.08us  121.81us   5.72ms   91.36%</span><br><span class="line">    Req/Sec   202.29k     5.53k  230.88k    77.08%</span><br><span class="line">  24152657 requests in 30.02s, 2.27GB read</span><br><span class="line">Requests/sec: 804512.83</span><br><span class="line">Transfer/sec:     77.49MB</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">$ taskset -c 4-7 wrk -t 4 -c 400 -d 30s http://127.0.0.1:7890/status</span><br><span class="line">Running 30s test @ http://127.0.0.1:7890/status</span><br><span class="line">  4 threads and 400 connections</span><br><span class="line">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br><span class="line">    Latency   488.18us  153.83us  11.47ms   87.24%</span><br><span class="line">    Req/Sec   197.11k     4.52k  223.46k    79.33%</span><br><span class="line">  23538202 requests in 30.04s, 2.21GB read</span><br><span class="line">Requests/sec: 783437.58</span><br><span class="line">Transfer/sec:     75.46MB</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">$ taskset -c 4-7 wrk -t 4 -c 600 -d 30s http://127.0.0.1:7890/status</span><br><span class="line">Running 30s test @ http://127.0.0.1:7890/status</span><br><span class="line">  4 threads and 600 connections</span><br><span class="line">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br><span class="line">    Latency   769.46us  201.83us  17.32ms   89.10%</span><br><span class="line">    Req/Sec   189.78k    18.84k  510.99k    98.83%</span><br><span class="line">  22509621 requests in 29.85s, 2.12GB read</span><br><span class="line">Requests/sec: 753979.66</span><br><span class="line">Transfer/sec:     72.62MB</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">$ taskset -c 4-7 wrk -t 4 -c 800 -d 30s http://127.0.0.1:7890/status</span><br><span class="line">Running 30s test @ http://127.0.0.1:7890/status</span><br><span class="line">  4 threads and 800 connections</span><br><span class="line">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br><span class="line">    Latency     1.04ms  250.08us  18.75ms   91.22%</span><br><span class="line">    Req/Sec   186.44k     3.85k  205.60k    76.92%</span><br><span class="line">  22260003 requests in 30.05s, 2.09GB read</span><br><span class="line">Requests/sec: 740848.80</span><br><span class="line">Transfer/sec:     71.36MB</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># gin(golang)</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">$ taskset -c 4-7 wrk -t 4 -c 200 -d 30s http://127.0.0.1:9876/status</span><br><span class="line">Running 30s test @ http://127.0.0.1:9876/status</span><br><span class="line">  4 threads and 200 connections</span><br><span class="line">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br><span class="line">    Latency     1.00ms    1.15ms  16.07ms   85.53%</span><br><span class="line">    Req/Sec    72.32k     4.67k   86.64k    68.75%</span><br><span class="line">  8634517 requests in 30.03s, 1.03GB read</span><br><span class="line">Requests/sec: 287563.51</span><br><span class="line">Transfer/sec:     35.10MB</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">$ taskset -c 4-7 wrk -t 4 -c 400 -d 30s http://127.0.0.1:9876/status</span><br><span class="line">Running 30s test @ http://127.0.0.1:9876/status</span><br><span class="line">  4 threads and 400 connections</span><br><span class="line">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br><span class="line">    Latency     1.45ms    1.49ms  17.41ms   85.75%</span><br><span class="line">    Req/Sec    89.29k     5.88k  109.06k    68.83%</span><br><span class="line">  10660721 requests in 30.04s, 1.27GB read</span><br><span class="line">Requests/sec: 354847.17</span><br><span class="line">Transfer/sec:     43.32MB</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">$ taskset -c 4-7 wrk -t 4 -c 600 -d 30s http://127.0.0.1:9876/status</span><br><span class="line">Running 30s test @ http://127.0.0.1:9876/status</span><br><span class="line">  4 threads and 600 connections</span><br><span class="line">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br><span class="line">    Latency     1.88ms    1.67ms  24.00ms   82.51%</span><br><span class="line">    Req/Sec    94.39k     5.66k  110.18k    69.58%</span><br><span class="line">  11269424 requests in 30.06s, 1.34GB read</span><br><span class="line">Requests/sec: 374877.28</span><br><span class="line">Transfer/sec:     45.76MB</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">$ taskset -c 4-7 wrk -t 4 -c 800 -d 30s http://127.0.0.1:9876/status</span><br><span class="line">Running 30s test @ http://127.0.0.1:9876/status</span><br><span class="line">  4 threads and 800 connections</span><br><span class="line">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br><span class="line">    Latency     2.50ms    2.00ms  26.56ms   81.53%</span><br><span class="line">    Req/Sec    91.06k     5.54k  105.63k    69.42%</span><br><span class="line">  10874122 requests in 30.06s, 1.30GB read</span><br><span class="line">Requests/sec: 361805.33</span><br><span class="line">Transfer/sec:     44.17MB</span><br></pre></td></tr></table></figure>

<p>åŒç­‰å‹åŠ›ä¸‹ fawkes çš„ rps å’ŒåååŸºæœ¬æ˜¯ gin çš„ä¸¤å€ï¼Œè€Œä¸”å»¶è¿Ÿæ¯”è¾ƒç¨³å®š</p>
<p><code>/delayed</code> çš„ bench å¤§æ¦‚è¿™æ ·</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">#</span><br><span class="line"># fawkes(cpp)</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">$ taskset -c 4-7 wrk -t 4 -c 4000 -d 30s http://127.0.0.1:7890/delayed</span><br><span class="line">Running 30s test @ http://127.0.0.1:7890/delayed</span><br><span class="line">  4 threads and 4000 connections</span><br><span class="line">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br><span class="line">    Latency    30.47ms   11.83ms  57.44ms   56.88%</span><br><span class="line">    Req/Sec    32.95k   435.03    33.90k    82.17%</span><br><span class="line">  3933987 requests in 30.08s, 378.93MB read</span><br><span class="line">Requests/sec: 130799.34</span><br><span class="line">Transfer/sec:     12.60MB</span><br><span class="line"></span><br><span class="line">$ taskset -c 4-7 wrk -t 4 -c 10000 -d 30s http://127.0.0.1:7890/delayed</span><br><span class="line">Running 30s test @ http://127.0.0.1:7890/delayed</span><br><span class="line">  4 threads and 10000 connections</span><br><span class="line">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br><span class="line">    Latency    38.32ms   12.39ms 255.57ms   60.27%</span><br><span class="line">    Req/Sec    64.70k     3.68k   69.53k    94.23%</span><br><span class="line">  7698731 requests in 30.01s, 741.55MB read</span><br><span class="line">Requests/sec: 256528.10</span><br><span class="line">Transfer/sec:     24.71MB</span><br><span class="line"></span><br><span class="line">$ taskset -c 4-7 wrk -t 4 -c 15000 -d 30s http://127.0.0.1:7890/delayed</span><br><span class="line">Running 30s test @ http://127.0.0.1:7890/delayed</span><br><span class="line">  4 threads and 15000 connections</span><br><span class="line">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br><span class="line">    Latency    70.70ms   15.38ms 119.88ms   68.80%</span><br><span class="line">    Req/Sec    52.31k     2.21k   84.44k    88.36%</span><br><span class="line">  6216137 requests in 30.10s, 598.75MB read</span><br><span class="line">Requests/sec: 206526.70</span><br><span class="line">Transfer/sec:     19.89MB</span><br><span class="line"></span><br><span class="line">$ taskset -c 4-7 wrk -t 4 -c 20000 -d 30s http://127.0.0.1:7890/delayed</span><br><span class="line">Running 30s test @ http://127.0.0.1:7890/delayed</span><br><span class="line">  4 threads and 20000 connections</span><br><span class="line">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br><span class="line">    Latency   100.47ms   19.71ms 167.23ms   68.67%</span><br><span class="line">    Req/Sec    49.89k     4.17k   83.19k    95.11%</span><br><span class="line">  5788293 requests in 30.09s, 557.53MB read</span><br><span class="line">Requests/sec: 192347.32</span><br><span class="line">Transfer/sec:     18.53MB</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># gin(golang)</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line">$ taskset -c 4-7 wrk -t 4 -c 2000 -d 30s http://127.0.0.1:9876/delayed</span><br><span class="line">Running 30s test @ http://127.0.0.1:9876/delayed</span><br><span class="line">  4 threads and 2000 connections</span><br><span class="line">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br><span class="line">    Latency    30.34ms   11.85ms  62.91ms   57.53%</span><br><span class="line">    Req/Sec    16.55k   296.03    17.29k    83.08%</span><br><span class="line">  1975861 requests in 30.07s, 241.19MB read</span><br><span class="line">Requests/sec:  65709.10</span><br><span class="line">Transfer/sec:      8.02MB</span><br><span class="line"></span><br><span class="line">$ taskset -c 4-7 wrk -t 4 -c 4000 -d 30s http://127.0.0.1:9876/delayed</span><br><span class="line">Running 30s test @ http://127.0.0.1:9876/delayed</span><br><span class="line">  4 threads and 4000 connections</span><br><span class="line">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br><span class="line">    Latency    32.01ms   12.43ms 108.75ms   60.21%</span><br><span class="line">    Req/Sec    31.39k     1.25k   33.94k    64.33%</span><br><span class="line">  3747334 requests in 30.07s, 457.44MB read</span><br><span class="line">Requests/sec: 124615.33</span><br><span class="line">Transfer/sec:     15.21MB</span><br><span class="line"></span><br><span class="line">$ taskset -c 4-7 wrk -t 4 -c 10000 -d 30s http://127.0.0.1:9876/delayed</span><br><span class="line">Running 30s test @ http://127.0.0.1:9876/delayed</span><br><span class="line">  4 threads and 10000 connections</span><br><span class="line">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br><span class="line">    Latency    66.93ms   36.72ms 309.80ms   60.65%</span><br><span class="line">    Req/Sec    37.42k     3.87k   45.22k    73.83%</span><br><span class="line">  4454003 requests in 30.04s, 543.70MB read</span><br><span class="line">Requests/sec: 148282.24</span><br><span class="line">Transfer/sec:     18.10MB</span><br><span class="line"></span><br><span class="line">$ taskset -c 4-7 wrk -t 4 -c 15000 -d 30s http://127.0.0.1:9876/delayed</span><br><span class="line">Running 30s test @ http://127.0.0.1:9876/delayed</span><br><span class="line">  4 threads and 15000 connections</span><br><span class="line">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br><span class="line">    Latency   100.38ms   65.44ms 261.84ms   53.35%</span><br><span class="line">    Req/Sec    37.58k     4.30k   89.10k    80.80%</span><br><span class="line">  4459974 requests in 30.09s, 544.43MB read</span><br><span class="line">Requests/sec: 148214.09</span><br><span class="line">Transfer/sec:     18.09MB</span><br><span class="line"></span><br><span class="line">$ taskset -c 4-7 wrk -t 4 -c 20000 -d 30s http://127.0.0.1:9876/delayed</span><br><span class="line">Running 30s test @ http://127.0.0.1:9876/delayed</span><br><span class="line">  4 threads and 20000 connections</span><br><span class="line">  Thread Stats   Avg      Stdev     Max   +/- Stdev</span><br><span class="line">    Latency   128.96ms   91.54ms 358.05ms   49.71%</span><br><span class="line">    Req/Sec    38.63k     4.47k   46.42k    82.36%</span><br><span class="line">  4489456 requests in 30.08s, 548.03MB read</span><br><span class="line">Requests/sec: 149267.64</span><br><span class="line">Transfer/sec:     18.22MB</span><br></pre></td></tr></table></figure>

<p>ä½è´Ÿè½½ï¼ˆå‹åŠ›æ²¡æ‰“æ»¡ï¼‰çš„æƒ…å†µä¸‹ï¼Œfawkes åªæ¯” gin å¥½ä¸€ç‚¹ç‚¹ï¼›ä½†æ˜¯å‹åŠ›ä¸Šæ¥ä¹‹å fawkes æ¯” gin rps è¦å¥½ 50% ~ 100%ï¼Œå¹¶ä¸”å»¶è¿Ÿåªæœ‰åè€…çš„ 50% ~ 70%</p>
<p>åŸºäºè¿™ä¸ªç»“æœï¼Œfawkes åªè¦åç»­æ²¡æœ‰å¤ªå‘çš„å®ç°ï¼Œæ€§èƒ½ä¸‹é™æ˜¯ç»å¯¹æœ‰ä¿è¯çš„ã€‚å› ä¸ºæˆ‘ä»¬çš„ç›®æ ‡å‹æ ¹å°±ä¸æ˜¯åšä»€ä¹ˆæ€§èƒ½æœ€å¥½çš„ rest serverï¼Œè€Œæ˜¯ä¸šåŠ¡å¼€å‘è¶³å¤Ÿå‹å¥½ï¼Œæ€§èƒ½ä¸Šä¸æ‹–åè…¿ï¼Œèƒ½é¡ºåˆ©æ›¿æ¢æ‰ä¹‹å‰åŸºäº httpd çš„é‚£æ‰˜å®ç°ã€‚</p>
<p>#3</p>
<p>fawkes åšäº† expected 100-continue çš„æ”¯æŒï¼Œé¡ºå¸¦æ˜¾å¼å¤„ç†äº†ä¸€ä¸‹å¯¹ç«¯ connection reset çš„é”™è¯¯ï¼Œå³ä¸è®¤ä¸ºæ˜¯ unhandled&#x2F;unexpected</p>
<p>wrk æµ‹è¯•ç»“æŸåä¼šåˆ©ç”¨ RST æ¥é¿å…è¿›å…¥ TIME_WAIT</p>
<p>PR è§ï¼š<a target="_blank" rel="noopener" href="https://github.com/kingsamchen/fawkes/pull/22">https://github.com/kingsamchen/fawkes/pull/22</a></p>
<hr>
<p>å¥½äº†è¿™å‘¨å°±è¿™æ ·ï¼Œä¸‹å‘¨è§</p>
</div><div class="tags"><a href="/tags/%E6%9D%82%E8%AE%B0/"><i class="fa fa-tag"></i>æ‚è®°</a></div><div class="post-nav"><a class="pre" href="/2026/02/15/weekly-2026-feb-2/">ä¸€å‘¨æ‚è®° in Week 2 Feb 2026</a><a class="next" href="/2026/02/01/weekly-2026-jan-5/">ä¸€å‘¨æ‚è®° in Week 5 Jan 2026</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">é˜…è¯»è¯„è®ºï¼ˆè¯·ç¡®ä¿ Disqus å¯ä»¥æ­£å¸¸åŠ è½½ï¼‰</button></div><script type="text/javascript">var disqus_config = function () {
    this.page.url = 'http://kingsamchen.github.io/2026/02/08/weekly-2026-feb-1/';
    this.page.identifier = '2026/02/08/weekly-2026-feb-1/';
    this.page.title = 'ä¸€å‘¨æ‚è®° in Week 1 Feb 2026';
  };</script><script type="text/javascript" id="disqus-lazy-load-script">$.ajax({
url: 'https://disqus.com/next/config.json',
timeout: 2500,
type: 'GET',
success: function(){
  var d = document;
  var s = d.createElement('script');
  s.src = '//kingsamchen-github-io.disqus.com/embed.js';
  s.setAttribute('data-timestamp', + new Date());
  (d.head || d.body).appendChild(s);
  $('.disqus_click_btn').css('display', 'none');
},
error: function() {
  $('.disqus_click_btn').css('display', 'block');
}
});</script><script type="text/javascript" id="disqus-click-load">$('.btn_click_load').click(() => {  //click to load comments
    (() => { // DON'T EDIT BELOW THIS LINE
        var d = document;
        var s = d.createElement('script');
        s.src = '//kingsamchen-github-io.disqus.com/embed.js';
        s.setAttribute('data-timestamp', + new Date());
        (d.head || d.body).appendChild(s);
    })();
    $('.disqus_click_btn').css('display','none');
});</script><script type="text/javascript" id="disqus-count-script">$(function() {
     var xhr = new XMLHttpRequest();
     xhr.open('GET', '//disqus.com/next/config.json', true);
     xhr.timeout = 2500;
     xhr.onreadystatechange = function () {
       if (xhr.readyState === 4 && xhr.status === 200) {
         $('.post-meta .post-comments-count').show();
         var s = document.createElement('script');
         s.id = 'dsq-count-scr';
         s.src = 'https://kingsamchen-github-io.disqus.com/count.js';
         s.async = true;
         (document.head || document.body).appendChild(s);
       }
     };
     xhr.ontimeout = function () { xhr.abort(); };
     xhr.send(null);
   });
</script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://kingsamchen.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/CODE-LIFE/">CODE-LIFE</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/PROGRAMMING/">PROGRAMMING</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2026/02/20/general-purpose-cancellation-mechanism-stop-token/">std::stop_token: A General-Purpose Cancellation Mechanism</a></li><li class="post-list-item"><a class="post-list-link" href="/2026/02/15/weekly-2026-feb-2/">ä¸€å‘¨æ‚è®° in Week 2 Feb 2026</a></li><li class="post-list-item"><a class="post-list-link" href="/2026/02/08/weekly-2026-feb-1/">ä¸€å‘¨æ‚è®° in Week 1 Feb 2026</a></li><li class="post-list-item"><a class="post-list-link" href="/2026/02/01/weekly-2026-jan-5/">ä¸€å‘¨æ‚è®° in Week 5 Jan 2026</a></li><li class="post-list-item"><a class="post-list-link" href="/2026/01/25/weekly-2026-jan-4/">ä¸€å‘¨æ‚è®° in Week 4 Jan 2026</a></li><li class="post-list-item"><a class="post-list-link" href="/2026/01/18/weekly-2026-jan-3/">ä¸€å‘¨æ‚è®° in Week 3 Jan 2026</a></li><li class="post-list-item"><a class="post-list-link" href="/2026/01/11/weekly-2026-jan-2/">ä¸€å‘¨æ‚è®° in Week 2 Jan 2026</a></li><li class="post-list-item"><a class="post-list-link" href="/2026/01/10/the-lambda-coroutine-fiasco/">The Lambda Coroutine Fiasco</a></li><li class="post-list-item"><a class="post-list-link" href="/2026/01/05/weekly-2026-jan-1/">ä¸€å‘¨æ‚è®° in Week 1 Jan 2026</a></li><li class="post-list-item"><a class="post-list-link" href="/2025/12/29/weekly-2025-dec-4/">ä¸€å‘¨æ‚è®° in Week 4 Dec 2025</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/rant/" style="font-size: 15px;">rant</a> <a href="/tags/life/" style="font-size: 15px;">life</a> <a href="/tags/android/" style="font-size: 15px;">android</a> <a href="/tags/cpp/" style="font-size: 15px;">cpp</a> <a href="/tags/memory-fence/" style="font-size: 15px;">memory fence</a> <a href="/tags/memory-ordering/" style="font-size: 15px;">memory ordering</a> <a href="/tags/Windows/" style="font-size: 15px;">Windows</a> <a href="/tags/multiple-instance/" style="font-size: 15px;">multiple instance</a> <a href="/tags/crash/" style="font-size: 15px;">crash</a> <a href="/tags/breakpad/" style="font-size: 15px;">breakpad</a> <a href="/tags/exception/" style="font-size: 15px;">exception</a> <a href="/tags/c/" style="font-size: 15px;">c++</a> <a href="/tags/enum/" style="font-size: 15px;">enum</a> <a href="/tags/flag/" style="font-size: 15px;">flag</a> <a href="/tags/bitwise%EF%BC%8C-SFINAE/" style="font-size: 15px;">bitwiseï¼Œ SFINAE</a> <a href="/tags/KBase/" style="font-size: 15px;">KBase</a> <a href="/tags/command-line/" style="font-size: 15px;">command-line</a> <a href="/tags/abstraction/" style="font-size: 15px;">abstraction</a> <a href="/tags/windows/" style="font-size: 15px;">windows</a> <a href="/tags/design/" style="font-size: 15px;">design</a> <a href="/tags/environment/" style="font-size: 15px;">environment</a> <a href="/tags/anvil/" style="font-size: 15px;">anvil</a> <a href="/tags/cmake/" style="font-size: 15px;">cmake</a> <a href="/tags/project-management/" style="font-size: 15px;">project management</a> <a href="/tags/C-17/" style="font-size: 15px;">C++ 17</a> <a href="/tags/string-view/" style="font-size: 15px;">string_view</a> <a href="/tags/tokenizer/" style="font-size: 15px;">tokenizer</a> <a href="/tags/atoi/" style="font-size: 15px;">atoi</a> <a href="/tags/golang/" style="font-size: 15px;">golang</a> <a href="/tags/asio/" style="font-size: 15px;">asio</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/cfs/" style="font-size: 15px;">cfs</a> <a href="/tags/non-capturing-lambda/" style="font-size: 15px;">non-capturing lambda</a> <a href="/tags/function-pointer/" style="font-size: 15px;">function pointer</a> <a href="/tags/obs-studio/" style="font-size: 15px;">obs-studio</a> <a href="/tags/inno-setup/" style="font-size: 15px;">inno setup</a> <a href="/tags/installer/" style="font-size: 15px;">installer</a> <a href="/tags/%E6%A2%AF%E5%AD%90/" style="font-size: 15px;">æ¢¯å­</a> <a href="/tags/shadowsocks/" style="font-size: 15px;">shadowsocks</a> <a href="/tags/trojan/" style="font-size: 15px;">trojan</a> <a href="/tags/socat/" style="font-size: 15px;">socat</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/Unix/" style="font-size: 15px;">Unix</a> <a href="/tags/signal/" style="font-size: 15px;">signal</a> <a href="/tags/signalfd/" style="font-size: 15px;">signalfd</a> <a href="/tags/self-pipe-trick/" style="font-size: 15px;">self-pipe trick</a> <a href="/tags/cant/" style="font-size: 15px;">cant</a> <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/HandlerThread/" style="font-size: 15px;">HandlerThread</a> <a href="/tags/Looper/" style="font-size: 15px;">Looper</a> <a href="/tags/Handler/" style="font-size: 15px;">Handler</a> <a href="/tags/MessageLoop/" style="font-size: 15px;">MessageLoop</a> <a href="/tags/http/" style="font-size: 15px;">http</a> <a href="/tags/proxy/" style="font-size: 15px;">proxy</a> <a href="/tags/thread-pool/" style="font-size: 15px;">thread-pool</a> <a href="/tags/chromium/" style="font-size: 15px;">chromium</a> <a href="/tags/urlfetcher/" style="font-size: 15px;">urlfetcher</a> <a href="/tags/wireshark/" style="font-size: 15px;">wireshark</a> <a href="/tags/localhost/" style="font-size: 15px;">localhost</a> <a href="/tags/SFINAE/" style="font-size: 15px;">SFINAE</a> <a href="/tags/template/" style="font-size: 15px;">template</a> <a href="/tags/source-internals/" style="font-size: 15px;">source internals</a> <a href="/tags/message-loop/" style="font-size: 15px;">message-loop</a> <a href="/tags/shared-ptr/" style="font-size: 15px;">shared_ptr</a> <a href="/tags/type-injection/" style="font-size: 15px;">type injection</a> <a href="/tags/visual-studio/" style="font-size: 15px;">visual studio</a> <a href="/tags/libx264/" style="font-size: 15px;">libx264</a> <a href="/tags/vcpkg/" style="font-size: 15px;">vcpkg</a> <a href="/tags/tag-dispatching/" style="font-size: 15px;">tag dispatching</a> <a href="/tags/shared-ptr-internals/" style="font-size: 15px;">shared_ptr-internals</a> <a href="/tags/source-code-study/" style="font-size: 15px;">source-code-study</a> <a href="/tags/weak-ptr/" style="font-size: 15px;">weak_ptr</a> <a href="/tags/base-lib/" style="font-size: 15px;">base lib</a> <a href="/tags/boost/" style="font-size: 15px;">boost</a> <a href="/tags/datetime/" style="font-size: 15px;">datetime</a> <a href="/tags/chrono/" style="font-size: 15px;">chrono</a> <a href="/tags/libstdc/" style="font-size: 15px;">libstdc++</a> <a href="/tags/gcc/" style="font-size: 15px;">gcc</a> <a href="/tags/clang/" style="font-size: 15px;">clang</a> <a href="/tags/sfinae/" style="font-size: 15px;">sfinae</a> <a href="/tags/buddy-allocator/" style="font-size: 15px;">buddy-allocator</a> <a href="/tags/algorithms/" style="font-size: 15px;">algorithms</a> <a href="/tags/google-breakpad/" style="font-size: 15px;">google-breakpad</a> <a href="/tags/invalid-paramter/" style="font-size: 15px;">invalid paramter</a> <a href="/tags/operator/" style="font-size: 15px;">operator[]</a> <a href="/tags/owner-semantics/" style="font-size: 15px;">owner semantics</a> <a href="/tags/view-semantics/" style="font-size: 15px;">view semantics</a> <a href="/tags/error-handling/" style="font-size: 15px;">error handling</a> <a href="/tags/msvc/" style="font-size: 15px;">msvc</a> <a href="/tags/ebo/" style="font-size: 15px;">ebo</a> <a href="/tags/multiple-inheritance/" style="font-size: 15px;">multiple inheritance</a> <a href="/tags/haskell/" style="font-size: 15px;">haskell</a> <a href="/tags/infix-operator/" style="font-size: 15px;">infix operator</a> <a href="/tags/Visual-Studio/" style="font-size: 15px;">Visual Studio</a> <a href="/tags/debugger/" style="font-size: 15px;">debugger</a> <a href="/tags/UTF-8/" style="font-size: 15px;">UTF-8</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/mint/" style="font-size: 15px;">mint</a> <a href="/tags/%E7%A3%81%E7%9B%98/" style="font-size: 15px;">ç£ç›˜</a> <a href="/tags/%E6%89%A9%E5%AE%B9/" style="font-size: 15px;">æ‰©å®¹</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="https://www.daozhihun.com/" title="åˆ€ä¹‹é­‚ | å¤§æœ¨è€å¸ˆæˆé•¿æ—¥è®°" target="_blank">åˆ€ä¹‹é­‚ | å¤§æœ¨è€å¸ˆæˆé•¿æ—¥è®°</a><ul></ul><a href="https://runzhen.github.io/" title="ç®¡ç†å‘˜ | ç¡…è°·è°ˆæ’¸ç®¡" target="_blank">ç®¡ç†å‘˜ | ç¡…è°·è°ˆæ’¸ç®¡</a><ul></ul><a href="https://blog.chichou.me/" title="ChiChou | é¦–å¸­å®‰å…¨åœ°çƒä»ªåˆ‡å›¾æ€»å¥¸" target="_blank">ChiChou | é¦–å¸­å®‰å…¨åœ°çƒä»ªåˆ‡å›¾æ€»å¥¸</a><ul></ul><a href="https://fleurer.github.io/" title="Fleurer-lee | Få”çš„è¯»ä¹¦ç¬”è®°ï¼ˆå¤§é‡å¹²è´§ï¼‰" target="_blank">Fleurer-lee | Få”çš„è¯»ä¹¦ç¬”è®°ï¼ˆå¤§é‡å¹²è´§ï¼‰</a><ul></ul><a href="https://vizee.org/" title="Vizee | å³å°†èµ°ä¸Šäººç”Ÿå·…å³°æ¨èè‰çš„ç« æ€»" target="_blank">Vizee | å³å°†èµ°ä¸Šäººç”Ÿå·…å³°æ¨èè‰çš„ç« æ€»</a><ul></ul><a href="https://blog.thecjw.me/" title="TheCJW | çˆ±å¼¹æ£‰èŠ±çš„å°ä¼Ÿ" target="_blank">TheCJW | çˆ±å¼¹æ£‰èŠ±çš„å°ä¼Ÿ</a><ul></ul><a href="https://newbiecoder.0ginr.com/blog/" title="Newbie Coder | èŒèŒå“’çš„ç‚‰å­" target="_blank">Newbie Coder | èŒèŒå“’çš„ç‚‰å­</a><ul></ul><a href="https://frankpie.github.io/" title="è£´è‰è“ | æ„¤æ€’çš„è€å¸æœº" target="_blank">è£´è‰è“ | æ„¤æ€’çš„è€å¸æœº</a><ul></ul><a href="https://beanbee.me/" title="é™ˆè€å¸ˆ | Beanbee.Max" target="_blank">é™ˆè€å¸ˆ | Beanbee.Max</a><ul></ul><a href="https://sunus.me/" title="Sunus | æå¸ˆå‚…é£Ÿå“å‚CEO" target="_blank">Sunus | æå¸ˆå‚…é£Ÿå“å‚CEO</a><ul></ul><a href="http://www.tolower.net/" title="Lower | å–Šå¤§æœ¨å¤§å“¥çš„å°å¼Ÿ" target="_blank">Lower | å–Šå¤§æœ¨å¤§å“¥çš„å°å¼Ÿ</a><ul></ul><a href="http://mrljdx.com/" title="Mrljdx | å¤§ä¿å¥è€å¸æœº" target="_blank">Mrljdx | å¤§ä¿å¥è€å¸æœº</a><ul></ul><a href="https://www.mydavelv.net/" title="Davelv | æ±Ÿæ¹–äººç§°å¤§å°¾é©´" target="_blank">Davelv | æ±Ÿæ¹–äººç§°å¤§å°¾é©´</a></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> Recent Comments</i></div><script type="text/javascript" src="//kingsamchen-github-io.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright Â© 2026 <a href="/." rel="nofollow">KCçš„åºŸå¢Ÿå †.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>