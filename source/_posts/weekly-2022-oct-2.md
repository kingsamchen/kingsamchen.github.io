---
title: 一周杂记 in Week 2 Oct 2022
categories: CODE-LIFE
date: 2022-10-09 22:36:19
tags: [杂记]
---
本周是十月第二周。

10.2 和老婆一起回了温州老家，10.6 回到杭州，周末两天休了年假所以这周整周都是在休息中。

## Life

\#1

在家的时候和老婆还有岳母去打了两次乒乓球，因为岳母的“connections”所以场馆不收费。

这两场球下来感觉体内的乒乓之魂要觉醒了，每场都打的酣畅淋漓，还学到了几个正确的姿势，比如击球的时候不要抬肘，不熟练时不要翻拍 .etc

还没回到杭州老婆就淘宝上买了副乒乓球拍，因为小区也有几张乒乓球桌，所以以后也可以在小区打乒乓球啦。

\#2

假期看了两部电影：唐探3和侏罗纪世界3

先说唐探3，这是一部基本没有优点的电影...王宝强还是一如既往的吵，注水的剧情太多，主线案子差不多变成了副线，但是完全做不成案中案，推理程度弱化了很多。

总结下来就是适合一边吃东西一边看，如果你真的找不到什么电影可以丝毫不在意错过了某些剧情的话。

我能给的评价是 5/10

再来说侏罗纪世界3。

虽然我下了蓝光4K的加长版，但是因为温州老家 SONY 电视挂在墙上无法插入外接设备，导致我又开了一个月的B站会员，外加花了2.5在B站上看了院线版。

院线版整体还行，算是及格的爆米花篇，而且拉来了侏罗纪公园的角色，粉丝向拉满。

我能给到 6.5/10

作为有强迫症的人，回到杭州后我快速过了一遍加长版的版本，发现加长版比院线版好得多，不仅开头就很抓人，院线版中间一些莫名其妙的转折也有了合理的解释。

所以这个加长版叠加下来我能给到 7.5/10。

\#3

6号返程整体比较顺利，因为这几天零零散散一直有新病例爆出，所以其实还是挺怕突然就被拉走隔离了...

顺利出站后在东站吃了碗过桥米线，看着周围稀稀落落开着的店铺，和涨到35一碗的最普通的米线，心里一股说不的感觉。

淦，啥都别说了，这尼玛就是稳中向好。

\#4

因为假期几天在家里吃了好几顿大餐，回到杭州的时候，体重直接从 71.5kg 飙升到了 74.5kg。

所以一回到杭州就开始了四天三跑步，三天跑了刚好20KM。

中间一天本来是打算去打乒乓球的，可惜和老婆从银泰回来之后发现小区的乒乓球桌都有人了...残念

未来会一直保持这个运动节奏到年底，然后23年1月份的时候再去做个血常规和心电图的复查。

## Work

\#1

2号在家里用笔记本电脑写了十月第一周的周记，但是部署后发现博客直接被清空了...

当时人都傻了。

检查了一番之后发现笔记本生成的静态页面全都是空文件。

搜了一下发现是因为装的 hexo 版本太低，而 node 的版本太高，导致的问题，参见 [hexo 生成的 html 文件为空的问题](https://alanlee.fun/2021/02/28/hexo-empty-html/)

解决方案自然是升级 hexo

不过 hexo 这个用 node.js 写的东西升级起来真是个蛋疼的事情...我基本是照着[这篇博客](https://leiyawu.com/2021/04/24/Hexo%20Update%20From%203.5%20to%205.4/) 一步步完成的升级

经此一事，node.js 已经在我心中落下了难以维护的印象。

\#2

升级过程中遇到一个老文件夹因为有文件被占用而无法删除的问题。

以往都是重启的，但是我不想重启，也不想安装 unlocker （这玩意儿好像从win 10开始就兼容性不佳？）

作为一个曾经的资深 windows 开发，这种情况要么强制关闭句柄（unloker 的做法），要么直接关闭打开文件的进程，所以何不试试后者？

经过一番搜索，我发现利用 process explorer 就可以很方便找到进程，参见 https://superuser.com/a/399660

\#3

之前给公司的项目找一个支持 i18n 的 email address validator 库时找到了 https://github.com/gh0stwizard/libeav 这个库。

不过在测试的过程中发现了一个小 bug，当时想着给这个 lib 提一个 issue，结果一直放到十一假期才想起来有时间做这个。

至于 bug 是什么直接看 issue https://github.com/gh0stwizard/libeav/issues/1 把。

\#4

回到杭州后，我抽了一点时间在虚拟机里装了 linux-mint-21，因为之前 mint-20 升级太过麻烦了，所以还不如重装呢，反正之前的一键 bootstrap 脚本改改就可以直接跑了。

也是借着这个契机，我解决了之前用 vm 遇到的两个麻烦的问题。

第一个是不知道为什么 vm 内无法通过 vmnet8 这块网卡直接访问宿主机，这也意味着不能直接用宿主机的梯子了。

我以前的 workaround 是用 systemd 把 socat 搞成一个常驻服务，将 vm localhost:10080 的请求通过宿主机连接的 WiFi 子网直接转发到宿主机...

经过几个小时的排查，我发现是 windows 防火墙规则的问题导致的请求被丢弃。

又花了一点时间排查了规则，发现我不知道啥时候给加了规则丢弃 vm 内发往宿主机 clash.exe 这个进程的网络包...

解决方法：

1. 删掉 clash 的禁止规则
2. 增加 vm 的地址往 host 的 allow rules（当然做了地址范围限定）

第二个问题是 docker 默认的网络模式（NAT）起来的容器无法访问外网...

根据 https://juejin.cn/post/6994297865833021470 里的方法逐一排查，最后发现重建 `docker0` 网桥就好了...

除了上面两个之前就遇到的问题外，还遇到了 ubuntu 22.04 LTS 开始 deprecate 了 apt-key 的问题

不过问题不大，参考 https://www.digitalocean.com/community/tutorials/how-to-handle-apt-key-and-add-apt-repository-deprecation-using-gpg-to-add-external-repositories-on-ubuntu-22-04 处理就行

\#5

本周学习进度如下：

- **趣谈网络协议** 这个课程已经被我中途放弃了
  我给的评价是：实在积累，几乎每个章节都是一堆概念介绍，完全没有体系，基本没有啥干活。
  而且有很多协议其实光科普到位都得讲好久，在这里就完全是选择几个点随便展开一下就完了...
- 选了 **网络编程实战** 重新开始
  目前才看了两节，先持续围观
- 看完 _Software Engineering at Google | 12. Unit Testing_
  这一章很有共鸣，无论是 testing behavior not methods 还是 follow DAMP over DRY when sharing code for tests
  假期在老家为了看这个还在返程的时候把 SONY DPT 落家里了...
- 看完 _CppCon 2020 | Get Off My Thread: Techniques for Moving Work to Background Threads - Anthony Williams_
  基本属于综述性质的分享，而且大佬的演讲水平真是捉急...建议还是看大佬的书（C++ Concurrency in Action 2nd）吧

\#6

这周基本没怎么看 absl 的 synchronization/mutex

在家基本就是吃睡玩，回到杭州就是在折腾其他事情

我反思一下...

---

本周就是这样，下周见
