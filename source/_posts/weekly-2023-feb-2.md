---
title: 一周杂记 in Week 2 Feb 2023
categories: CODE-LIFE
date: 2023-02-13 20:09:08
tags: [杂记]
---

本周是二月第二周，突发的事情有点多...

## Life

\#1

上周还说公司可能马上要裁员，结果周二晚上刚和几个同事吃了一顿黄牛肉火锅之后，周三一大早起来就看到公司发了裁员通告，并且被裁通知邮件都发送完了，被裁的同事权限立刻被锁，周五前要走完流程。

并且组里几个被裁的同事我们都觉得是公司的损失，但是这又有啥用呢。

虽然补偿（N+4 加上8月前的股票加速归属）还行，但是名单的选取能看出基本就是 manager 定的，不是 random pickup；而名单某种程度基本反映了 manager 的好恶，至少在我个人看来这个名单是非常不合理的，而且持有类似想法的人不少。

所以虽然公司层面做到了果断处理，但是实际操作起来对团队士气影响很大。我甚至开始觉得今年没准是我在公司的最后一年了，所以不能再继续怡然自得下去，得提前开始思考一下未来的方向和规划。

年纪大了，大环境也不行，社会倒车一会儿加速一会儿刹车，留下来的和平时间确实不多了。

\#2

周末的时候老婆奶奶病情急转直下，周一下午就从县医院拉回老家了，这基本表明大家已经放弃治疗了。

老婆周二时候紧急让我给她买了晚上的票回去看奶奶最后一面，并且我也要在周三启程回老家。所以周三请了天假，刚好错过和组里被裁同事告别，Orz

周四傍晚的时候奶奶终于走了，大家也松了一口气（是的...）

奶奶这事儿充满了各种狗血戏剧，并且仍然是悲剧内核。这里就不再讲了，只能叹口气。😑

\#3

因为这周意外太多，所以没有看电影。

## Work

\#1

这周抽了一个间隙把 anvil 工程模板更新做完了，这个基本是 esl 前几个 PR 中带出来的附加产物。

细节可以看这里 https://github.com/kingsamchen/anvil/pull/4

不过现在越来越觉得目前通过拼字符串的方式来生成工程模板有点低效并且容易出错。

后面可能考虑一下使用 jinja2 这种 template engine 来做

\#2

本周学习进度

_Software Engineering at Google_ 看完了 _25. Compute as a Service_。这章也是最后一章，所以整本书终于也看完了。

这本书核心点总结一下就是：始终为了让团队效率能保持 linear scale。个中细节还是有点意思的

看了 _CppCon 2020 | The Hidden Secrets of Move Semantics - Nicolai Josuttis_ 作者是 C++ Standard Library 的作者，并且也出了一本专门讲 Move Semantics 的小册子。

这个 Talk 还是挺不错的。

在高铁上看了 _Post@Understanding Redis hash-max-ziplist-entries_。里面讲到了一个先把 key 抽出一个 prefix 或者规则可以用来 sharding，然后把一堆 key 分到一些个 hset 里。因为 hset 再数据量小的时候会用 ziplist 压缩，所以这些 key-value pairs 相比直接内存存储可以节省不少内存占用。

当然缺点是 CPU 上会有一些劣势，所以 trade-off 还是要自己掌握。

---

好了本周就这样，下周见
