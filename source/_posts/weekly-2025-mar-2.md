---
title: ä¸€å‘¨æ‚è®° in Week 2 Mar 2025
categories: CODE-LIFE
date: 2025-03-18 01:53:04
tags: [æ‚è®°]
---
æœ¬å‘¨ï¼ˆ03/10 ~ 03/16ï¼‰æ˜¯ä¸‰æœˆä»½ç¬¬äºŒå‘¨ï¼Œè¿™å‘¨äº‹æƒ…ä¹Ÿæ¯”è¾ƒå¤š

## Life

\#1

è¿™å‘¨äºŒä¹åˆ»çš„è·‘æ­¥æœºç½‘ç»œåˆå‡ºé—®é¢˜äº†ï¼ŒçœŸçš„æœäº†ã€‚æ²¡åŠæ³•è·‘åˆ°åŸè¥¿é“¶æ³°çš„ä¹åˆ»è·‘æ­¥ã€‚

ä¸€å¼€å§‹çº³é—·è¿™å®¶ä¹åˆ»é€‰å€ç‰›é€¼å•Šï¼Œç›´æ¥åœ¨é“¶æ³°å†™å­—æ¥¼ï¼Œè¿›å»åæ‰å‘ç°ï¼Œwocï¼Œå°±è¿™ä¹ˆä¸€ç‚¹ç‚¹ç©ºé—´ï¼Œè€Œä¸”æ™šä¸Š7ç‚¹å¤šï¼Œç©ºæ°”é‡Œå¼¥æ¼«ç€é‹è‡­å‘³ï¼Œç‹è‡­å‘³æ±—è‡­å‘³æ··åˆçš„å‘³é“...

è€Œä¸”ä»–å®¶çš„è·‘æ­¥æœºæ„Ÿè§‰ä¸æ˜¯æ°´å¹³ï¼Œä¹Ÿæœ‰ä¸€ä¸ªå€¾è§’ï¼Œæ‰€ä»¥è·‘ä¹…äº†ä¹Ÿè§‰å¾—ä¸èˆ’æœ

ä¸‹æ¬¡ä¸ä¼šå†æ¥è¿™å®¶äº†ã€‚

å‘¨å…­è™½ç„¶ä¸‹ç€å°é›¨ï¼Œè¯•æ¢æ€§åœ°å‘ç°å®¶è¾¹ä¸Šçš„é‚£å®¶ä¹åˆ»ç²¾å“é¦†çš„ç½‘ç»œä¿®å¥½äº†ï¼Œæ‰€ä»¥å‘¨å…­å°±åœ¨é™„è¿‘è·‘äº†ã€‚

å› ä¸ºä¸­é—´å°‘äº†ä¸€æ¬¡ï¼Œæ‰€ä»¥è¿™æ¬¡ç›´æ¥è·‘äº†åå¤šå…¬é‡Œï¼Œè¯•å›¾å¼¥è¡¥ä¸€ä¸‹ä¸­é—´çš„ gap ğŸ¤¡

\#2

æˆ‘å¦ˆå‘¨ä¸‰æ¥æ­å·ï¼Œçº¦äº†å‘¨å››çš„å£è…”åŒ»é™¢çœ‹ç‰™é½¿ã€‚

å‘¨å››çœ‹å®Œä¹‹åè¯´å‘¨äº”è€å®¶æœ‰äººå»ä¸–äº†éœ€è¦å›å»ï¼Œæ‰€ä»¥ä¹°äº†å‘¨äº”çš„ç¥¨å°±å›å»äº†ã€‚

ä¸è¿‡è¯´æ˜¯å†è¿‡ä¸¤å‘¨è¿˜è¦å†æ¥ä¸€æ¬¡æ­å·åšä¸ªç‰™å¥—å•¥çš„

\#3

å‘¨æ—¥å¼€è½¦é™ªåª³å¦‡å„¿å’Œä¸ˆæ¯å¨˜è€ƒå¯Ÿäº†å¸‚å¦‡ä¿é’±æ±Ÿé™¢åŒºå’Œè§å±±åŒ»é™¢çš„æœˆå­ä¸­å¿ƒã€‚

é€‰è¿™ä¸¤å®¶æ˜¯å› ä¸ºè¿™ä¸¤å®¶çš„æœˆå­ä¸­å¿ƒæ˜¯åŒ»é™¢è‡ªè¥çš„ï¼Œé™¤äº†é˜¿å§¨æ˜¯å¤–è˜ä¹‹å¤–åŒ»ç”ŸæŠ¤å£«éƒ½æ˜¯æœ¬é™¢å›¢é˜Ÿã€‚

è€ƒå¯Ÿå®Œä¹‹åæˆ‘è‡ªå·±å¯¹ä¸¤å®¶ç¯å¢ƒå’Œæä¾›çš„æœåŠ¡éƒ½æ˜¯æ»¡æ„çš„ï¼Œä½†æ˜¯æœ€ç»ˆå†³å®šæƒå¾—åª³å¦‡å„¿æ¥å®š...

åæ­£å¸Œæœ›å¥¹åˆ«æœ€åå“ªå®¶éƒ½ä¸å»æŠ˜è…¾æˆ‘ä»¬å‡ ä¸ªäºº ğŸ¤·â€â™‚ï¸


## Work

\#1

**Memory consumption, dataset size and performance: how does it all relate?** https://johnysswlab.com/memory-consumption-dataset-size-and-performance-how-does-it-all-relate/

- å¯¹äº memory bound çš„ç¨‹åºæ¥è¯´å‡å°‘å†…å­˜å ç”¨å¯ä»¥æå‡æ€§èƒ½
- ç„¶åæ˜¯ä¸€äº›å‡å°‘å†…å­˜å ç”¨çš„ tips/tricks

**CppNow 2024 | What Does It Take to Implement the C++ Standard Library? (C++Now Edition) Christopher Di Bella** https://www.youtube.com/watch?v=bXlm3taD6lw&list=PL_AKIMJc4roWVN3DOxmYZVLNaH0pFHts1&index=42

- åŸºæœ¬æ˜¯å¬æ•…äº‹ï¼Œæ ‡å‡†åº“å¼€å‘è€…åˆ†äº«è‡ªå·±çš„å¿ƒè·¯å†ç¨‹
- å¦å¤–å­¦åˆ°ä¸€ä¸ªï¼Œç”¨ libstdc++ çš„è¯éœ€è¦é¢å¤–å®šä¹‰ `-D_GLIBCXX_SANITIZE_VECTOR`

**C++ Weekly - Ep 470 - requires Clause vs requires Expression?** https://www.youtube.com/watch?v=k1I4ZoB50_I

- è¿™ä¸€æœŸå¹²è´§å¾ˆå¤šï¼Œæ„Ÿè§‰ä¸€ä¸‹å°± get åˆ°æ ¸å¿ƒç‚¹äº†
- `requires expression` æ ¸å¿ƒå°±æ˜¯åˆ¤æ–­ä¸€æ®µä»£ç èƒ½å¦æ­£å¸¸ç¼–è¯‘ï¼Œç„¶åè¿”å›ä¸€ä¸ª booleanï¼›å› ä¸ºä»–æ˜¯è¿”å›ä¸€ä¸ª boolean æ‰€ä»¥å®é™…ä¸Šå¯ä»¥å…šåšè¿è¡Œæ—¶ä»£ç ç”¨

    ```cpp
    int main() {
        return requires(int i) { ++i; };
    }
    ```

    å› ä¸ºæœ¬èº«æ˜¯åˆæ³•ä»£ç æ‰€ä»¥è‡ªç„¶è¿”å› trueï¼›ä½†æ˜¯å¦‚æœæŠŠ `int i` æ¢æˆ `cosnt int i` è™½ç„¶ requires expression èƒ½åˆ¤æ–­å‡ºæ˜¯ invalid ä½†æ˜¯æˆ‘ä»¬è‡ªå·±ä¹Ÿæ²¡æ³•ç¼–è¯‘é€šè¿‡äº†ï¼›è§£å†³æ–¹æ¡ˆ/æ­£ç¡®çš„å§¿åŠ¿æ˜¯æŠŠ requires expression æ”¾åˆ° template context é‡Œå»

- ç„¶åå°±æœ‰

    ```cpp
    template<typename T>
    constexpr bool incr_able() {
        return requires(T i) { ++i; };
    }

    static_assert(incr_able<int>());       // ok
    static_assert(incr_able<const int>()); // fail
    ```

- `requires clause` å°±æ˜¯éœ€è¦ä¸€ä¸ª compile-time booleanï¼Œä¸ç®¡ä½ è¿™ä¸ª boolean æ˜¯æ€ä¹ˆæ¥çš„ï¼Œä½ ç”šè‡³å¯ä»¥ç›´æ¥æ‰”ä¸€ä¸ª `true/false` literal ä¸Šå»

**C++ Weekly - Ep 383 - C++ Cross Training** https://www.youtube.com/watch?v=9RxPRr-fk7Q

- è¿™ä¸€æœŸè®²çš„æ˜¯ cross training æœ‰åŠ©äºç†è§£å’Œæå‡æ•´ä½“ç¼–ç¨‹èƒ½åŠ›
- å¯ä»¥å¬å¬ï¼Œé¡ºå¸¦ç»ƒç»ƒå¬åŠ›

**C++ Weekly - Ep 382 - The Static Initialization Order Fiasco and C++20's constinit** https://www.youtube.com/watch?v=rEwijXgC_Kg

- â€œconstinit doesnâ€™t change the meaning of your code, it validates your assumptionsâ€
- ç”¨è¿™ä¸ªæ¥ä¿è¯æ ‡è®°çš„ static/thread storage durationï¼ˆåŒ…å«å…¨å±€/é™æ€/tlsï¼‰çš„å˜é‡èƒ½å¤Ÿåœ¨ compile-time å®Œæˆåˆå§‹åŒ–
- é˜²æ­¢ static initialization order fiasco çš„åšæ³•æˆ‘è§‰å¾—æ˜¯ç›´æ¥å…³é—­äº† runtime initializationï¼Œæ‰€ä»¥é€‚ç”¨åœºæ™¯è¿˜çœŸçš„å¾—çœ‹

**C++ Weekly - Ep 381 - C++23's basic_string::resize_and_overwrite** https://www.youtube.com/watch?v=Ymm0yN_QUQA

- ç°åœ¨çš„ resize è¦ä¹ˆç”¨é»˜è®¤å€¼å¡«å……è¦ä¹ˆç”¨ç»™å®šçš„ char å¡«å……ï¼Œæ•ˆç‡æœ‰ç‚¹é—®é¢˜ï¼Œå¹¶ä¸”ä¸éœ€è¦å¡«å……çš„æ—¶å€™ overhead æœ‰å»ä¸æ‰ï¼Œæ‰€ä»¥æ‰å¼•å…¥è¿™ä¸ªæ–°å‡½æ•°
- episode é‡Œé¢å±•ç¤ºçš„æ˜¯è‡ªå®šä¹‰ overwrite çš„æ“ä½œï¼Œå¦‚æœåªæƒ³å½“åšä¸€ä¸ª buffer åš uninit-resizeï¼Œå¯ä»¥è¿™ä¹ˆç”¨

    ```cpp
        std::string str = "hello";

        // è°ƒæ•´å¤§å°ä½†ä¸ä¿®æ”¹å†…å®¹
        str.resize_and_overwrite(10, [](char* buf, std::size_t buf_size) {
            return buf_size; // è¿”å›ç¼“å†²åŒºå¤§å°ï¼Œè¡¨ç¤ºä½¿ç”¨å…¨éƒ¨ç©ºé—´
        });

        std::cout << str << std::endl; // è¾“å‡º: helloï¼ˆåé¢å¯èƒ½æœ‰æœªåˆå§‹åŒ–çš„å­—ç¬¦ï¼‰
    ```


**C++ Weekly - Ep 380 - What Are std::ref and std::cref and When Should You Use Them?** https://www.youtube.com/watch?v=YxSg_Gzm-VQ

- std::ref/cref çš„ä¸»è¦é€‚ç”¨åœºæ™¯ï¼Œç›®å‰è¿˜æ˜¯å¯¹ `std::bind()` è¿™ç§é»˜è®¤é‡‡ç”¨ pass-by-value çš„è°ƒç”¨è¿›è¡Œ pass-by-ref æŠ˜è¡·çš„å¤„ç†
- ä¸è¿‡ std::reference_wrapper çš„ä½¿ç”¨åœºæ™¯è¿˜æ˜¯ä¸å°‘çš„ï¼Œæ¯”å¦‚æ­é… optional/variant è¿™ç§ä¸€èµ·ç”¨
- reference_wrapper çš„å¥½å¤„æ˜¯å¯ä»¥åšæŒä½¿ç”¨ value semantics åŒæ—¶å¸¦æœ‰ ref è¯­ä¹‰ï¼›åŸç”Ÿçš„å¼•ç”¨æœ‰æ—¶å€™çš„æ•ˆæœæ˜¯åç›´è§‰çš„ï¼ˆä¹‹å‰æœ‰å‘¨è®°é‡Œæœ‰æåˆ°ï¼‰

\#2

è¿™å‘¨åˆåˆåˆä¸€æ¬¡è¸©äº† apache httpd çš„å‘ã€‚

æˆ‘ä»¬å¥½å‡ ä¸ª service éƒ½æ˜¯ç¼–è¯‘æˆ so åœ¨local vmé‡Œæ˜¯ç”±ä¸€ä¸ª httpd åŠ è½½çš„ï¼Œç„¶å service-a å’Œ service-b éƒ½ç¼–è¯‘é“¾æ¥äº† service-b çš„ http-rpc structs/clientï¼ˆheader onlyï¼‰

ç„¶åæˆ‘å¾€ service-b çš„ http-rpc æŸä¸ª resp é‡ŒåŠ äº†ä¸€ä¸ªå­—æ®µ Fï¼Œä½†æ˜¯æµ‹è¯•æ—¶å€™å‘ç°è¯·æ±‚è¿™ä¸ª api è¿”å›çš„ response é‡Œé¢æ­»æ´»æ²¡æœ‰ F

æœ€åæ’æŸ¥äº†å¾ˆä¹…æ‰å‘ç°å› ä¸ºæ²¡æœ‰æŠŠ service-a ä¹Ÿç¼–è¯‘é“¾æ¥ï¼Œå¯¼è‡´åºåˆ—åŒ–ç”¨çš„å‡½æ•°è·³åˆ°äº† service-a é‡Œçš„é‚£ä¸ªç‰ˆæœ¬...

å®é™…ä¸Šè¿™ä¸ªæ˜¯è¿å odr-violation çš„ï¼Œä½†æ˜¯åŠ¨æ€åº“è¿™ä¸ªæœ¬æ¥å°±æ˜¯æ³•å¤–ç‹‚å¾’

ä¹Ÿå°±æ˜¯å› ä¸ºæ‘Šä¸Šäº†ä¸€ä¸ªæŒ«é€¼è€ç™» headï¼Œ2020å¹´èµ·çš„é¡¹ç›®ç‰¹ä¹ˆæ•´ä¸ªæŠ€æœ¯æ ˆè¿˜ç”¨çš„æ˜¯2000å¹´çš„ï¼ŒçœŸçš„æœäº†

\#3

è¿™å‘¨å­¦ä¼šäº† fmtlib å¦‚ä½•æ‰“å°æŒ‡é’ˆ - - ğŸ¤£

fmtlib æ‰“å°æŒ‡é’ˆéœ€è¦ç”¨ `fmt::ptr()` æ‰è¡Œ

```cpp
int i = 5;
auto pi = &i;
fmt::println("{}", fmt::ptr(pi));
```

ä¸ç”¨ä¼šç›´æ¥ç¼–è¯‘å¤±è´¥

è¿™åº”è¯¥æ˜¯ä»ç±»å‹ç³»ç»Ÿä¸Šåšçš„ enhancement

---

å¥½äº†è¿™å‘¨å°±è¿™æ ·ï¼Œä¸‹å‘¨è§
