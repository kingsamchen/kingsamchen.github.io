---
title: ä¸€å‘¨æ‚è®° in Week 3 Aug 2024
categories: CODE-LIFE
date: 2024-08-19 20:48:37
tags: [æ‚è®°]
---
æœ¬å‘¨ï¼ˆ08/12 ~ 08/18ï¼‰æ˜¯8æœˆä»½çš„ç¬¬ä¸‰å‘¨ï¼Œæ°”æ¸©æ¸æ¸æœ‰ç‚¹ä¸‹é™çš„è¶‹åŠ¿äº†ï¼Œç®—æ˜¯ä¸ªå¥½å…†å¤´ã€‚

## Life

\#1

å‘¨å››æ™šä¸Šå’Œ iker åœ¨å¾®ä¿¡ç¾¤é‡Œé—²èŠæåˆ°è¦ä¸ææ—©çœ‹æœ€æ–°çš„â€œå¼‚å½¢ï¼šå¤ºå‘½èˆ°â€ï¼Œæ‹©æ—¥ä¸å¦‚æ’æ—¥ï¼Œå°±å‘¨äº”ä¸­åˆè¯·ä¸¤ä¸ªå°æ—¶å‡å»çœ‹å¥½äº† ğŸ¤£

ç„¶åè¿‡äº†ä¸€ä¼šå„¿ iker è¯´ï¼šå“å‘€ç¾¤é‡Œæœ‰ä¸ªHR...

æˆ‘ï¼š....

ç„¶åç§èŠ iker åæ­£å…¶ä»–äººéƒ½ä¸å“åº”è¦ä¸å¹²è„†æˆ‘ä»¬ä¿©å·å·å»ï¼Œåœ¨ç¾¤é‡Œæ¼”ä¸€ä¸‹HRå¥½äº† ğŸ˜‚ äºæ˜¯æˆ‘ä»¬å°±ä¹°äº†å‘¨äº”ä¸­åˆçš„ç¥¨ï¼Œä½†æ˜¯åœ¨ç¾¤é‡Œè¯´å“å‘€æ—¢ç„¶å¦‚æ­¤é‚£å°±ç®—äº†å§ï¼Œéƒ½çº¦ä¸åˆ°äººè¿˜æ˜¯æ¢æ—¶é—´å¥½

å› ä¸ºå‘¨äº” WFH æ‰€ä»¥11:30ä¸€åˆ°å°±ä¸‹æ¥¼éª‘ç€ç”µé©´è·‘å»è¥¿æºªé“¶æ³°äº†ã€‚è¿™åœ°æ–¹ä¸å¸¸æ¥åƒä¸œè¥¿ï¼Œè¿˜å› ä¸ºä»–å®¶åˆ†Aã€Bé¦†æ‰€ä»¥æ‰¾ KFC è¿˜è´¹äº†ä¸€ç•ªåŠŸå¤«ã€‚

åƒé¥±å–è¶³åå°±å»Bé¦†çš„åšçº³çœ‹ç”µå½±æ‹‰~

è¿™æ¬¡çš„å¼‚æ€§æ–°ç‰‡åªèƒ½è¯´éå¸¸å¯¹æˆ‘èƒƒå£ï¼Œä¸€æœ¬æ»¡è¶³ã€‚

çœ‹å®Œåå°±åˆéª‘ç€ç”µé©´è·‘å›å®¶äº†ç»§ç»­ä¸Šç­äº† ğŸ˜†

\#2

å› ä¸ºä¹‹å‰å…ˆå’Œä¸¤ä¸ªå‘å°çº¦çš„å‘¨å…­ä¸Šåˆçš„è¥¿æŠ•é“¶æ³°çš„ç”µå½±é™¢çœ‹å¼‚å½¢ï¼Œæ‰€ä»¥å‘¨å…­ä¸€æ—©å°±å‡ºå‘äº†ã€‚

ä½†æ˜¯æˆ‘æ²¡æƒ³åˆ°è¿™æ¬¡å‘¨å…­åˆ°ç´«ä¹‹éš§é“å‰é¢çš„æ•´ä¸ªç´«é‡‘æ¸¯è·¯å…¨éƒ½å µä¸Šäº†ï¼Œç»™æˆ‘è›‹ç–¼çš„...æå‰ç»™å…„å¼Ÿä»¬é¢„è­¦ä¹‹åä¸€ä¸ªå‘å°è¯´ä»–é‚£è¾¹ä¹Ÿå µäº† ğŸ¤¨

æœ€ç»ˆå¼€åˆ°è¥¿æŠ•é“¶æ³°åœå¥½è½¦ä¹‹åå·²ç»å¼€åœºå¿«ååˆ†é’Ÿäº†ï¼Œä¸è¿‡è¿˜å¥½è¿›å½±é™¢åä¸‹ä¹‹åå‘ç°å‰è¨€éƒ¨åˆ†å·²ç»è¿‡äº†ï¼Œåˆšå¥½åˆ°ç‰‡å¤´ï¼Œæ¯•ç«Ÿæˆ‘å‘¨äº”å·²ç»ä¸€åˆ·äº†å˜›

äºŒåˆ·çš„ä½“éªŒè¿˜æ˜¯éå¸¸ä¸é”™ï¼Œæœ‰äº›æ¡¥æ®µè¿˜æ˜¯ä¼šæœ‰é‚£ç§è¢«å“å€’çš„æ„Ÿè§‰ã€‚

çœ‹å®Œç”µå½±ååƒäº†ä¸€é¡¿å‡‘å‡‘ç«é”…ï¼Œæˆ‘æ„Ÿè§‰ä¸€èˆ¬å§å°±å‘³é“ï¼Œä½†æ˜¯æœåŠ¡ç¡®å®æ˜¯ä¸é”™

åƒå®Œç«é”…å»äº†ä¸€ä¸ªå‘å°å®¶é‡Œåäº†ä¸€ä¸‹ï¼Œç„¶åç‚¹äº†ä¸€ä¸ª 007 skyfall çœ‹äº†èµ·æ¥ï¼Œä¸­é—´æˆ‘æ€»æ„Ÿè§‰å¥½åƒå“ªé‡Œçœ‹è¿‡ä½†æ˜¯å®Œå…¨æ²¡å°è±¡äº†

çœ‹åˆ°å—16:40å°±å¼€è½¦å›å®¶äº†ï¼Œä¸ç„¶å¤ªæ™šäº†åˆæœ‰è¹­åˆ«äººæ™šé¥­çš„å«Œç–‘äº†

\#3

- **åƒ§ä¾£å’Œæª The Monk and the Gun** 4/5 å¾ˆæœ‰è¶£çš„ç”µå½±ï¼Œéšå–»å¾ˆå¤šï¼Œä¸­é—´åˆ†æ–­æœ€ååˆäº¤å‰çš„å™äº‹è¿™é‡Œç”¨å¾—æ°åˆ°å¥½å¤„ã€‚æ°‘ä¸»åŒ–ä»£è¡¨çš„ç°ä»£äº‹ç‰©å¯¹ä¼ ç»Ÿæ€æƒ³ä¹ ä¿—çš„å†²å‡»ï¼Œå®˜å‘˜ä»¬å¯¹äºæ°‘ä¸»æµç¨‹çš„æ‰§ç€è¿œå¤§äºæ°‘ä¸»åˆ¶åº¦æœ¬èº«ï¼Œç¾å›½æ¥çš„æªæ”¯æ”¶è—å®¶æœ€åçœ‹ç€è‡ªå·±è‹¦è‹¦å¯»æ‰¾çš„æªå¦‚åŒä¸–ä¿—åˆ©ç›Šä¸€èˆ¬è¢«åŸ‹åœ¨ä½›å¡”åº•ä¸‹
- **å¼‚å½¢ï¼šå¤ºå‘½èˆ° Alien: Romulus** 5/5 å½“åˆé‚£ç§æ„Ÿè§‰åˆéƒ½å›æ¥äº†ï¼Œæ¢è®¨å®—æ•™å“²å­¦è¿˜æ˜¯ç•™ç»™æ‰‘è¡—çš„å‰ä¼ å§
- **å·å¤©æ¢æ—¥ The Italian Job** 3.5/5 3.5/5 ocean-eleven å¼çš„ç¾¤åƒhustleç‰‡ï¼Œå‰§æœ¬èŠ‚å¥æ²¡é—®é¢˜å¾ˆæµç•…ï¼Œå¡éš†æ˜¯çœŸæ¼‚äº®ï¼Œä½†æ˜¯æ„Ÿè§‰è§’è‰²ç‰¹ç‚¹éƒ½æ‹å¾—ä¸€èˆ¬ï¼Œé™¤äº†Charlieä¹‹å¤–å…¶ä»–äººéƒ½æ„Ÿè§‰åƒæ‰“é…±æ²¹.â€¦
- 007 Skyfall æˆ‘å‘ç°æ˜¯2014å¹´çœ‹çš„...è¿™æ¬¡ç®—æ˜¯äºŒåˆ·å§... Orz

\#4

å‘¨äº”ä¸Šåˆçš„æ—¶å€™æˆ‘ä»¬ä¸šåŠ¡çš„ head è€ç™»å¤±è”äº†ï¼Œç„¶åæˆ‘ä»¬å‘ç° CDO ä¸‹å±çš„ head å…¨éƒ½æ˜¯æ‰‹æœºåœ¨çº¿

äºæ˜¯æˆ‘ä»¬å¤§èƒ†çŒœæµ‹ä»–ä»¬åˆè¢«å«å»å¼€åŒ—æˆ´æ²³ä¼šè®®äº†

ç»“åˆä¸‹å‘¨é©¬ä¸Šè¦å‘çš„è´¢æŠ¥ï¼Œä¼°è®¡æ˜¯è´¢æŠ¥ä¼šå¾ˆéš¾çœ‹ï¼Œç„¶åå¯èƒ½è¦æœ‰è£å‘˜å•¥çš„ ğŸ˜…

## Work

\#1

**CppCon 2022 | Modern C++: C++ Patterns to Make Embedded Programming More Productive - Steve Bush** https://www.youtube.com/watch?v=6pXhQ28FVlU&list=PLHTh1InhhwT6c2JNtUiJkaH8YRqzhU7Ag&index=15

- ä¸€äº› embeded ç¯å¢ƒçš„ tipsï¼Œä¸»è¦ä»¥å¹¿åº¦è€Œä¸æ˜¯æ·±åº¦ä¸ºæ ¸å¿ƒ

**CppCon 2022 | Breaking Dependencies - The Visitor Design Pattern in Cpp - Klaus Iglberger** https://www.youtube.com/watch?v=PEcy1vYHb8A&list=PLHTh1InhhwT6c2JNtUiJkaH8YRqzhU7Ag&index=14

- ä¼ ç»Ÿçš„ visitor pattern å’Œä½¿ç”¨ std::variant å®ç° visitor pattern çš„ä¼˜ç¼ºç‚¹
- éå¸¸ä¸é”™çš„ä¸€ä¸ªæ•™å­¦ talk

**CppCon 2022 | From C++ Templates to C++ Concepts - Metaprogramming: an Amazing Journey** https://www.youtube.com/watch?v=_doRiQS4GS8&list=PLHTh1InhhwT6c2JNtUiJkaH8YRqzhU7Ag&index=16

- Introduction to concepts

**Creating a co_await awaitable signal that can be awaited multiple times, part 5** https://devblogs.microsoft.com/oldnewthing/20210305-00/?p=104934

- ç³»åˆ—ç¬¬19ç¯‡
- è¿™ç¯‡ç”¨äº†ä¸¤ä¸ª trickï¼Œä¸€ä¸ªæ˜¯ last node ptr å¯ä»¥æ›¿ä»£ä¹‹å‰çš„ signaled indicator è¿™æ ·ä½“ç§¯å¤§å°ä¸å˜è¿˜å¯ä»¥åœ¨æœ€åæ­£å‘éå†é“¾è¡¨
- å¦å¤–ä¸€ä¸ªtrickæ˜¯ last ptr æ˜¯äºŒçº§æŒ‡é’ˆï¼Œè¿™ä¸ªåº”è¯¥ç®—æ˜¯ç»å¸¸å†™é“¾è¡¨çš„ä¸€ä¸ªå¸¸ç”¨æŠ€æ³•ï¼Ÿæˆ‘è‡ªå·±æ˜¯æƒ³äº†ä¸€ä¸‹æ‰å‘ç°è¿™ä¸ª trick å¯ä»¥è®© append æ“ä½œç›´æ¥ç»Ÿä¸€åŒ–

**Creating a co_await awaitable signal that can be awaited multiple times, part 6** https://devblogs.microsoft.com/oldnewthing/20210308-00/?p=104938

- ç³»åˆ—ç¬¬20ç¯‡
- è¿™ç¯‡æ¢è®¨äº†ä¸¤ä¸ªç‚¹ï¼Œç¬¬ä¸€ä¸ªæ˜¯æ˜¯å¦è¦è€ƒè™‘ event signaled ä¹‹åä¸´æ—¶æ’é˜Ÿçš„ coroutineï¼Œç¬¬äºŒä¸ªæ˜¯ coroutine destroy çš„æ—¶å€™æ˜¯å¦è¦ unlink from waiting queue
- Raymond æåˆ° cppcoro çš„ä»£ç é‡Œä¹Ÿå¹¶ä¸å¤„ç† suspended  waiting coroutine

**Meeting C++ online | Victor Ciura - Symbolism: Rainbows and Crashes** https://www.youtube.com/watch?v=4qvB3HQHgMM

- focus on Windows
- Prefere /EHa (SEH) over standard c++ exception in underlying and wraps SEH in C++ exception
- Some SEH use case tips
- However, we can generate minidump insteadâ€¦which contains more detailed context information
- quick introduction to C++ 23 stacktrace

**Optimizing the Clang compilerâ€™s line-to-offset mapping** https://developers.redhat.com/blog/2021/05/04/optimizing-the-clang-compilers-line-to-offset-mapping#

- ä¸€äº› micro-optimization çš„å®è·µ
- æ ¹æ®ä¸šåŠ¡åœºæ™¯æ¥ instruct __builtin_expect/likely/unlikely ç”Ÿæˆæ›´å¥½çš„ä»£ç ï¼›å¯¹äºé«˜æ¦‚ç‡çš„æƒ…å†µåŸºäºæ›´å¤šçš„ fast path ä¼˜åŒ–ï¼›bithack å’Œ sse ç‰ˆæœ¬çš„ memchr

**Mostly harmless: An account of pseudo-normal floating point numbers** https://developers.redhat.com/blog/2021/05/12/mostly-harmless-an-account-of-pseudo-normal-floating-point-numbers#

- ä»‹ç»äº† intel å¼•å…¥çš„ 80-bit floating point ç±»å‹åœ¨æŸäº›æƒ…å†µä¸‹â€œå¯èƒ½â€ä¼šæ˜¯ *pseudo-normal floating point numbers* å¹¶ä¸”å¯¼è‡´æµ®ç‚¹æ•°å¤„ç†å˜å¾—æ£˜æ‰‹ï¼Œä»¥åŠè¿™ç§ ub çš„ case ä¼šå¯¼è‡´ä¸€äº›å®‰å…¨éšæ‚£

\#2

è¿™å‘¨è§£å†³äº†æˆ‘ä»¬é¡¹ç›®é‡Œå­ç›®å½•çš„æºç æ–‡ä»¶ä¼šå¯¼è‡´ ci clang-tidy å¼‚å¸¸çš„é—®é¢˜ã€‚

åŸå› æ˜¯ï¼š

- æˆ‘ä»¬ç”¨äº† makefileï¼Œæ²¡æœ‰æ ‡å‡†çš„ compile_commands.json çš„ç”Ÿæˆï¼Œæ‰€ä»¥ clang-tidy çš„ç¼–è¯‘å‚æ•°æ˜¯ç›´æ¥é€šè¿‡ makefile é‡Œå®šä¹‰æä¾›çš„
- è¿™å°±å¯¼è‡´æˆ‘ä»¬è·‘ clang-tidy å¿…é¡»è¦ cd åˆ°æŸä¸ªæ¨¡å—æ‰€åœ¨çš„ç›®å½•æ‰èƒ½ make clang-tidy
- è€Œä¹‹å‰çš„ ci hook éƒ½æ²¡æœ‰è€ƒè™‘å­ç›®å½•çš„æƒ…å†µï¼Œå› ä¸ºå­ç›®å½•ä¸å­˜åœ¨ makefile æ–‡ä»¶ï¼Œæ‰€ä»¥ä¼šå¤±è´¥
- ç»™å­ç›®å½•æ·»åŠ ä¸€ä¸ª makefile ç¡®å®å¯ä»¥è§£å†³é—®é¢˜ï¼Œä½†æ˜¯è¿™ä¸ª workaround è®©æˆ‘è§‰å¾—å¾ˆä¸å¹²å‡€ï¼Œå› ä¸ºæˆ‘ä»¬çš„æ„å›¾å°±æ˜¯ä¸€ä¸ªæ¨¡å—ä¸€ä¸ª makefileï¼Œå­ç›®å½•ä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹æ¨¡å—ï¼Œä½†æ˜¯å¦‚æœæ”¾äº† makefile å°±ä¸èƒ½é˜»æ­¢åˆ«äººå¾€é‡Œé¢ç›´æ¥å†™æ„å»ºé€»è¾‘

æ‰€ä»¥æœ€åçš„æ–¹æ¡ˆæ˜¯æˆ‘èŠ±äº†ç‚¹æ—¶é—´ï¼Œè¾¹é—® GPT è¾¹å†™ bash åšäº†ä»æŸä¸ªæºæ–‡ä»¶ä½ç½®å¼€å§‹é€’å½’å‘ä¸Šæ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ…å« makefile ç›®å½•çš„å®ç°ï¼Œæ”¹äº†ä¸€ä¸‹å…¶ä»–éƒ¨åˆ†å°±è§£å†³äº†è¿™å—é—®é¢˜

æ ¸å¿ƒä»£ç å°±

```bash
#!/usr/bin/env bash

function find_makefile_dir() {
  local fullpath="$1"
  local file=$(basename "${fullpath}")
  local dir=$(dirname "${fullpath}")

  while [[ "${dir}" != "." && "${dir}" != "/" ]]; do
      if [[ -f "${dir}/Makefile" ]]; then
          local remain_path="${fullpath#${dir}/}"
          echo "${dir}:${remain_path}"
          return 0
      fi
      dir=$(dirname "${dir}")
  done
}

changed_files=($(git diff --diff-filter=d --name-only HEAD~1 HEAD | grep "\.cc$"))

for file in "${changed_files[@]}"; do
  parts=$(find_makefile_dir "${file}")
  if [[ -n ${result} ]]; then
    result="${result}\n${parts}"
  else
    result=${parts}
  fi
done

dir_array=($(echo -e "${result}" | cut -d':' -f1))
file_array=($(echo -e "${result}" | cut -d':' -f2 | tr -d '.cc'))

echo "${dir_array[@]}"
echo "${file_array[@]}"
```

\#3

è¿™å‘¨çç¢çš„äº‹æƒ…è¿˜æ˜¯æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥è¿˜æ˜¯æ¯”è¾ƒæ¸©åæ‘¸é±¼çš„çŠ¶æ€ ğŸ¤£

---

å¥½äº†è¿™å‘¨å°±è¿™æ ·ï¼Œä¸‹å‘¨è§
