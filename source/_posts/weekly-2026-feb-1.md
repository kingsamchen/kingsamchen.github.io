---
title: ä¸€å‘¨æ‚è®° in Week 1 Feb 2026
categories: CODE-LIFE
date: 2026-02-08 22:07:15
tags: [æ‚è®°]
---
è¿™å‘¨ï¼ˆ02/02 ~ 02/08ï¼‰æ˜¯2æœˆä»½ç¬¬ä¸€å‘¨ï¼Œä¸‹å‘¨æ˜¯èŠ‚å‰æœ€åä¸€ä¸ªå·¥ä½œå‘¨äº†ã€‚

## Life

\#1

å‘¨ä¸€çš„æ—¶å€™è€å´”ç§èŠæˆ‘è¯´çº¦äº†å‘¨ä¸‰ä¸‹åˆè°ˆç»©æ•ˆï¼Œå› ä¸ºå·²ç»çŸ¥é“äº†å½“åˆè€å´”ç»™æˆ‘æ‰“çš„åˆå§‹ç»©æ•ˆå’Œä»–çš„ä¸€äº›æ‰£åˆ†ç‚¹ï¼Œæ‰€ä»¥æˆ‘æå‰éƒ½åšäº†å‡†å¤‡ï¼Œæœ¬æ¥æ˜¯æ‰“ç®—é€ä¸€æŠ¨å‡»ä¹‹åæ‰¾USçš„å¤§ç»ç†Sâ€œèŠä¸€èŠâ€ã€‚

ç»“æœæ²¡æƒ³åˆ°è€å´”æœ€åæ—¶åˆ»å­¦ Trump TACO äº†ï¼Œç»™äº†æˆ‘ä¸€ä¸ªæ­£å¸¸çš„ç»©æ•ˆï¼Œè€Œä¸”ä»å¤´åˆ°å°¾æ²¡æåˆ°ä¹‹å‰åœ¨+1å’Œhré¢å‰æŠ¨å‡»æˆ‘çš„ç‚¹ã€‚

ä¼°è®¡æ˜¯ä¹‹å‰å‡ºçš„é‚£ä¸ªRCAå½±å“å¤ªå¤§äº†ï¼Œè€Œä¸”äº‹å‰æˆ‘å½“ä¼—æé†’ E2E æœ‰ç›¸å…³å¤±è´¥å¯èƒ½æœ‰å¯èƒ½ï¼Œæ‰€ä»¥è€å´”å¼ºè¡Œç»™æˆ‘æŒ‰å¤´æ‰“é‚£ä¸ªç»©æ•ˆç¡®å®å¤ªæ¬²ç›–å¼¥å½°äº†ã€‚

ä¼°è®¡ä»–ä¹Ÿæ€•æˆ‘çœŸçš„å»æ‰¾Så†²ä»–

ä¸è¿‡æ€ä¹ˆè¯´å‘¢ï¼Œè¿™ä¸ªåˆ©å¥½ä¸æ”¹æ—¢å®šç»“å±€ã€‚åªè¦Sæ‰‹é‡Œæ²¡äººï¼Œè¿˜å¾—ä¾èµ–è€å´”ç»™ä»–åšäº‹ï¼Œ26å¹´è¿˜å¾—æ˜¯æˆ‘åœ¨è¿™å›¢é˜Ÿçš„æœ€åä¸€å¹´ã€‚é™¤éæœ‰å˜æ•°èƒ½é™åˆ¶æ‰è€å´”

ä¸è¿‡è”¡å¸ä»¤ transfer çš„æ—¶é—´å®šäº†ï¼Œè¿™ä¸ªç®—æ˜¯ä¸ªå¤§åˆ©å¥½ï¼Œè™½ç„¶ä»–è‡ªå·±è¯´æ˜¯é€ƒéš¾è·‘åˆ° USï¼Œä½†æ˜¯åªè¦å­˜æœ‰æœºä¼šï¼Œç¿»ç›˜çš„ç†è®ºå¯èƒ½è¿˜æ˜¯æœ‰çš„ã€‚

æ¯•ç«Ÿå½“åˆç¡®å®ä¹Ÿæ²¡æƒ³åˆ°è€å¼ çœŸèƒ½ä¸‹è¯¾å•Šã€‚

\#2

å› ä¸ºç§‹å®è¿˜å¤ªå°ï¼Œæ‰€ä»¥ä»Šå¹´æ˜¥èŠ‚å°±ä¸å›å»äº†ã€‚ç»™å®¶é‡Œäººä¹°äº†ç¥¨ï¼Œè®©ä»–ä»¬æ˜¥èŠ‚è¿‡æ¥ã€‚

å®¶é‡Œåˆå››åšä¸œï¼Œæ‰€ä»¥ä»–ä»¬åˆä¸‰ä¸‹åˆå›å»å°±è¡Œï¼Œç„¶ååˆå…­ç¥ å ‚çš„äº‹æƒ…ç»“æŸæˆ‘å¦ˆåˆè¦å†æ¥æ¥ç€å¸¦å¨ƒã€‚

ä¸è¿‡è€å©†è§‰å¾—æ˜¥èŠ‚å‘†åœ¨æ­å·å®åœ¨æ˜¯å¤ªæ— èŠäº†

ä¹‹å‰21å¹´åœ¨æ­å·å‘†æ»¡äº†ä¸€ä¸ªæ˜¥èŠ‚ï¼Œç¡®å®æŒºæ— èŠçš„

\#3

è¿™å‘¨æŠŠ Daredevil Born Again S01 çœ‹å®Œäº†ï¼Œå‘¨æ—¥é™ªè€å©†çœ‹äº†é˜¿å‡¡è¾¾3ã€‚è€å©†çœ‹äº†ä¸€åŠä¸­é—´ç›´æ¥ç¡ç€äº† ğŸ¤£

- **é˜¿å‡¡è¾¾ï¼šç«ä¸çƒ¬ Avatar: Fire and Ashâ€ (2025) 3/5** æ²¡æœ‰ä¼ çš„é‚£ä¹ˆå·® æ•´ä½“å•†ä¸šç‰‡çš„æ°´å‡†è¿˜æ˜¯æœ‰çš„ å°±æ˜¯å®åœ¨å¤ªé•¿äº† è¿™ä¸ªé•¿åº¦åªåšå•çº¯çš„å•†ä¸šç‰‡å¯¹äºå¡æ¢…éš†æ¥è¯´å°±å¤ªå¤±èº«ä»½äº†
- **å¤œé­”ä¾ ï¼šé‡ç”Ÿ ç¬¬ä¸€å­£ Daredevil: Born Again Season 1â€ (2025)** è´¨æ„Ÿä¸Šè¿˜æ˜¯å·®Netflixçš„ä¸€ç‚¹ã€‚å¦å¤–ä¸èƒ½å› ä¸ºè¿™ä¸æ˜¯ç½šå”çš„ä¸ªäººå‰§å°±æŠŠäººå†™çš„é‚£ä¹ˆé™æ™ºï¼Œäººç½šå”çš„é£æ ¼è¿™ç¾¤anti-vigilant task forceèƒ½ç›´æ¥é‡Œå¤–é‡Œæ€ç©¿ä¸‰æ¬¡ğŸ˜‘

## Work

\#1

**CppNow 2025 | std::optional â€” Standardizing Optionals over References - A Case Study - Steve Downey** https://www.youtube.com/watch?v=cSOzD78yQV4&list=PL_AKIMJc4roW7umwjjd9Td-rtoqkiyqFl&index=53

- æ ¸å¿ƒå†…å®¹æ˜¯ std::optional<T&> æ ‡å‡†åŒ–çš„ä¸€äº›æ•…äº‹
- tips: å¼•ç”¨ç‰ˆæœ¬æ˜¯ç‰¹åŒ–ï¼Œå…§éƒ¨å­˜çš„å…¶å®è¿˜æ˜¯æŒ‡é’ˆï¼›ä½†æ˜¯æœ‰æµ·é‡çš„è¯­ä¹‰ç›¸å…³çš„ corner cases

**C++ Weekly - Ep 517 - Tool Spotlight: ClangBuildAnalyzer** https://www.youtube.com/watch?v=gEQ5_FjCihA

- clang `-ftime-trace` å¯ä»¥åˆ©ç”¨ https://github.com/aras-p/ClangBuildAnalyzer åšè¿›ä¸€æ­¥çš„èšåˆåˆ†æï¼ŒæŒ‰ç…§æ•´ä¸ª build çš„è€—æ—¶è¿›è¡Œè¾“å‡º
- å¦å¤–ä¸€ä¸ªæ˜¯ https://github.com/jlfwong/speedscope å¯ä»¥ç”¨æ¥æŸ¥çœ‹å„ç±»ç«ç„°å›¾

**C++ Weekly - Ep 200 - Christmas Class 2019 - Chapter 1 of 5 - Understanding Lambdas** https://www.youtube.com/watch?v=3hGSlUGEXtA

- Jason çš„ Christmas ç‰¹è¾‘çš„é¦–ç¯‡
- è¿™æ¬¡æ˜¯è®² mutable lambda åš Fibonacci

**C++ Weekly - Ep 199 - [[nodiscard]] Constructors And Their Uses** https://www.youtube.com/watch?v=E_ROB_xUQQQ

- C++ 20 å¼€å§‹ `[[nodiscard]]` å¯ä»¥ä¿®é¥°æ„é€ å‡½æ•°ï¼Œä½œç”¨æ˜¯ä¸ºäº†é¿å…ç»å…¸çš„ `std::lock_guard(mutex)` è¿™ç§å‹æ ¹æ²¡é”ä¸Šçš„é—®é¢˜

**C++ Weekly - Ep - 198 - Surprise Uses For `explicit` Constructors** https://www.youtube.com/watch?v=Q4SXFkTzD28

- ä»»æ„ constructor éƒ½å¯ä»¥æ ‡è®°ä¸º explicitï¼ŒåŒ…æ‹¬ default constructor
- æ ‡è®°ä¹‹å `{}` æˆ–è€… `{42, 42}` è¿™ç§æ„é€ éƒ½ä¼šå¤±è´¥ï¼Œéœ€è¦æ‰‹åŠ¨åŠ ä¸Šç±»å

**C++ Weekly - Ep 197 - 25 Years of Best Practices** https://www.youtube.com/watch?v=ayIJ4b6z-7g

- æ¢ç´¢ 25 å¹´å‰ OS/2 ä¸Š Borland C++ å¯¹äº RVO/NRVO çš„ä¼˜åŒ–
- åŸºæœ¬æ˜¯è€ƒå¤ç³»åˆ—

**Determining if a template specialization exists** https://www.lukas-barth.net/blog/checking-if-specialized/

- æ£€æŸ¥æ˜¯å¦å­˜åœ¨å‡½æ•°æ¨¡æ¿ç‰¹åŒ–ï¼šç›´æ¥åˆ©ç”¨ SFINAE + std::declval

    ```cpp
      template <class T, class Dummy = decltype(std::swap<T>(std::declval<T &>(),
                                                             std::declval<T &>()))>
    ```

    ä½†æ˜¯å¦‚æœæƒ³åš generic çš„å®ç°å°±ä¼šæ›´éº»çƒ¦ä¸€äº›

    ```cpp
    auto betterL = [](auto &lhs, auto &rhs) -> decltype(std::swap(lhs, rhs)) {
      return std::swap(lhs, rhs);
    };
    constexpr bool sometype_has_swap =
        std::is_invocable_v<decltype(betterL), SomeType &, SomeType &>;

    ```

- æ£€æŸ¥æ˜¯å¦å­˜åœ¨ç±»æ¨¡æ¿ç‰¹åŒ–ï¼šåˆå§‹æ–¹æ¡ˆä¾èµ– default ctorï¼Œä¹Ÿå³ç›´æ¥å°è¯•æ„é€ ä¸€ä¸ªå¯¹è±¡ `decltype(T{})`
    - æ”¹è¿›æ–¹æ¡ˆæ˜¯æ‹¿ææ„çš„è¿”å›å€¼ï¼Œæ ‡å‡†è§„å®šè¿™éƒ¨åˆ†æ˜¯ void

        ```cpp
          template <class... Args,
                    class dummy = decltype(std::declval<Tmpl<Args...>>().~Tmpl<Args...>())>
        ```


    è¿™ä¸ªæ–¹æ¡ˆæœ‰ä¸ªå‘æ˜¯å¦‚æœç‰¹åŒ–æ˜¯æŸä¸ª TU ä¸­é—´éƒ¨åˆ†å¼•å…¥æˆ–è¿™ä¸ªåªæœ‰æŸä¸ªTUæ‰æœ‰ï¼Œé‚£ä¹ˆä¼šå¯¼è‡´ odr-violationï¼Œæ•´ä¸ªç¨‹åºæ˜¯ ill-formed

    å¦å¤–è¿™ä¸ªæ–¹æ¡ˆåœ¨ MSVC ä¸‹æœ‰ä¸€äº›é—®é¢˜ï¼ŒMSVC å¯¹äºå…¶ä»–ç±»å‹å§‹ç»ˆä¼šå®šä¹‰ï¼Œä½†æ˜¯æ²¡æœ‰æä¾› operator()

\#2

è¿™å‘¨æŠ½äº†ç‚¹æ—¶é—´ï¼Œåšäº† fawkes å’Œ gin ä¸¤ä¸ªç»´åº¦çš„ benchmarkï¼Œç›®çš„å…¶å®å°±æ˜¯åšä¸€ä¸ªå¿ƒé‡Œæœ‰æ•°ï¼Œåé¢ä¹Ÿæœ‰ä¸€ä¸ªæ¯”è¾ƒ compelling reason è¯´ä¸åº”è¯¥èŠ±é‚£ä¹ˆå¤§ä»£ä»·ç”¨ golang é‡å†™ 2 million LoC çš„ä¸šåŠ¡ä»£ç 

æµ‹è¯•æ ¸å¿ƒæ˜¯ä¸¤ä¸ªç‚¹ï¼š

- ä¸€ä¸ªæ˜¯ç®€å•å­—ç¬¦ä¸²çš„è¿”å›ï¼Œä¸»è¦æ˜¯æƒ³å‹ä¸€ä¸‹æ¡†æ¶çš„æé™
- ä¸€ä¸ªæ˜¯éšæœºwait [10ms, 50ms]ï¼Œä¸»è¦æ˜¯æ¨¡æ‹Ÿä¸šåŠ¡åœç­‰åœ¨ç½‘ç»œè¯·æ±‚ä¸Šï¼Œè¿™ä¸ªæ˜¾ç„¶ä¸æ˜¯CPU boundï¼Œä¹Ÿç¬¦åˆå¤§éƒ¨åˆ† rest api servers çš„æƒ…å†µ

æµ‹è¯•ç¯å¢ƒæ˜¯ ubuntu 2404ï¼Œ8ä¸ªCPU core ç”¨ taskset åªç»‘å®š0-3ï¼Œwrk ç»‘å®š 4-7ï¼Œé¿å…å½±å“

```cpp
namespace asio = boost::asio;
namespace http = boost::beast::http;

DEFINE_uint32(port, 7890, "Port number to listen on");

namespace {

int tls_rnd() {
    thread_local std::mt19937 eng{std::random_device{}()};
    thread_local std::uniform_int_distribution<int> dist{10, 50}; // NOLINT(*-magic-numbers)
    return dist(eng);
}

} // namespace

int main(int argc, char* argv[]) {
    gflags::ParseCommandLineFlags(&argc, &argv, true);
    spdlog::cfg::load_env_levels();

    try {
        asio::io_context ioc{1};
        fawkes::io_thread_pool io_pool(4);

        fawkes::server server(ioc, io_pool);

        server.do_get("/status",
                      [](const fawkes::request&, fawkes::response& resp) -> asio::awaitable<void> {
                          resp.text(http::status::ok, std::string{"hello world"});
                          co_return;
                      });

        server.do_get("/delayed",
                      [](const fawkes::request&, fawkes::response& resp) -> asio::awaitable<void> {
                          asio::steady_timer timer(co_await asio::this_coro::executor);
                          timer.expires_after(std::chrono::milliseconds(tls_rnd()));
                          co_await timer.async_wait();
                          resp.text(http::status::ok, std::string{"hello world"});
                          co_return;
                      });

        server.listen_and_serve("0.0.0.0", static_cast<std::uint16_t>(FLAGS_port));
        SPDLOG_INFO("Server is listening at {}", FLAGS_port);

        ioc.run();
    } catch (const std::exception& ex) {
        SPDLOG_ERROR("Unexpected error: {}", ex.what());
    }

    return 0;
}
```

å¯¹åº”çš„ gin

```golang
package main

import (
        "io"
        "net/http"
        "runtime"
        "time"

        "github.com/gin-gonic/gin"
		"github.com/valyala/fastrand"
)

func main() {
        runtime.GOMAXPROCS(4)
        r := gin.New()

        r.GET("/status", func(c *gin.Context) {
                c.String(http.StatusOK, "hello world")
        })

        r.GET("/delayed", func(c *gin.Context) {
                delay := time.Duration(fastrand.Uint32n(41)+10) * time.Millisecond
                time.Sleep(delay)
                c.String(http.StatusOK, "hello world")
        })

        r.Run(":9876")
}
```

ç”¨ fastrand åŒ…æ˜¯å› ä¸ºæ ‡å‡†åº“çš„ math.rand å­˜åœ¨å…¨å±€é”ç«äº‰ï¼Œä¸è¿‡å®æµ‹ä¸‹æ¥è¿™ä¸ªå·®åˆ«å¯¹ RPS å»¶è¿Ÿ åå å•¥çš„å‡ ä¹æ²¡æœ‰è‚‰çœ¼å¯è§åŒºåˆ«

`/status` çš„ bench ç»“æœå¤§æ¦‚è¿™æ ·

```
#
# fawkes(cpp)
#

$ taskset -c 4-7 wrk -t 4 -c 100 -d 30s http://127.0.0.1:7890/status
Running 30s test @ http://127.0.0.1:7890/status
  4 threads and 100 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   118.49us   88.97us   8.52ms   90.55%
    Req/Sec   195.58k     8.21k  211.33k    80.77%
  23366131 requests in 30.10s, 2.20GB read
Requests/sec: 776297.81
Transfer/sec:     74.77MB

---

$ taskset -c 4-7 wrk -t 4 -c 200 -d 30s http://127.0.0.1:7890/status
Running 30s test @ http://127.0.0.1:7890/status
  4 threads and 200 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   235.08us  121.81us   5.72ms   91.36%
    Req/Sec   202.29k     5.53k  230.88k    77.08%
  24152657 requests in 30.02s, 2.27GB read
Requests/sec: 804512.83
Transfer/sec:     77.49MB

---

$ taskset -c 4-7 wrk -t 4 -c 400 -d 30s http://127.0.0.1:7890/status
Running 30s test @ http://127.0.0.1:7890/status
  4 threads and 400 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   488.18us  153.83us  11.47ms   87.24%
    Req/Sec   197.11k     4.52k  223.46k    79.33%
  23538202 requests in 30.04s, 2.21GB read
Requests/sec: 783437.58
Transfer/sec:     75.46MB

---

$ taskset -c 4-7 wrk -t 4 -c 600 -d 30s http://127.0.0.1:7890/status
Running 30s test @ http://127.0.0.1:7890/status
  4 threads and 600 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   769.46us  201.83us  17.32ms   89.10%
    Req/Sec   189.78k    18.84k  510.99k    98.83%
  22509621 requests in 29.85s, 2.12GB read
Requests/sec: 753979.66
Transfer/sec:     72.62MB

---

$ taskset -c 4-7 wrk -t 4 -c 800 -d 30s http://127.0.0.1:7890/status
Running 30s test @ http://127.0.0.1:7890/status
  4 threads and 800 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     1.04ms  250.08us  18.75ms   91.22%
    Req/Sec   186.44k     3.85k  205.60k    76.92%
  22260003 requests in 30.05s, 2.09GB read
Requests/sec: 740848.80
Transfer/sec:     71.36MB

#
# gin(golang)
#

$ taskset -c 4-7 wrk -t 4 -c 200 -d 30s http://127.0.0.1:9876/status
Running 30s test @ http://127.0.0.1:9876/status
  4 threads and 200 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     1.00ms    1.15ms  16.07ms   85.53%
    Req/Sec    72.32k     4.67k   86.64k    68.75%
  8634517 requests in 30.03s, 1.03GB read
Requests/sec: 287563.51
Transfer/sec:     35.10MB

---

$ taskset -c 4-7 wrk -t 4 -c 400 -d 30s http://127.0.0.1:9876/status
Running 30s test @ http://127.0.0.1:9876/status
  4 threads and 400 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     1.45ms    1.49ms  17.41ms   85.75%
    Req/Sec    89.29k     5.88k  109.06k    68.83%
  10660721 requests in 30.04s, 1.27GB read
Requests/sec: 354847.17
Transfer/sec:     43.32MB

---

$ taskset -c 4-7 wrk -t 4 -c 600 -d 30s http://127.0.0.1:9876/status
Running 30s test @ http://127.0.0.1:9876/status
  4 threads and 600 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     1.88ms    1.67ms  24.00ms   82.51%
    Req/Sec    94.39k     5.66k  110.18k    69.58%
  11269424 requests in 30.06s, 1.34GB read
Requests/sec: 374877.28
Transfer/sec:     45.76MB

---

$ taskset -c 4-7 wrk -t 4 -c 800 -d 30s http://127.0.0.1:9876/status
Running 30s test @ http://127.0.0.1:9876/status
  4 threads and 800 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     2.50ms    2.00ms  26.56ms   81.53%
    Req/Sec    91.06k     5.54k  105.63k    69.42%
  10874122 requests in 30.06s, 1.30GB read
Requests/sec: 361805.33
Transfer/sec:     44.17MB
```

åŒç­‰å‹åŠ›ä¸‹ fawkes çš„ rps å’ŒåååŸºæœ¬æ˜¯ gin çš„ä¸¤å€ï¼Œè€Œä¸”å»¶è¿Ÿæ¯”è¾ƒç¨³å®š

`/delayed` çš„ bench å¤§æ¦‚è¿™æ ·

```
#
# fawkes(cpp)
#

$ taskset -c 4-7 wrk -t 4 -c 4000 -d 30s http://127.0.0.1:7890/delayed
Running 30s test @ http://127.0.0.1:7890/delayed
  4 threads and 4000 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    30.47ms   11.83ms  57.44ms   56.88%
    Req/Sec    32.95k   435.03    33.90k    82.17%
  3933987 requests in 30.08s, 378.93MB read
Requests/sec: 130799.34
Transfer/sec:     12.60MB

$ taskset -c 4-7 wrk -t 4 -c 10000 -d 30s http://127.0.0.1:7890/delayed
Running 30s test @ http://127.0.0.1:7890/delayed
  4 threads and 10000 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    38.32ms   12.39ms 255.57ms   60.27%
    Req/Sec    64.70k     3.68k   69.53k    94.23%
  7698731 requests in 30.01s, 741.55MB read
Requests/sec: 256528.10
Transfer/sec:     24.71MB

$ taskset -c 4-7 wrk -t 4 -c 15000 -d 30s http://127.0.0.1:7890/delayed
Running 30s test @ http://127.0.0.1:7890/delayed
  4 threads and 15000 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    70.70ms   15.38ms 119.88ms   68.80%
    Req/Sec    52.31k     2.21k   84.44k    88.36%
  6216137 requests in 30.10s, 598.75MB read
Requests/sec: 206526.70
Transfer/sec:     19.89MB

$ taskset -c 4-7 wrk -t 4 -c 20000 -d 30s http://127.0.0.1:7890/delayed
Running 30s test @ http://127.0.0.1:7890/delayed
  4 threads and 20000 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   100.47ms   19.71ms 167.23ms   68.67%
    Req/Sec    49.89k     4.17k   83.19k    95.11%
  5788293 requests in 30.09s, 557.53MB read
Requests/sec: 192347.32
Transfer/sec:     18.53MB

#
# gin(golang)
#

$ taskset -c 4-7 wrk -t 4 -c 2000 -d 30s http://127.0.0.1:9876/delayed
Running 30s test @ http://127.0.0.1:9876/delayed
  4 threads and 2000 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    30.34ms   11.85ms  62.91ms   57.53%
    Req/Sec    16.55k   296.03    17.29k    83.08%
  1975861 requests in 30.07s, 241.19MB read
Requests/sec:  65709.10
Transfer/sec:      8.02MB

$ taskset -c 4-7 wrk -t 4 -c 4000 -d 30s http://127.0.0.1:9876/delayed
Running 30s test @ http://127.0.0.1:9876/delayed
  4 threads and 4000 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    32.01ms   12.43ms 108.75ms   60.21%
    Req/Sec    31.39k     1.25k   33.94k    64.33%
  3747334 requests in 30.07s, 457.44MB read
Requests/sec: 124615.33
Transfer/sec:     15.21MB

$ taskset -c 4-7 wrk -t 4 -c 10000 -d 30s http://127.0.0.1:9876/delayed
Running 30s test @ http://127.0.0.1:9876/delayed
  4 threads and 10000 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    66.93ms   36.72ms 309.80ms   60.65%
    Req/Sec    37.42k     3.87k   45.22k    73.83%
  4454003 requests in 30.04s, 543.70MB read
Requests/sec: 148282.24
Transfer/sec:     18.10MB

$ taskset -c 4-7 wrk -t 4 -c 15000 -d 30s http://127.0.0.1:9876/delayed
Running 30s test @ http://127.0.0.1:9876/delayed
  4 threads and 15000 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   100.38ms   65.44ms 261.84ms   53.35%
    Req/Sec    37.58k     4.30k   89.10k    80.80%
  4459974 requests in 30.09s, 544.43MB read
Requests/sec: 148214.09
Transfer/sec:     18.09MB

$ taskset -c 4-7 wrk -t 4 -c 20000 -d 30s http://127.0.0.1:9876/delayed
Running 30s test @ http://127.0.0.1:9876/delayed
  4 threads and 20000 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   128.96ms   91.54ms 358.05ms   49.71%
    Req/Sec    38.63k     4.47k   46.42k    82.36%
  4489456 requests in 30.08s, 548.03MB read
Requests/sec: 149267.64
Transfer/sec:     18.22MB
```

ä½è´Ÿè½½ï¼ˆå‹åŠ›æ²¡æ‰“æ»¡ï¼‰çš„æƒ…å†µä¸‹ï¼Œfawkes åªæ¯” gin å¥½ä¸€ç‚¹ç‚¹ï¼›ä½†æ˜¯å‹åŠ›ä¸Šæ¥ä¹‹å fawkes æ¯” gin rps è¦å¥½ 50% ~ 100%ï¼Œå¹¶ä¸”å»¶è¿Ÿåªæœ‰åè€…çš„ 50% ~ 70%

åŸºäºè¿™ä¸ªç»“æœï¼Œfawkes åªè¦åç»­æ²¡æœ‰å¤ªå‘çš„å®ç°ï¼Œæ€§èƒ½ä¸‹é™æ˜¯ç»å¯¹æœ‰ä¿è¯çš„ã€‚å› ä¸ºæˆ‘ä»¬çš„ç›®æ ‡å‹æ ¹å°±ä¸æ˜¯åšä»€ä¹ˆæ€§èƒ½æœ€å¥½çš„ rest serverï¼Œè€Œæ˜¯ä¸šåŠ¡å¼€å‘è¶³å¤Ÿå‹å¥½ï¼Œæ€§èƒ½ä¸Šä¸æ‹–åè…¿ï¼Œèƒ½é¡ºåˆ©æ›¿æ¢æ‰ä¹‹å‰åŸºäº httpd çš„é‚£æ‰˜å®ç°ã€‚

\#3

fawkes åšäº† expected 100-continue çš„æ”¯æŒï¼Œé¡ºå¸¦æ˜¾å¼å¤„ç†äº†ä¸€ä¸‹å¯¹ç«¯ connection reset çš„é”™è¯¯ï¼Œå³ä¸è®¤ä¸ºæ˜¯ unhandled/unexpected

wrk æµ‹è¯•ç»“æŸåä¼šåˆ©ç”¨ RST æ¥é¿å…è¿›å…¥ TIME_WAIT

PR è§ï¼šhttps://github.com/kingsamchen/fawkes/pull/22

---

å¥½äº†è¿™å‘¨å°±è¿™æ ·ï¼Œä¸‹å‘¨è§
