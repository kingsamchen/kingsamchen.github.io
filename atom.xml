<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>KC的废墟堆</title>
  
  <subtitle>Will you serve in Heaven, or rule in Hell</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://kingsamchen.github.io/"/>
  <updated>2019-01-01T08:05:24.007Z</updated>
  <id>http://kingsamchen.github.io/</id>
  
  <author>
    <name>Kingsley Chen</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Monthly Read Posts in Dec 2018</title>
    <link href="http://kingsamchen.github.io/2019/01/01/monthly-read-posts-in-dec-2018/"/>
    <id>http://kingsamchen.github.io/2019/01/01/monthly-read-posts-in-dec-2018/</id>
    <published>2019-01-01T07:36:47.000Z</published>
    <updated>2019-01-01T08:05:24.007Z</updated>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Programming-Languages&quot;&gt;&lt;a href=&quot;#Programming-Languages&quot; class=&quot;headerlink&quot; title=&quot;Programming Languages&quot;&gt;&lt;/a&gt;Programming Languages&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://medium.com/golangspec/init-functions-in-go-eac191b3860a&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;init functions in Go&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这篇 post 总结起来就是深入浅出。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;a href=&quot;https://www.fluentcpp.com/2017/01/05/the-importance-of-knowing-stl-algorithms/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;The importance of knowing STL algorithms&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;能熟练运用 STL algorithms 是一个 experienced c++ programmer 的基本要求。&lt;/p&gt;
&lt;p&gt;另外里面提到了使用 algorithms 的两个 pitfalls，其中一个是滥用 &lt;code&gt;for_each()&lt;/code&gt;，这个确实有点意思。&lt;br&gt;
    
    </summary>
    
      <category term="PROGRAMMING" scheme="http://kingsamchen.github.io/categories/PROGRAMMING/"/>
    
    
      <category term="golang" scheme="http://kingsamchen.github.io/tags/golang/"/>
    
      <category term="algorithms" scheme="http://kingsamchen.github.io/tags/algorithms/"/>
    
      <category term="redis" scheme="http://kingsamchen.github.io/tags/redis/"/>
    
      <category term="code quality" scheme="http://kingsamchen.github.io/tags/code-quality/"/>
    
  </entry>
  
  <entry>
    <title>虚拟机 Linux Mint 磁盘扩容</title>
    <link href="http://kingsamchen.github.io/2018/12/16/expand-linux-vm-disk-size/"/>
    <id>http://kingsamchen.github.io/2018/12/16/expand-linux-vm-disk-size/</id>
    <published>2018-12-16T09:39:19.000Z</published>
    <updated>2018-12-16T10:04:31.894Z</updated>
    
    <summary type="html">
    
      
      
        
        
          &lt;p&gt;之前在虚拟机里创建 mint 时磁盘就给了 20G 的 SSD，最近发现可用容量捉襟见肘，必须要扩容一波。&lt;/p&gt;
&lt;p&gt;摸索了一下发现给虚拟机里的 linux 磁盘扩容并不是那么简单直白，至少有几个坑，所以稍微做了一些记录，以备日后不时之需。&lt;/p&gt;
&lt;h3
        
      
    
    </summary>
    
      <category term="CODE-LIFE" scheme="http://kingsamchen.github.io/categories/CODE-LIFE/"/>
    
    
      <category term="linux" scheme="http://kingsamchen.github.io/tags/linux/"/>
    
      <category term="mint" scheme="http://kingsamchen.github.io/tags/mint/"/>
    
      <category term="磁盘" scheme="http://kingsamchen.github.io/tags/%E7%A3%81%E7%9B%98/"/>
    
      <category term="扩容" scheme="http://kingsamchen.github.io/tags/%E6%89%A9%E5%AE%B9/"/>
    
  </entry>
  
  <entry>
    <title>放弃给 ezio 加 SIGINT Handler</title>
    <link href="http://kingsamchen.github.io/2018/12/09/give-up-adding-sigint-handler-for-ezio/"/>
    <id>http://kingsamchen.github.io/2018/12/09/give-up-adding-sigint-handler-for-ezio/</id>
    <published>2018-12-08T16:18:14.000Z</published>
    <updated>2018-12-08T16:34:40.264Z</updated>
    
    <summary type="html">
    
      
      
        
        
          &lt;p&gt;原本的计划是今天给 &lt;a href=&quot;https://github.com/kingsamchen/ezio&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ezio&lt;/a&gt; 加上 SIGINT 的处理：自动退出运行的
        
      
    
    </summary>
    
      <category term="CODE-LIFE" scheme="http://kingsamchen.github.io/categories/CODE-LIFE/"/>
    
    
      <category term="Windows" scheme="http://kingsamchen.github.io/tags/Windows/"/>
    
      <category term="ezio" scheme="http://kingsamchen.github.io/tags/ezio/"/>
    
      <category term="sigint" scheme="http://kingsamchen.github.io/tags/sigint/"/>
    
      <category term="signal" scheme="http://kingsamchen.github.io/tags/signal/"/>
    
      <category term="Linux" scheme="http://kingsamchen.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Build Your Own HandlerThread Part Finale</title>
    <link href="http://kingsamchen.github.io/2018/12/07/build-your-own-handlerthread-part-finale/"/>
    <id>http://kingsamchen.github.io/2018/12/07/build-your-own-handlerthread-part-finale/</id>
    <published>2018-12-06T17:00:48.000Z</published>
    <updated>2018-12-08T14:02:42.471Z</updated>
    
    <summary type="html">
    
      
      
        
        
          &lt;p&gt;至此，我们整个系列宣告完结。&lt;/p&gt;
&lt;p&gt;现在回过头往前看，是不是觉得其实这些底层的东西也没这么难？有时候只是需要一些基础和解决问题的方法罢了。&lt;/p&gt;
&lt;p&gt;Rant：做业务才真的难呢，框架和流程都给你定死了，一坨又一坨用了几年的不明觉厉的封装，如果内部文档哪个不详，又
        
      
    
    </summary>
    
      <category term="PROGRAMMING" scheme="http://kingsamchen.github.io/categories/PROGRAMMING/"/>
    
    
      <category term="Android" scheme="http://kingsamchen.github.io/tags/Android/"/>
    
      <category term="HandlerThread" scheme="http://kingsamchen.github.io/tags/HandlerThread/"/>
    
      <category term="Looper" scheme="http://kingsamchen.github.io/tags/Looper/"/>
    
      <category term="Handler" scheme="http://kingsamchen.github.io/tags/Handler/"/>
    
      <category term="MessageLoop" scheme="http://kingsamchen.github.io/tags/MessageLoop/"/>
    
  </entry>
  
  <entry>
    <title>Build Your Own HandlerThread Part 4</title>
    <link href="http://kingsamchen.github.io/2018/12/07/build-your-own-handlerthread-part-4/"/>
    <id>http://kingsamchen.github.io/2018/12/07/build-your-own-handlerthread-part-4/</id>
    <published>2018-12-06T16:50:37.000Z</published>
    <updated>2018-12-08T14:02:42.470Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;有了前面的铺垫我们终于可以开始实现我们的主角 ActiveThread 了，虽然它登场的有点晚。&lt;/p&gt;
&lt;p&gt;这个系列的开头我们提到 &lt;code&gt;ActiveThread&lt;/code&gt; 有两个鲜明的特点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;它是线程，可以运行，代表一个单独的执行上下文（execution unit/context）&lt;/li&gt;
&lt;li&gt;每个 &lt;code&gt;ActiveThread&lt;/code&gt; 内部运行一个 message-loop，方便持续的执行我们提交的任务&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这两点和 Android 原生提供的 &lt;code&gt;HandlerThread&lt;/code&gt; 是一模一样的。&lt;/p&gt;
&lt;p&gt;不过和 &lt;code&gt;HandlerThread&lt;/code&gt; 不同，我们这里不打算采用继承 &lt;code&gt;Thread&lt;/code&gt; 的方式，而是采用 composition。原因之一是我个人非常反感传统的 OO 继承手法；并且 Java 8 开始正式支持 lambda 之后，不用继承我们的工作也可以做得很好。&lt;/p&gt;
&lt;p&gt;不适用继承同时有个好处，我们可以只暴露我们需要的接口，避免误用（比如经典的用 &lt;code&gt;run()&lt;/code&gt; 而不是 &lt;code&gt;start()&lt;/code&gt;）&lt;br&gt;
    
    </summary>
    
      <category term="PROGRAMMING" scheme="http://kingsamchen.github.io/categories/PROGRAMMING/"/>
    
    
      <category term="Android" scheme="http://kingsamchen.github.io/tags/Android/"/>
    
      <category term="HandlerThread" scheme="http://kingsamchen.github.io/tags/HandlerThread/"/>
    
      <category term="Looper" scheme="http://kingsamchen.github.io/tags/Looper/"/>
    
      <category term="Handler" scheme="http://kingsamchen.github.io/tags/Handler/"/>
    
      <category term="MessageLoop" scheme="http://kingsamchen.github.io/tags/MessageLoop/"/>
    
  </entry>
  
  <entry>
    <title>Build Your Own HandlerThread Part 3</title>
    <link href="http://kingsamchen.github.io/2018/12/06/build-your-own-handlerthread-part-3/"/>
    <id>http://kingsamchen.github.io/2018/12/06/build-your-own-handlerthread-part-3/</id>
    <published>2018-12-06T14:34:48.000Z</published>
    <updated>2018-12-08T14:02:42.470Z</updated>
    
    <summary type="html">
    
      
      
        
        
          &lt;p&gt;前面我们实现了 &lt;code&gt;MessageLoop&lt;/code&gt;，现在该轮到 &lt;code&gt;TaskRunner&lt;/code&gt; 了。&lt;/p&gt;
&lt;p&gt;在我们的设计中，&lt;code&gt;TaskRunner&lt;/code&gt; 的定位是类似
        
      
    
    </summary>
    
      <category term="PROGRAMMING" scheme="http://kingsamchen.github.io/categories/PROGRAMMING/"/>
    
    
      <category term="Android" scheme="http://kingsamchen.github.io/tags/Android/"/>
    
      <category term="HandlerThread" scheme="http://kingsamchen.github.io/tags/HandlerThread/"/>
    
      <category term="Looper" scheme="http://kingsamchen.github.io/tags/Looper/"/>
    
      <category term="Handler" scheme="http://kingsamchen.github.io/tags/Handler/"/>
    
      <category term="MessageLoop" scheme="http://kingsamchen.github.io/tags/MessageLoop/"/>
    
  </entry>
  
  <entry>
    <title>Build Your Own HandlerThread Part 2</title>
    <link href="http://kingsamchen.github.io/2018/12/05/build-your-own-handlerthread-part-2/"/>
    <id>http://kingsamchen.github.io/2018/12/05/build-your-own-handlerthread-part-2/</id>
    <published>2018-12-05T15:49:29.000Z</published>
    <updated>2018-12-08T14:02:42.470Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;有了 &lt;code&gt;MessagePumpDefault&lt;/code&gt;  之后，我们就可以开始着手实现最核心的 &lt;code&gt;MessageLoop&lt;/code&gt; 了。&lt;/p&gt;
&lt;p&gt;不过在此之前，我们还首先需要实现一个辅助设施：&lt;code&gt;PendingTask&lt;/code&gt;。&lt;/p&gt;
&lt;h3 id=&quot;PendingTask&quot;&gt;&lt;a href=&quot;#PendingTask&quot; class=&quot;headerlink&quot; title=&quot;PendingTask&quot;&gt;&lt;/a&gt;PendingTask&lt;/h3&gt;&lt;p&gt;一个 &lt;code&gt;PendingTask&lt;/code&gt; instance 表示一个等待被执行的 task，并且这个 task 可能是一个 delayed task。&lt;/p&gt;
&lt;p&gt;因此 &lt;code&gt;PendingTask&lt;/code&gt; 需要能够表示时序上的顺序，这个可以利用 &lt;code&gt;Instant&lt;/code&gt; 类型的一个时间戳，结合一个 &lt;code&gt;long&lt;/code&gt; 类型的 sequence-number。因为有可能两个 delayed tasks 的时间戳相同，此时就必须要用 seq-num  来区分先后顺序。&lt;/p&gt;
&lt;p&gt;另外，&lt;code&gt;PendingTask&lt;/code&gt; 为了能够表示 task 语义，他必须可以被执行。这可以通过内部存储一个 &lt;code&gt;Runnable&lt;/code&gt; 或者 &lt;code&gt;Callable&lt;/code&gt; 成员做到。&lt;/p&gt;
&lt;p&gt;我们的实现选择 &lt;code&gt;Runnable&lt;/code&gt;，因为&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;我们当前的实现不考虑返回值，因为实现返回值和我们的主题没有直接关系。&lt;br&gt;CSP 的并发模型上如果要考虑使用某个任务的返回值，一般会使用类似于 &lt;code&gt;PostTaskAndReplyWithResult()&lt;/code&gt; 来组合两个函数；或者更一般的，使用 continuation 来 lifting restrictions&lt;/li&gt;
&lt;li&gt;懒得处理异常&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;PendingTask&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; AtomicLong s_seqNumGenerator = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; AtomicLong(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;long&lt;/span&gt; _seqNum;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; Instant _endTime;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; Runnable _task;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    PendingTask(Runnable task, Instant endTime) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _seqNum = s_seqNumGenerator.getAndIncrement();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _endTime = endTime;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _task = task;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _task.run();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;Instant &lt;span class=&quot;title&quot;&gt;endTime&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; _endTime;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;seqNum&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; _seqNum;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;我们使用了 &lt;code&gt;AtomicLong&lt;/code&gt; 来存储当前的 sequence-number，因为我们不知道某个 &lt;code&gt;PendingTask&lt;/code&gt; 会在哪个线程上被创建。&lt;br&gt;
    
    </summary>
    
      <category term="PROGRAMMING" scheme="http://kingsamchen.github.io/categories/PROGRAMMING/"/>
    
    
      <category term="Android" scheme="http://kingsamchen.github.io/tags/Android/"/>
    
      <category term="HandlerThread" scheme="http://kingsamchen.github.io/tags/HandlerThread/"/>
    
      <category term="Looper" scheme="http://kingsamchen.github.io/tags/Looper/"/>
    
      <category term="Handler" scheme="http://kingsamchen.github.io/tags/Handler/"/>
    
      <category term="MessageLoop" scheme="http://kingsamchen.github.io/tags/MessageLoop/"/>
    
  </entry>
  
  <entry>
    <title>Build Your Own HandlerThread Part 1</title>
    <link href="http://kingsamchen.github.io/2018/12/04/build-your-own-handlerthread-part-1/"/>
    <id>http://kingsamchen.github.io/2018/12/04/build-your-own-handlerthread-part-1/</id>
    <published>2018-12-04T01:51:41.000Z</published>
    <updated>2018-12-08T14:02:42.469Z</updated>
    
    <summary type="html">
    
      &lt;h3 id=&quot;MessagePump&quot;&gt;&lt;a href=&quot;#MessagePump&quot; class=&quot;headerlink&quot; title=&quot;MessagePump&quot;&gt;&lt;/a&gt;MessagePump&lt;/h3&gt;&lt;p&gt;对于我们的 ActiveThread 来说，核心仍然是持续不断运行的 message-loop；但是在实现 message-loop 前，我们需要首先来实现它的“引擎”：&lt;code&gt;MessagePump&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;大体上，message-loop 要维持运转，就要能够源源不断地从某个地方获取消息/事件，而获取消息/事件的这个行为，就是由 message-pump 来完成，正如他的名字一样。&lt;/p&gt;
&lt;p&gt;这里可能会产生一个疑问，为什么要单独抽出一个 message-pump，而不是直接把这部分实现做到 message-loop 里呢？&lt;/p&gt;
&lt;p&gt;原因是：一个复杂的系统可能会有多个消息/事件来源，每个来源会有专门的获取、分发的方式。&lt;/p&gt;
&lt;p&gt;例如：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;界面消息可能是从系统的 GUI 消息系统中获得。一个典型的例子是 Win32 GUI 程序所使用的 &lt;code&gt;GetMessage()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;网络活动事件通常从 native 系统提供的 I/O multiplexor 中获得。例子包括 POSIX 标准的 &lt;code&gt;select(2)&lt;/code&gt;, &lt;code&gt;poll(2)&lt;/code&gt;；Linux 独有的 &lt;code&gt;epoll&lt;/code&gt;；以及 Windows 提供的真-异步I/O机制 IO Completion Port。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;注：GUI 系统中多使用 messages（消息）作为术语；而网络 I/O 等倾向于使用 events（事件）作为使用术语。因为此系列文章不涉及网络 I/O，因此以后均采用&lt;em&gt;消息&lt;/em&gt;作为我们的使用术语。&lt;/p&gt;
&lt;p&gt;注1：对于 Android 系统，他的 GUI 事件实质上是通过 &lt;code&gt;epoll&lt;/code&gt; 监听关联到 device 抽象的 pipe fd 来完成的；Linux 的各类 X-Window 实现大多也是类似做法。&lt;/p&gt;
&lt;p&gt;所以为了解耦具体的消息来源，同时让我们的实现看上去更加有逼格，我们采取分离实现 message-pump 和 message-loop。&lt;/p&gt;
&lt;p&gt;前面说到可能有多种 pump，所以这里我们的 &lt;code&gt;MessagePump&lt;/code&gt; 应该是一个 interface，规定了一个 message-pump 应该具有哪些基本的行为：&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; java.time.Instant;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;MessagePump&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Delegate&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;doWork&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;doDelayedWork&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;function&quot;&gt;Instant &lt;span class=&quot;title&quot;&gt;nextDelayedWorkExpiration&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Delegate delegate)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Quit the pump.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// This method can only be called on the thread that called run().&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;quit&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Thread-safe&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;wakeup&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;同时我们定义了一个 &lt;code&gt;Delegate&lt;/code&gt; interface，message-loop 需要实现这个 interface，以便让 message-pump 可以通过这个 interface 来按照自己的实现来操作 message-loop。&lt;/p&gt;
&lt;h3 id=&quot;什么都不做的-MessagePumpDefault&quot;&gt;&lt;a href=&quot;#什么都不做的-MessagePumpDefault&quot; class=&quot;headerlink&quot; title=&quot;什么都不做的 MessagePumpDefault&quot;&gt;&lt;/a&gt;什么都不做的 MessagePumpDefault&lt;/h3&gt;&lt;p&gt;我们的 ActiveThread 运行的纯 Java 环境，不需要像 Android 那样能够获取设备输入消息（Frankly，你想做还做不了呢，我哪来的设备信息获取啊），有点类似 worker HandlerThread.&lt;br&gt;
    
    </summary>
    
      <category term="PROGRAMMING" scheme="http://kingsamchen.github.io/categories/PROGRAMMING/"/>
    
    
      <category term="Android" scheme="http://kingsamchen.github.io/tags/Android/"/>
    
      <category term="HandlerThread" scheme="http://kingsamchen.github.io/tags/HandlerThread/"/>
    
      <category term="Looper" scheme="http://kingsamchen.github.io/tags/Looper/"/>
    
      <category term="Handler" scheme="http://kingsamchen.github.io/tags/Handler/"/>
    
      <category term="MessageLoop" scheme="http://kingsamchen.github.io/tags/MessageLoop/"/>
    
  </entry>
  
  <entry>
    <title>Build Your Own HandlerThread Part 0</title>
    <link href="http://kingsamchen.github.io/2018/12/03/build-your-own-handlerthread-part-0/"/>
    <id>http://kingsamchen.github.io/2018/12/03/build-your-own-handlerthread-part-0/</id>
    <published>2018-12-03T15:50:08.000Z</published>
    <updated>2018-12-08T14:02:42.468Z</updated>
    
    <summary type="html">
    
      
      
        
        
          &lt;h3 id=&quot;立一个-Flag&quot;&gt;&lt;a href=&quot;#立一个-Flag&quot; class=&quot;headerlink&quot; title=&quot;立一个 Flag&quot;&gt;&lt;/a&gt;立一个 Flag&lt;/h3&gt;&lt;p&gt;&lt;code&gt;HandlerThread&lt;/code&gt; 是 Android runtime
        
      
    
    </summary>
    
      <category term="PROGRAMMING" scheme="http://kingsamchen.github.io/categories/PROGRAMMING/"/>
    
    
      <category term="Android" scheme="http://kingsamchen.github.io/tags/Android/"/>
    
      <category term="HandlerThread" scheme="http://kingsamchen.github.io/tags/HandlerThread/"/>
    
      <category term="Looper" scheme="http://kingsamchen.github.io/tags/Looper/"/>
    
      <category term="Handler" scheme="http://kingsamchen.github.io/tags/Handler/"/>
    
      <category term="MessageLoop" scheme="http://kingsamchen.github.io/tags/MessageLoop/"/>
    
  </entry>
  
  <entry>
    <title>Monthly Read Posts in Nov 2018</title>
    <link href="http://kingsamchen.github.io/2018/12/01/monthly-read-posts-in-nov-2018/"/>
    <id>http://kingsamchen.github.io/2018/12/01/monthly-read-posts-in-nov-2018/</id>
    <published>2018-12-01T07:55:31.000Z</published>
    <updated>2018-12-01T07:57:20.976Z</updated>
    
    <summary type="html">
    
      
      
        
        
          &lt;h2 id=&quot;Algorithms&quot;&gt;&lt;a href=&quot;#Algorithms&quot; class=&quot;headerlink&quot; title=&quot;Algorithms&quot;&gt;&lt;/a&gt;Algorithms&lt;/h2&gt;&lt;p&gt;&lt;a
        
      
    
    </summary>
    
      <category term="PROGRAMMING" scheme="http://kingsamchen.github.io/categories/PROGRAMMING/"/>
    
    
      <category term="golang" scheme="http://kingsamchen.github.io/tags/golang/"/>
    
      <category term="shuffling" scheme="http://kingsamchen.github.io/tags/shuffling/"/>
    
      <category term="concurrent programming" scheme="http://kingsamchen.github.io/tags/concurrent-programming/"/>
    
      <category term="noexcept" scheme="http://kingsamchen.github.io/tags/noexcept/"/>
    
      <category term="cache server" scheme="http://kingsamchen.github.io/tags/cache-server/"/>
    
      <category term="api design" scheme="http://kingsamchen.github.io/tags/api-design/"/>
    
      <category term="pthread" scheme="http://kingsamchen.github.io/tags/pthread/"/>
    
      <category term="philosophy" scheme="http://kingsamchen.github.io/tags/philosophy/"/>
    
  </entry>
  
  <entry>
    <title>Chromium Base MessageLoop Internals (1)</title>
    <link href="http://kingsamchen.github.io/2018/11/25/chromium-base-message-loop-internals-1/"/>
    <id>http://kingsamchen.github.io/2018/11/25/chromium-base-message-loop-internals-1/</id>
    <published>2018-11-25T14:47:07.000Z</published>
    <updated>2018-11-25T14:50:56.087Z</updated>
    
    <summary type="html">
    
      &lt;h2 id=&quot;class-MessageLoop&quot;&gt;&lt;a href=&quot;#class-MessageLoop&quot; class=&quot;headerlink&quot; title=&quot;class MessageLoop&quot;&gt;&lt;/a&gt;class MessageLoop&lt;/h2&gt;&lt;p&gt;Version: r70_3538&lt;br&gt;File: &lt;code&gt;base/message_loop/message_loop.{h, cc}&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;A &lt;code&gt;MessageLoop&lt;/code&gt; is used to process events for a particular thread, i.e. the core infrastructure for implementing Communicating Sequential Process (CSP) model.&lt;/p&gt;
&lt;p&gt;There is at most one MessageLoop instance on a thread.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;MessageLoop&lt;/code&gt; is a farily complex class, it driveds from multiple base classes:&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;BASE_EXPORT&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;MessageLoop&lt;/span&gt; :&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; MessagePump::Delegate,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; RunLoop::Delegate,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; MessageLoopCurrent &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// omitted...&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;MessageLoop-Type&quot;&gt;&lt;a href=&quot;#MessageLoop-Type&quot; class=&quot;headerlink&quot; title=&quot;MessageLoop Type&quot;&gt;&lt;/a&gt;MessageLoop Type&lt;/h3&gt;&lt;p&gt;A MessageLoop has a particular type, differred by the set of asynchronous events it is capable of handling.&lt;br&gt;
    
    </summary>
    
      <category term="PROGRAMMING" scheme="http://kingsamchen.github.io/categories/PROGRAMMING/"/>
    
    
      <category term="chromium" scheme="http://kingsamchen.github.io/tags/chromium/"/>
    
      <category term="source internals" scheme="http://kingsamchen.github.io/tags/source-internals/"/>
    
      <category term="message-loop" scheme="http://kingsamchen.github.io/tags/message-loop/"/>
    
  </entry>
  
  <entry>
    <title>在 cmder 里以 mintty 为终端的方式运行 bash 和 wsl</title>
    <link href="http://kingsamchen.github.io/2018/11/24/running-bash-and-wsl-under-mintty-in-cmder/"/>
    <id>http://kingsamchen.github.io/2018/11/24/running-bash-and-wsl-under-mintty-in-cmder/</id>
    <published>2018-11-24T15:26:04.000Z</published>
    <updated>2018-11-24T15:36:58.841Z</updated>
    
    <summary type="html">
    
      
      
        
        
          &lt;p&gt;在 cmder 里如果不指定运行的 terminal 则会默认使用 windows cmd，而这在使用 git-bash 或者 wsl 时会经常遇到问题：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;性能底下导致交互出现显著延迟（这个发生在使用 tig 等重型 bash 命令或者使用
        
      
    
    </summary>
    
      <category term="CODE-LIFE" scheme="http://kingsamchen.github.io/categories/CODE-LIFE/"/>
    
    
      <category term="wsl" scheme="http://kingsamchen.github.io/tags/wsl/"/>
    
      <category term="cmder" scheme="http://kingsamchen.github.io/tags/cmder/"/>
    
      <category term="mintty" scheme="http://kingsamchen.github.io/tags/mintty/"/>
    
      <category term="bash" scheme="http://kingsamchen.github.io/tags/bash/"/>
    
  </entry>
  
  <entry>
    <title>MSVC 对多继承下的 EBO 支持的一个 workaround</title>
    <link href="http://kingsamchen.github.io/2018/11/11/ebo-with-multiple-inheritance-in-msvc/"/>
    <id>http://kingsamchen.github.io/2018/11/11/ebo-with-multiple-inheritance-in-msvc/</id>
    <published>2018-11-11T02:44:37.000Z</published>
    <updated>2018-11-11T03:24:28.971Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;首先简单介绍一下 EBO（Empty Base Class Optimization）。&lt;/p&gt;
&lt;p&gt;因为 C++ 规定，任何一个 instance 在内存中必须要有唯一的地址，因此一个空的 class/struct 会在编译时被偷偷插入一个外人看不到的 &lt;code&gt;char mem;&lt;/code&gt;，于是这个空类的每一个 instance 都可以有一个唯一的地址了。&lt;/p&gt;
&lt;p&gt;但是如果将这个空类作为某个类的成员时，这个隐藏的成员会被计入内存布局之中，考虑到 memory padding，有时候会导致类对象体积膨涨一倍。&lt;/p&gt;
&lt;p&gt;例如考虑：&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;E&lt;/span&gt; &amp;#123;&lt;/span&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;A1&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    E e;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;assert(&lt;span class=&quot;keyword&quot;&gt;sizeof&lt;/span&gt;(E) == &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;assert(&lt;span class=&quot;keyword&quot;&gt;sizeof&lt;/span&gt;(A1) == &lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;我们会发现每一个 &lt;code&gt;A1&lt;/code&gt; 的 instance 都占了 8-byte，比起 4-byte 足足翻了一倍。&lt;/p&gt;
&lt;p&gt;占用内存无端变大导致 cache 问题啥的就不讲了，这方面的内容任何讲 computer architecture 的书应该都会有。&lt;br&gt;
    
    </summary>
    
      <category term="PROGRAMMING" scheme="http://kingsamchen.github.io/categories/PROGRAMMING/"/>
    
    
      <category term="c++" scheme="http://kingsamchen.github.io/tags/c/"/>
    
      <category term="msvc" scheme="http://kingsamchen.github.io/tags/msvc/"/>
    
      <category term="ebo" scheme="http://kingsamchen.github.io/tags/ebo/"/>
    
      <category term="multiple inheritance" scheme="http://kingsamchen.github.io/tags/multiple-inheritance/"/>
    
  </entry>
  
  <entry>
    <title>Chromium Base MessageLoop Internals (0)</title>
    <link href="http://kingsamchen.github.io/2018/11/04/chromium-base-message-loop-internals-0/"/>
    <id>http://kingsamchen.github.io/2018/11/04/chromium-base-message-loop-internals-0/</id>
    <published>2018-11-04T02:04:38.000Z</published>
    <updated>2018-11-04T02:09:41.590Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;Our fancy star in this post is class &lt;code&gt;base::MessageLoopCurrent&lt;/code&gt;.&lt;/p&gt;
&lt;h2 id=&quot;MessageLoopCurrent&quot;&gt;&lt;a href=&quot;#MessageLoopCurrent&quot; class=&quot;headerlink&quot; title=&quot;MessageLoopCurrent&quot;&gt;&lt;/a&gt;MessageLoopCurrent&lt;/h2&gt;&lt;p&gt;Version: r70_3538&lt;br&gt;File: &lt;code&gt;base/message_loop/message_loop_current.{h, cc}&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;MessageLoopCurernt is a proxy class for interactions with the MessageLoop bound to the current thread.&lt;/p&gt;
&lt;p&gt;It is introduced to avoid direct uses of &lt;code&gt;MessageLoop::current()&lt;/code&gt;, quoting from original comments:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Why: Historically MessageLoop::current() gave access to the full MessageLoop API, preventing both addition of powerful owner-only APIs as well as making it harder to remove callers of deprecated APIs (that need to stick around for a few owner-only use cases and re-accrue callers after cleanup per remaining publicly available).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Because it is a light-weight proxy, it contains only a single pointer to the MessageLoop bound to the current thread.&lt;br&gt;
    
    </summary>
    
      <category term="PROGRAMMING" scheme="http://kingsamchen.github.io/categories/PROGRAMMING/"/>
    
    
      <category term="chromium" scheme="http://kingsamchen.github.io/tags/chromium/"/>
    
      <category term="source internals" scheme="http://kingsamchen.github.io/tags/source-internals/"/>
    
      <category term="message-loop" scheme="http://kingsamchen.github.io/tags/message-loop/"/>
    
  </entry>
  
  <entry>
    <title>Monthly Read Posts in Oct 2018</title>
    <link href="http://kingsamchen.github.io/2018/11/04/monthly-read-posts-in-oct-2018/"/>
    <id>http://kingsamchen.github.io/2018/11/04/monthly-read-posts-in-oct-2018/</id>
    <published>2018-11-04T01:38:36.000Z</published>
    <updated>2018-11-04T01:39:08.316Z</updated>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Concurrency&quot;&gt;&lt;a href=&quot;#Concurrency&quot; class=&quot;headerlink&quot; title=&quot;Concurrency&quot;&gt;&lt;/a&gt;Concurrency&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://nullprogram.com/blog/2014/09/02/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;C11 Lock-free Stack&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;使用C 11 atomic operations 实现一个轻量的 lock-free stack&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;pre-allocation，不需要考虑单个节点的销毁问题，所以不需要使用 hazard pointer&lt;/li&gt;
&lt;li&gt;free 和 head 两个列表，两个单独的 head 均可用做 sentinel&lt;/li&gt;
&lt;li&gt;使用 aba counter 来避免 ABA problem&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;&lt;a href=&quot;https://www.souyunku.com/2018/07/30/mysql/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;MySQL/InnoDB中，乐观锁、悲观锁、共享锁、排它锁、行锁、表锁、死锁概念的理解&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;感觉这篇讲的好混乱，几个概念是明显正交的都混在一起了。&lt;/p&gt;
&lt;p&gt;瞄了一眼，基本脑子里都在找平常 locking mechanism 里的概念做映射了。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;a href=&quot;https://medium.com/@copyconstruct/the-method-to-epolls-madness-d9d2d6378642&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;The method to epoll’s madness&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;总体写的一般，而且内容有点乱。&lt;/p&gt;
&lt;p&gt;madness 应该指的就是 epoll 对外表现的是引用 file descriptor 但是内部维护的确实 file descrption。&lt;br&gt;
    
    </summary>
    
      <category term="PROGRAMMING" scheme="http://kingsamchen.github.io/categories/PROGRAMMING/"/>
    
    
      <category term="c++" scheme="http://kingsamchen.github.io/tags/c/"/>
    
      <category term="tcp" scheme="http://kingsamchen.github.io/tags/tcp/"/>
    
      <category term="epoll" scheme="http://kingsamchen.github.io/tags/epoll/"/>
    
      <category term="goroutine" scheme="http://kingsamchen.github.io/tags/goroutine/"/>
    
      <category term="network" scheme="http://kingsamchen.github.io/tags/network/"/>
    
      <category term="RFC" scheme="http://kingsamchen.github.io/tags/RFC/"/>
    
  </entry>
  
  <entry>
    <title>Non-blocking Connect(2) and Error Handling</title>
    <link href="http://kingsamchen.github.io/2018/10/27/non-blocking-connect-2-and-error-handling/"/>
    <id>http://kingsamchen.github.io/2018/10/27/non-blocking-connect-2-and-error-handling/</id>
    <published>2018-10-27T14:56:18.000Z</published>
    <updated>2018-10-27T15:32:01.762Z</updated>
    
    <summary type="html">
    
      
      
        
        
          &lt;p&gt;这是我在实现 &lt;a href=&quot;https://github.com/kingsamchen/ezio/blob/master/ezio/connector_posix.cpp&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ezio
        
      
    
    </summary>
    
      <category term="PROGRAMMING" scheme="http://kingsamchen.github.io/categories/PROGRAMMING/"/>
    
    
      <category term="linux" scheme="http://kingsamchen.github.io/tags/linux/"/>
    
      <category term="epoll" scheme="http://kingsamchen.github.io/tags/epoll/"/>
    
      <category term="non-blocking" scheme="http://kingsamchen.github.io/tags/non-blocking/"/>
    
      <category term="connect" scheme="http://kingsamchen.github.io/tags/connect/"/>
    
  </entry>
  
  <entry>
    <title>Naming a Native Thread</title>
    <link href="http://kingsamchen.github.io/2018/10/13/naming-a-native-thread/"/>
    <id>http://kingsamchen.github.io/2018/10/13/naming-a-native-thread/</id>
    <published>2018-10-13T13:58:06.000Z</published>
    <updated>2018-10-13T14:27:57.589Z</updated>
    
    <summary type="html">
    
      &lt;p&gt;这里所说的 naming 主要是为了能够被 debugger 识别，所以单纯的通过 TLS 存储一个额外的字符串是不够的。&lt;/p&gt;
&lt;h2 id=&quot;Windows&quot;&gt;&lt;a href=&quot;#Windows&quot; class=&quot;headerlink&quot; title=&quot;Windows&quot;&gt;&lt;/a&gt;Windows&lt;/h2&gt;&lt;p&gt;Windows 上的做法有两种。&lt;/p&gt;
&lt;p&gt;第一种是利用现成的 API &lt;a href=&quot;https://docs.microsoft.com/en-us/windows/desktop/api/processthreadsapi/nf-processthreadsapi-setthreaddescription&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;SetThreadDescription()&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;通过这个 API 设置的名字据说新版的 minidump 和 WinDBG 都能认了。&lt;/p&gt;
&lt;p&gt;不过缺点是这个 API 很新，从 Windows 10 1607 (build 14393) 开始才有，所以稳妥的使用方式还是从 kernel32.dll 里动态获取。&lt;/p&gt;
&lt;p&gt;第二种做法比较传统，而且很不直观，来源是 MSDN 的一篇 &lt;a href=&quot;https://docs.microsoft.com/en-us/visualstudio/debugger/how-to-set-a-thread-name-in-native-code?view=vs-2017&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;doc&lt;/a&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; DWORD kVCThreadNameException = &lt;span class=&quot;number&quot;&gt;0x406D1388&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;tagTHREADNAME_INFO&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    DWORD dwType;  &lt;span class=&quot;comment&quot;&gt;// Must be 0x1000.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    LPCSTR szName;  &lt;span class=&quot;comment&quot;&gt;// Pointer to name (in user addr space).&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    DWORD dwThreadID;  &lt;span class=&quot;comment&quot;&gt;// Thread ID (-1=caller thread).&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    DWORD dwFlags;  &lt;span class=&quot;comment&quot;&gt;// Reserved for future use, must be zero.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; THREADNAME_INFO;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;SetThreadName&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    THREADNAME_INFO info;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    info.dwType = &lt;span class=&quot;number&quot;&gt;0x1000&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    info.szName = &lt;span class=&quot;string&quot;&gt;&quot;Worker-Traditional&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    info.dwThreadID = &lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    info.dwFlags = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    __try &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        RaiseException(kVCThreadNameException, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;sizeof&lt;/span&gt;(info) / &lt;span class=&quot;keyword&quot;&gt;sizeof&lt;/span&gt;(DWORD),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                       &lt;span class=&quot;keyword&quot;&gt;reinterpret_cast&lt;/span&gt;&amp;lt;ULONG_PTR*&amp;gt;(&amp;amp;info));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; __except(EXCEPTION_EXECUTE_HANDLER) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;基本上照搬 doc 上的代码就好了。&lt;br&gt;
    
    </summary>
    
      <category term="PROGRAMMING" scheme="http://kingsamchen.github.io/categories/PROGRAMMING/"/>
    
    
      <category term="Windows" scheme="http://kingsamchen.github.io/tags/Windows/"/>
    
      <category term="Linux" scheme="http://kingsamchen.github.io/tags/Linux/"/>
    
      <category term="thread" scheme="http://kingsamchen.github.io/tags/thread/"/>
    
  </entry>
  
  <entry>
    <title>Using Boolean Switch with Python Argparser the Right Way</title>
    <link href="http://kingsamchen.github.io/2018/10/07/python-argparser-bool-arg-the-right-way/"/>
    <id>http://kingsamchen.github.io/2018/10/07/python-argparser-bool-arg-the-right-way/</id>
    <published>2018-10-07T05:45:20.000Z</published>
    <updated>2018-10-07T06:22:20.703Z</updated>
    
    <summary type="html">
    
      
      
        
        
          &lt;h2 id=&quot;The-Context&quot;&gt;&lt;a href=&quot;#The-Context&quot; class=&quot;headerlink&quot; title=&quot;The Context&quot;&gt;&lt;/a&gt;The Context&lt;/h2&gt;&lt;p&gt;之前拿 Python 写了一个 CMake 的 build
        
      
    
    </summary>
    
      <category term="PROGRAMMING" scheme="http://kingsamchen.github.io/categories/PROGRAMMING/"/>
    
    
      <category term="python" scheme="http://kingsamchen.github.io/tags/python/"/>
    
      <category term="argparser" scheme="http://kingsamchen.github.io/tags/argparser/"/>
    
      <category term="bool argument" scheme="http://kingsamchen.github.io/tags/bool-argument/"/>
    
  </entry>
  
  <entry>
    <title>Monthly Read Posts in Sep 2018</title>
    <link href="http://kingsamchen.github.io/2018/10/05/monthly-read-posts-in-sep-2018/"/>
    <id>http://kingsamchen.github.io/2018/10/05/monthly-read-posts-in-sep-2018/</id>
    <published>2018-10-04T16:33:28.000Z</published>
    <updated>2018-10-07T02:20:08.931Z</updated>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Programming-Language&quot;&gt;&lt;a href=&quot;#Programming-Language&quot; class=&quot;headerlink&quot; title=&quot;Programming Language&quot;&gt;&lt;/a&gt;Programming Language&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://www.fluentcpp.com/2016/12/08/strong-types-for-strong-interfaces/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Strong types for strong interfaces&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;How to add a type wrapper for built-in types.&lt;/p&gt;
&lt;p&gt;Besides using phantom template parameter to avoid alias, one can also use private inheritance:&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;NamedType&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    explicit NamedType(T const&amp;amp; value) : value_(value) &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    explicit NamedType(T&amp;amp;&amp;amp; value) : value_(std::move(value)) &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;T&amp;amp; &lt;span class=&quot;title&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&amp;#123; &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; value_; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;T &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt;&amp;amp; &lt;span class=&quot;title&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; value_; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    T value_;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Width&lt;/span&gt; :&lt;/span&gt; NamedType&amp;lt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;&amp;gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;using&lt;/span&gt; NamedType::NamedType;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;using&lt;/span&gt; NamedType::get;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
&lt;p&gt;&lt;a href=&quot;https://www.fluentcpp.com/2016/12/12/passing-strong-types-by-reference/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Passing strong types by reference – First attempt&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This post is the sequal of the above post.&lt;/p&gt;
&lt;p&gt;The main problem the post tryies to solve is: how to make copy of &lt;code&gt;NamedType&lt;/code&gt; values cheap.&lt;/p&gt;
&lt;p&gt;However, I am conservative on using reference-wrapper as the solution, because doing this has to expose the lifetime of the wrapped object to public; after all, reference-wrapper is only a point per se.&lt;br&gt;
    
    </summary>
    
      <category term="PROGRAMMING" scheme="http://kingsamchen.github.io/categories/PROGRAMMING/"/>
    
    
      <category term="template" scheme="http://kingsamchen.github.io/tags/template/"/>
    
      <category term="TCP" scheme="http://kingsamchen.github.io/tags/TCP/"/>
    
      <category term="strong type" scheme="http://kingsamchen.github.io/tags/strong-type/"/>
    
      <category term="interface" scheme="http://kingsamchen.github.io/tags/interface/"/>
    
      <category term="exception handling" scheme="http://kingsamchen.github.io/tags/exception-handling/"/>
    
      <category term="virtual memory" scheme="http://kingsamchen.github.io/tags/virtual-memory/"/>
    
      <category term="TIME_WAIT" scheme="http://kingsamchen.github.io/tags/TIME-WAIT/"/>
    
      <category term="abstraction" scheme="http://kingsamchen.github.io/tags/abstraction/"/>
    
  </entry>
  
  <entry>
    <title>给 ydiff 提了个 PR</title>
    <link href="http://kingsamchen.github.io/2018/09/26/made-a-pr-for-ydiff/"/>
    <id>http://kingsamchen.github.io/2018/09/26/made-a-pr-for-ydiff/</id>
    <published>2018-09-26T15:50:36.000Z</published>
    <updated>2018-10-07T02:20:08.931Z</updated>
    
    <summary type="html">
    
      
      
        
        
          &lt;p&gt;&lt;a href=&quot;https://github.com/ymattw/ydiff&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ydiff&lt;/a&gt; 是基于 CLI 的一个 diff tool，支持 side-by-side 模式&lt;/p&gt;
&lt;p&gt;前段时间在
        
      
    
    </summary>
    
      <category term="CODE-LIFE" scheme="http://kingsamchen.github.io/categories/CODE-LIFE/"/>
    
    
      <category term="python" scheme="http://kingsamchen.github.io/tags/python/"/>
    
      <category term="pull request" scheme="http://kingsamchen.github.io/tags/pull-request/"/>
    
      <category term="diff" scheme="http://kingsamchen.github.io/tags/diff/"/>
    
  </entry>
  
</feed>
