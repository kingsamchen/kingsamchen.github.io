<!DOCTYPE html>
<html lang="default">
  <head><meta name="generator" content="Hexo 3.9.0">
    
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">

<meta name="theme-color" content="#f8f5ec">
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">



  <meta name="description" content="Gone with the ruins">













  <link rel="alternate" href="/atom.xml" title="KCçš„åºŸå¢Ÿå †">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.6.0">



<link rel="canonical" href="http://kingsamchen.github.io/">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.6.0">






  



  









    <title> KCçš„åºŸå¢Ÿå † </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">KCçš„åºŸå¢Ÿå †</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            é¦–é¡µ
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            å½’æ¡£
          
        </li>
      </a>
    
      <a href="/friends/">
        <li class="mobile-menu-item">
          
          
            Friends
          
        </li>
      </a>
    
      <a href="/about">
        <li class="mobile-menu-item">
          
          
            å…³äº
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">KCçš„åºŸå¢Ÿå †</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              é¦–é¡µ
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              å½’æ¡£
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/friends/">
            
            
              Friends
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/about">
            
            
              å…³äº
            
          </a>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  <section id="posts" class="posts">
    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2020/08/16/passkey-idiom-part-2/">å†è°ˆ passkey idiom</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2020-08-16
        </span>
        
          <div class="post-category">
            
              <a href="/categories/PROGRAMMING/">PROGRAMMING</a>
            
          </div>
        
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p>æˆ‘åœ¨ <a href="/2020/07/02/passkey-idiom-for-make-functions/" title="Passkey Idiom">Passkey Idiom</a> è¿™ç¯‡æ–‡ç« ä¸­ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ passkey idiom ä»¥åŠä½¿ç”¨éœ€è¦çš„æ³¨æ„é¡¹ã€‚</p>
<p>å…¶ä¸­æœ€å¼ºè°ƒçš„å°±æ˜¯ <code>Token</code> ç±»çš„ ctor å¿…é¡»<strong>åŒæ—¶æ»¡è¶³</strong> 1) <code>private access level</code> 2) å­˜åœ¨æ˜¾å¼å®šä¹‰ï¼›å¦åˆ™ç”¨æˆ·å¯ä»¥ä½¿ç”¨</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Widget <span class="title">w</span><span class="params">(&#123;&#125;, <span class="number">0</span>)</span></span>;</span><br></pre></td></tr></table></figure>
<p>ç»•è¿‡ã€‚</p>
<p>å…¶å®è¿™é‡Œæˆ‘ä»¬è¿˜å¯ä»¥å°† <code>Token</code> çš„é»˜è®¤æ„é€ å‡½æ•°æ ‡è®°ä¸º <code>explicit</code> æ¥è§£å†³ï¼›å³</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Widget</span> &#123;</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Token</span> &#123;</span></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">Token</span><span class="params">()</span> </span>= <span class="keyword">default</span>;</span><br><span class="line">        <span class="keyword">friend</span> Widget;</span><br><span class="line">    &#125;;</span><br><span class="line">    ...</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">Widget <span class="title">w</span><span class="params">(&#123;&#125;, <span class="number">0</span>)</span></span>;    <span class="comment">// error: cannot convert argument 1 from 'initializer list' to 'Token'</span></span><br></pre></td></tr></table></figure>
<p>å› ä¸ºå‰é¢é€šè¿‡ <code>{}</code> æ„é€ ä¸€ä¸ª <code>Token</code> å¯¹è±¡å®é™…ä¸Šä½¿ç”¨äº† <a href="https://en.cppreference.com/w/cpp/language/list_initialization" target="_blank" rel="noopener"><em>copy-list-initialization</em></a></p>
<p>æ³¨ï¼šæ ¹æ® reference æ–‡æ¡£ï¼Œå¦‚æœ <code>class T</code> æ˜¯ä¸€ä¸ª aggregateï¼Œé‚£ä¹ˆ list initilization çš„ effect å°±æ˜¯ perform aggregate initializationï¼›æ‰€ä»¥è¿™é‡Œå’Œå‰é¢è¯´çš„ aggregation initialization å¹¶ä¸çŸ›ç›¾ã€‚</p>
<p>å°†æ„é€ å‡½æ•°æ ‡è®°ä¸º <code>explicit</code> å¯ä»¥å±è”½/é˜»æ­¢ä½¿ç”¨ copy-list-initializationï¼Œå³è¿™é‡Œçš„ä½¿ç”¨åœºæ™¯ã€‚</p>
<p>ä¸ºäº†ä¾¿äºè®°å¿†å¯ä»¥è®¤ä¸º <code>explicit default constructor</code> ä¼šé˜»æ­¢ <code>{} -&gt; class T</code> çš„åˆ›å»ºã€‚</p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2020/07/14/the-std-byte/">The std::byte For Byte Addressing</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2020-07-14
        </span>
        
          <div class="post-category">
            
              <a href="/categories/PROGRAMMING/">PROGRAMMING</a>
            
          </div>
        
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p>æ—¶éš”å¤šå¹´ï¼ŒC++ 17 ç»ˆäºè¿æ¥äº†ä¸“é—¨ç”¨äº byte-oriented access çš„æ•°æ®ç±»å‹ <code>std::byte</code>ã€‚</p>
<p>ä¹‹æ‰€ä»¥å¼•å…¥ä¸€ä¸ªæ–°çš„ç±»å‹æ˜¯å› ä¸ºä¹‹å‰ä¸ç®¡æ˜¯ <code>char</code> è¿˜æ˜¯ <code>unsigned char</code>ï¼Œéƒ½æ‰¿è½½äº†ä¸‰ç§è§’è‰²</p>
<ol>
<li>å­—èŠ‚å¯»å€ byte addressing</li>
<li>ç®—æœ¯æ“ä½œç±»å‹</li>
<li>å±•ç¤ºå­—ç¬¦ç±»å‹</li>
</ol>
<p>è¿™æ ·å¾ˆå®¹æ˜“å¼•å‘æ··ä¹±å’Œé”™è¯¯ã€‚</p>
<p>å¦å¤–å³ä½¿æ˜¯ <code>uint8_t</code>ï¼Œä¹Ÿè‡³å°‘æ‰¿æ‹…äº†ç®—æœ¯æ“ä½œç±»å‹ï¼›å› æ­¤æ ‡å‡†å§”å‘˜ä¼šè§‰å¾—éœ€è¦ä¸€ä¸ª<strong>ä»…ç”¨äºå­—èŠ‚å¯»å€</strong>çš„ byte ç±»å‹ã€‚</p>
<p>å®˜æ–¹å£å¾„å«ï¼š<em>to distinguish byte-oriented access to memory from accessing memory as a character or integral value</em>.</p>
<p>å®ç°ä¸Šä½ ä¼šå‘ç° <code>std::byte</code> å…¶å®æ˜¯åŸºäºåº•å±‚ç±»å‹ä¸º <code>unsigned char</code> çš„ enum classï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="class"><span class="keyword">class</span> <span class="title">byte</span> :</span> <span class="keyword">unsigned</span> <span class="keyword">char</span> &#123;&#125; ;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¼¼ä¹æœ‰æ„è€Œä¸ºä¹‹ã€‚</p>
<p>ç¬¬ä¸€æ˜¯é™åˆ¶ <code>std::byte</code> çš„ç®—æ•°æ“ä½œèƒ½åŠ›ï¼›åŒæ—¶å› ä¸ºå­—èŠ‚é€šå¸¸ä¼šæ¶‰åŠåˆ°ä½è¿ç®—ï¼Œå› æ­¤é¢å¤–æä¾›äº†ä½è¿ç®—çš„æ“ä½œç¬¦é‡è½½ã€‚</p>
<p>è¿™é¿å…æ„å¤–è¿ç®—å¯¼è‡´çš„é”™è¯¯ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::<span class="function">byte <span class="title">read_mistake</span><span class="params">(<span class="built_in">std</span>::byte* b, <span class="keyword">int</span> offset)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// should be *(b + offset)</span></span><br><span class="line">    <span class="keyword">return</span> *b + offset;     <span class="comment">// &lt;- compile error</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦å¤– enum class çš„å‡ºèº«å¯¼è‡´äº† implicit conversion éƒ½ä¸è¢«å…è®¸ï¼Œåˆ° integer çš„è½¬æ¢å¿…é¡»ä½¿ç”¨ <code>to_integer()</code> ä»¥åŠå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚</p>
<p>åŒæ—¶åˆå§‹åŒ–å¦‚æœä¸å€ŸåŠ©å¼ºåˆ¶ç±»å‹è½¬æ¢å°±å¿…é¡»ä½¿ç”¨ braced-initializationï¼Œå³</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::byte b &#123;<span class="number">42</span>&#125;;</span><br></pre></td></tr></table></figure>
<p>å¦ä¸€ä¸ªåŸå› æ˜¯é‡‡ç”¨ enum class å¯ä»¥ä¿è¯å¤–éƒ¨ç±»å‹å’Œåº•å±‚ç±»å‹çš„å¤§å°å’Œå†…å­˜å¯¹é½ä¸€è‡´ã€‚</p>
<p>ç»†èŠ‚è§: <a href="https://stackoverflow.com/questions/44508172/why-is-stdbyte-an-enum-class-instead-of-a-class" target="_blank" rel="noopener">https://stackoverflow.com/questions/44508172/why-is-stdbyte-an-enum-class-instead-of-a-class</a></p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2020/07/02/passkey-idiom-for-make-functions/">Passkey Idiom</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2020-07-02
        </span>
        
          <div class="post-category">
            
              <a href="/categories/PROGRAMMING/">PROGRAMMING</a>
            
          </div>
        
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p>å¦‚æœå‡ºäºæŸäº›ç›®çš„å¸Œæœ›å°†æŸä¸ªç±»çš„æ„é€ å‡½æ•°è®¾ç½®ä¸º privateï¼Œå¹¶æä¾›å·¥å‚å‡½æ•° <code>Make()</code> åˆ›å»ºæœ€ç»ˆå¯¹è±¡ï¼›å·¥å‚å‡½æ•°ä¸­é€šå¸¸ä¼šä½¿ç”¨ <code>std::make_unique()</code> æˆ–è€… <code>std::make_shared()</code> æ¥åˆ›å»ºç”±å¯¹åº”æ™ºèƒ½æŒ‡é’ˆæ‰˜ç®¡çš„å¯¹è±¡ã€‚</p>
<p>ä½†æ˜¯å› ä¸ºæ„é€ å‡½æ•°è¢«è®¾ç½®æˆäº† privateï¼Œå› æ­¤è¿™ä¸¤ä¸ª make å‡½æ•°<strong>å†…éƒ¨</strong>åˆ›å»ºå¯¹è±¡ä¼šç¼–è¯‘å¤±è´¥ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬å®åœ¨ä¸å¸Œæœ›ä½¿ç”¨ <code>new</code> å»æ„é€ å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ passkey æ‰‹æ³•è§„é¿æ— æ³•ç¼–è¯‘çš„é—®é¢˜ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Widget</span> &#123;</span></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Token</span> &#123;</span></span><br><span class="line">   <span class="keyword">private</span>:</span><br><span class="line">    Token() &#123;&#125;</span><br><span class="line">    <span class="keyword">friend</span> Widget;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">  <span class="keyword">static</span> <span class="built_in">std</span>::<span class="built_in">shared_ptr</span>&lt;Widget&gt; Make() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">std</span>::make_shared&lt;Widget&gt;(Token&#123;&#125;, GenerateId());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Widget(Token, <span class="keyword">int</span> id) : id_(id) &#123;&#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">private</span>:</span><br><span class="line">  <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">GenerateId</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> id_;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä¾‹å­ä½¿ç”¨çš„æ˜¯ <code>make_shared()</code>ï¼Œ<code>make_unique()</code> ä¹Ÿæ˜¯ç±»ä¼¼ã€‚</p>
<p>éœ€è¦æ³¨æ„ï¼Œä¸ç®¡ <code>Token</code> ç±»æ˜¯å¦æ˜¯ <code>Widget</code> çš„ private æˆå‘˜ï¼Œ<code>Token</code> è‡ªèº«çš„æ„é€ å‡½æ•°å¿…é¡»æ»¡è¶³</p>
<ul>
<li>private access level</li>
<li>æ˜¾å¼å®šä¹‰ï¼ˆå³ä¸èƒ½ä½¿ç”¨ <code>= default</code>ï¼‰</li>
</ul>
<p>å¦åˆ™ä¼šå­˜åœ¨ä¸€ä¸ªæ¼æ´ï¼Œå³ä¸‹é¢çš„ä»£ç èƒ½å¤Ÿç¼–è¯‘é€šè¿‡</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Widget</span> &#123;</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Token</span> &#123;</span></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Token() = <span class="keyword">default</span>;</span><br><span class="line">        <span class="keyword">friend</span> Widget;</span><br><span class="line">    &#125;;</span><br><span class="line">    ...</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">Widget <span class="title">w</span><span class="params">(&#123;&#125;, <span class="number">0</span>)</span></span>;    <span class="comment">// Compiled.</span></span><br></pre></td></tr></table></figure>
<p>å› ä¸º <code>{}</code> è¢«è®¤ä¸ºæ˜¯ aggregate initializationï¼Œè¿›è€Œæ— è§† default constructor çš„è®¿é—®çº§åˆ«ã€‚</p>
<p>æ˜¾å¼å®šä¹‰æ„é€ å‡½æ•°å¯ä»¥é¿å… <code>{}</code> è¢«â€œç†è§£â€ä¸º aggregate initializationã€‚</p>
<h2 id="Misc"><a href="#Misc" class="headerlink" title="Misc"></a>Misc</h2><p>ä½¿ç”¨ <code>make_unique</code> çš„æœ€å¤§ä¼˜ç‚¹æ˜¯å¯ä»¥åšåˆ°å¼‚å¸¸å®‰å…¨ï¼›å¯¹äºè¿™æ ·çš„ä»£ç </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">HeavyRender</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">unique_ptr</span>&lt;Widget&gt; w, Foobar&amp;&amp; fb)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// If an exception is thrown from `AcquireFoobar()`, the newed memory would leak</span></span><br><span class="line">HeavyRender(<span class="built_in">std</span>::<span class="built_in">unique_ptr</span>&lt;Widget&gt;(<span class="keyword">new</span> Widget()), AcquireFoobar());</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘å™¨æ— æ³•ä¿è¯å‡½æ•° <code>AcquireFoobar()</code> æ‰§è¡Œçš„æ—¶å€™ <code>new</code> è¿”å›çš„åœ°å€å·²ç»è¢«ç”¨äºæ„é€  <code>unique_ptr&lt;Widget&gt;</code>ï¼›å› æ­¤å¦‚æœæ­¤æ—¶å‰è€…æŠ›å‡ºäº†ä¸€ä¸ªå¼‚å¸¸ï¼ŒåŠ¨æ€åˆ†é…çš„å¯¹è±¡å°±æ³„éœ²äº†ã€‚</p>
<p>ä¸è¿‡é€šå¸¸æ¥è¯´ï¼Œåªè¦è®°ä½æ¶‰åŠ new çš„è¯­å¥åªæœ‰ä¸€ä¸ª side-effect å°±å¯ä»¥å¾ˆå¤§ç¨‹åº¦é¿å…è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>å¯¹äº <code>make_shared()</code>ï¼Œé™¤äº†å¼‚å¸¸å®‰å…¨çš„ä¼˜åŠ¿ä¹‹å¤–ï¼Œå†…éƒ¨åªåšä¸€æ¬¡å†…å­˜åˆ†é…å¸¦æ¥çš„æ€§èƒ½æå‡å¯èƒ½æ˜¯å¤§å¤šæ•°äººä½¿ç”¨è¿™ä¸ªå‡½æ•°çš„åˆè¡·ã€‚</p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2020/06/30/golang-options-pattern/">Golang's Options Pattern</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2020-06-30
        </span>
        
          <div class="post-category">
            
              <a href="/categories/PROGRAMMING/">PROGRAMMING</a>
            
          </div>
        
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p>å¯ä»¥å°† Golang çš„ <em>Options Pattern</em> è§†ä½œï¼ˆæœ‰å‰¯ä½œç”¨ï¼‰å‡½æ•°å¼ç‰ˆçš„ <em>Builder Pattern</em>ï¼Œå…¶æ ¸å¿ƒæ˜¯ï¼šç‰¹å®šçš„ option-function è°ƒç”¨ä¼šç”Ÿæˆå¯¹åº”çš„ç±»å‹ä¸º Option çš„é—­åŒ…ï¼Œæ‰§è¡Œé—­åŒ…ä¼šä¿®æ”¹å†…éƒ¨çš„ Options ç»“æ„ã€‚</p>
<p>Golang çš„å‡½æ•°æ”¯æŒåŒä¸€ç±»å‹çš„ä¸å®šå‚æ•°ï¼Œå› æ­¤ä¸Šé¢çš„é—­åŒ…ç±»å‹ä¸€è‡´ã€‚</p>
<p>åŒºåˆ«ä¼ ç»Ÿ Builder Patternï¼š</p>
<ul>
<li><p>builder pattern é€šè¿‡æˆå‘˜å‡½æ•°è°ƒç”¨ç›´æ¥ä¿®æ”¹ builder å¯¹è±¡çš„å±æ€§æˆå‘˜ï¼›æˆ–è€…é€šè¿‡æˆå‘˜å‡½æ•°ç›´æ¥ä¿®æ”¹å®ä¾‹å¯¹è±¡çš„æˆå‘˜</p>
</li>
<li><p>options pattern æ˜¯é€šè¿‡å‡½æ•°è°ƒç”¨ç”Ÿæˆé—­åŒ…ï¼Œå†…éƒ¨é€šè¿‡æ‰§è¡Œé—­åŒ…æ¥ä¿®æ”¹å¯¹åº”æˆå‘˜</p>
</li>
</ul>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ClientOptions defines options of a client instance</span></span><br><span class="line"><span class="keyword">type</span> ClientOptions <span class="keyword">struct</span> &#123;</span><br><span class="line">    Timeout time.Duration</span><br><span class="line">    Retry   <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> ClientOption <span class="function"><span class="keyword">func</span><span class="params">(*ClientOptions)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">func</span> <span class="title">WithTimeout</span><span class="params">(dur time.Duration)</span> <span class="title">ClientOption</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(opts *ClientOptions)</span></span> &#123;</span><br><span class="line">        opts.Timeout = dur</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">WithRetry</span><span class="params">(cnt <span class="keyword">int</span>)</span> <span class="title">ClientOption</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(opts *ClientOptions)</span></span> &#123;</span><br><span class="line">        opts.Retry = cnt</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Client <span class="keyword">struct</span> &#123;</span><br><span class="line">    opts *ClientOptions</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewClient</span><span class="params">(opts ...ClientOption)</span> *<span class="title">Client</span></span> &#123;</span><br><span class="line">    <span class="comment">// can use some default values for options</span></span><br><span class="line">    cli := &amp;Client&#123;</span><br><span class="line">        opts: &amp;ClientOptions&#123;&#125;,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// apply options</span></span><br><span class="line">    <span class="keyword">for</span> _, opt := <span class="keyword">range</span> opts &#123;</span><br><span class="line">        opt(cli.opts)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> cli</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    cli := NewClient(WithTimeout(time.Second * <span class="number">3</span>))</span><br><span class="line">    fmt.Println(cli.opts.Timeout)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åŸºäº-interface-çš„æ‰©å±•"><a href="#åŸºäº-interface-çš„æ‰©å±•" class="headerlink" title="åŸºäº interface çš„æ‰©å±•"></a>åŸºäº interface çš„æ‰©å±•</h2><p>é™¤äº†ç”Ÿæˆé—­åŒ…ï¼Œoption å‡½æ•°ä¹Ÿå¯ä»¥ç”Ÿæˆå®ç°äº†å¯¹åº”æ¥å£çš„ç»“æ„ï¼š</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Options <span class="keyword">struct</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Option <span class="keyword">interface</span> &#123;</span><br><span class="line">    apply(*Options)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‚è€ƒ uber-golang-style é‡Œçš„ <a href="https://github.com/uber-go/guide/blob/master/style.md#functional-options" target="_blank" rel="noopener">functional options</a></p>
<h2 id="Rant"><a href="#Rant" class="headerlink" title="Rant"></a>Rant</h2><p>æ ¹æ® @vizze çš„è¯´æ³•ï¼Œgolang åˆ›å»ºé—­åŒ…çš„å¼€é”€æ¯”ç›´æ¥å‡½æ•°è°ƒç”¨é«˜ä¸å°‘ã€‚é»˜è®¤ golang è¡Œå°¾è‡ªåŠ¨æ·»åŠ åˆ†å·çš„ç­–ç•¥å¯¼è‡´å¤šä¸ªå‡½æ•°è°ƒç”¨æ¢è¡Œå†™æ³•éš¾çœ‹ã€‚</p>
<p>å¦ï¼Œå¯¹äº C++ æ¥è¯´ä¹Ÿå¯ä»¥ä½¿ç”¨ golang è¿™ç§é£æ ¼ã€‚ä¸å®šæ¨¡æ¿å‚æ•°è§£å†³ä¸å®šå‚æ•°é—®é¢˜ï¼ŒåŒæ—¶è¿™é‡Œéœ€è¦çš„æ˜¯ä¸€ä¸ª callable conceptï¼Œlambda æˆ–è€… <code>std::function&lt;&gt;</code> éƒ½å¯ä»¥åšåˆ°ï¼Œå‰è€…åº”è¯¥å¯ä»¥åšåˆ° zero-cost abstractionï¼Œåè€…ä¼šæœ‰ä¸€äº›é¢å¤–å¼€é”€ã€‚</p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2020/06/28/keep-asio-io-context-running/">ä¿æŒ ASIO io_context æ— ä»»åŠ¡æ—¶è¿è¡Œ</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2020-06-28
        </span>
        
          <div class="post-category">
            
              <a href="/categories/PROGRAMMING/">PROGRAMMING</a>
            
          </div>
        
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p>ASIO çš„ <code>io_context::run()</code> å¦‚æœå‘ç°æ²¡æœ‰ pending çš„ä»»åŠ¡å°±ä¼šè¿”å›ï¼Œå¯¹äº server çš„ç›‘å¬çº¿ç¨‹æ¥è¯´è¿™æ˜¯ç¬¦åˆå¸¸ç†çš„ï¼Œå› ä¸ºæ— è®ºå¦‚ä½•è‡³å°‘æœ‰ä¸ª <code>acceptor::async_accept()</code> åœ¨ pendingã€‚</p>
<p>ä½†æ˜¯å¦‚æœæƒ³åˆ©ç”¨å¤šæ ¸èƒ½åŠ›ï¼Œé‚£ä¹ˆä¸€ä¸ªå¸¸ç”¨çš„è®¾è®¡æ˜¯ï¼šmaster çº¿ç¨‹åªè´Ÿè´£ accept è¿›æ¥çš„è¯·æ±‚ï¼›å°†æ¥å—çš„ conn_sock ä¼ é€’åˆ° worker pool é‡Œç”±å…¶ä¸­ä¸€ä¸ª worker thread å¤„ç†ã€‚</p>
<p>æ¯ä¸ª worker thread å…¶å®ä¹Ÿè·‘äº†ä¸€ä¸ª <code>io_context</code>ï¼Œä½†æ˜¯å› ä¸ºæˆ‘ä»¬æ— æ³•ä¿è¯æ¯ä¸ª worker éƒ½æœ‰ pending taskï¼Œæ‰€ä»¥å¦‚æœä¸åšç‰¹æ®Šå¤„ç†ï¼Œ<code>io_context::run()</code> ä¼šç›´æ¥è¿”å›ï¼Œå¯¼è‡´ worker thread ä¹Ÿé€€å‡ºï¼Œè¿™å’Œæˆ‘ä»¬å¸Œæœ›çš„èƒŒé“è€Œé©°ã€‚</p>
<p>ASIO ä¸­çš„ work guard å°±æ˜¯ç”¨äº†è¯¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼šä¸€ä¸ª work guard èƒ½é˜²æ­¢å…¶å…³è”çš„ io_context åœ¨æ²¡æœ‰ä»»åŠ¡æ—¶é€€å‡ºã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[[maybe_unused]]Â <span class="keyword">auto</span>Â work_guardÂ =Â asio::make_work_guard(io_ctx_);</span><br><span class="line">io_ctx_.run();</span><br></pre></td></tr></table></figure>
<ol>
<li><code>work_guard</code> ä¸å½±å“ <code>io_context::stop()</code> çš„åŠŸèƒ½å’Œè¯­ä¹‰ï¼›å¦‚æœéœ€è¦ç»“æŸ io_context loopï¼Œæ¨èçš„ä¾ç„¶æ˜¯ä½¿ç”¨è¿™ä¸ªæ–¹æ³•</li>
<li>å¦‚æœå‘å»æ‰ <code>work_guard</code> çš„å½±å“ï¼Œä½¿ç”¨ <code>work_guard::reset()</code> å³å¯ï¼›è°ƒç”¨å <code>io_context::run()</code> ä¼šåœ¨æ²¡æœ‰ pending task æ—¶è¿”å›</li>
</ol>
<h2 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h2><ol>
<li><a href="https://dens.website/tutorials/cpp-asio/work" target="_blank" rel="noopener">Prevent io_context::run from returning</a></li>
</ol>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2020/05/04/atoi-with-overflow-handled/">atoi With Overflow Handled</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2020-05-04
        </span>
        
          <div class="post-category">
            
              <a href="/categories/PROGRAMMING/">PROGRAMMING</a>
            
          </div>
        
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p>leetcode ä¸Šæœ‰ä¸€é¢˜æ˜¯è®©ä½ å®ç°ä¸€ä¸ª <code>atoi()</code>ï¼Œä½†æ˜¯å› ä¸ºå‡½æ•°ç±»å‹æ˜¯ 32-bit intï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥å†…éƒ¨è½¬æ¢åˆ° 64-bit intï¼Œé¿å…éœ€è¦ç›´æ¥å¤„ç†æº¢å‡ºçš„æƒ…å†µã€‚</p>
<p>å¦‚æœè¦é’ˆå¯¹ <code>int64</code> å®ç°ä¸€ä¸ª <code>atoi()</code> åˆè¯¥å¦‚ä½•åšï¼Ÿ</p>
<p>æˆ‘ç¿»äº†ä¸€ä¸‹ golang çš„æ ‡å‡†åº“æºç ï¼Œå¤§è‡´æ¢³ç†äº†ä¸€ä¸‹</p>
<p>(1) å¦‚æœå¯¹è±¡æ˜¯ <code>int32</code>ï¼Œå¹¶ä¸”è¾“å…¥å­—ç¬¦ä¸²æœ‰æ•ˆæ•°æ®é•¿åº¦å°äº10ä½ï¼Œåˆ™ä¸€å®šä¸ä¼šæº¢å‡ºï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥å¤„ç†</p>
<p>(2) å¦åˆ™ç»Ÿä¸€èµ° <code>int64</code> å¤„ç†ï¼›<code>int64</code> å†…éƒ¨ä¼šå…ˆå¤„ç†æ‰ç¬¦å·ä½ <code>neg</code>ï¼Œç„¶åè½¬æˆ <code>uint64</code></p>
<p>(3) æº¢å‡ºå¤„ç†çš„æ ¸å¿ƒéƒ¨åˆ†ï¼š</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Cutoff is the smallest number such that cutoff*base &gt; maxUint64.</span></span><br><span class="line"><span class="comment">// Use compile-time constants for common cases.</span></span><br><span class="line"><span class="keyword">var</span> cutoff <span class="keyword">uint64</span></span><br><span class="line"><span class="keyword">switch</span> base &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">	cutoff = maxUint64/<span class="number">10</span> + <span class="number">1</span></span><br><span class="line"><span class="keyword">case</span> <span class="number">16</span>:</span><br><span class="line">	cutoff = maxUint64/<span class="number">16</span> + <span class="number">1</span></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">	cutoff = maxUint64/<span class="keyword">uint64</span>(base) + <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> n &gt;= cutoff &#123;</span><br><span class="line">	<span class="comment">// n*base overflows</span></span><br><span class="line">	<span class="keyword">return</span> maxVal, rangeError(fnParseUint, s0)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">maxVal := <span class="keyword">uint64</span>(<span class="number">1</span>)&lt;&lt;<span class="keyword">uint</span>(bitSize) - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">n *= <span class="keyword">uint64</span>(base)</span><br><span class="line"></span><br><span class="line">n1 := n + <span class="keyword">uint64</span>(d)</span><br><span class="line"><span class="keyword">if</span> n1 &lt; n || n1 &gt; maxVal &#123;</span><br><span class="line">	<span class="comment">// n+v overflows</span></span><br><span class="line">	<span class="keyword">return</span> maxVal, rangeError(fnParseUint, s0)</span><br><span class="line">&#125;</span><br><span class="line">n = n1</span><br></pre></td></tr></table></figure>
<p>(4) <code>cutoff</code> æ˜¯é˜²æ­¢æº¢å‡ºçš„ç¬¬ä¸€é‡æ …æ </p>
<p>å¯¹äº <code>uint64</code> æ¥è¯´</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cutoff     = 1844674407370955162</span><br><span class="line">UINT64_MAX = 18446744073709551615</span><br></pre></td></tr></table></figure>
<p>parse çš„æ—¶å€™å¦‚æœå½“å‰æ•°å·²ç» &gt;= cutoff é‚£ä¹ˆåé¢çš„æ•°å­—ä¸ç®¡æ˜¯å‡ éƒ½ç»å¯¹æº¢å‡ºã€‚</p>
<p>ä½†æ˜¯å³ä½¿ cutoff è¿™é‡Œæ»¡è¶³ï¼ŒåŠ ä¸Šåä¸€ä½æ•°å­—ä¹‹åä»ç„¶å¯èƒ½ä¼šæº¢å‡ºï¼Œæ‰€ä»¥è¿™é‡Œè¦åšæº¢å‡ºå¤„ç†ã€‚</p>
<p>å› ä¸ºç±»å‹æ˜¯ uint64ï¼Œæ‰€ä»¥åªå¯èƒ½å‘ç”Ÿä¸Šæº¢å‡ºï¼Œæ•°å€¼ä¼š wrap-aroundï¼Œæ‰€ä»¥ç”¨ <code>n + uint64(d) &lt; n</code> æ¥åˆ¤æ–­</p>
<p><code>n1 &gt; maxVal</code> æ˜¯ç”¨æ¥å¤„ç† int32 çš„æ—¶å€™çš„æƒ…å†µï¼ˆå‡½æ•°çš„è¾“å…¥ç±»å‹å·²ç»è¢«è½¬æˆäº† 64-bitï¼‰</p>
<p>(5) å¦‚æœè¾“å…¥ç±»å‹æœ¬èº«å°±æ˜¯æ— ç¬¦å·ï¼Œé‚£ä¹ˆåˆ°è¿™é‡Œå°±ç»“æŸäº†ã€‚</p>
<p>å¦‚æœæ˜¯æœ‰ç¬¦å·ï¼Œéœ€è¦åˆ¤æ–­æœ€ç»ˆç»“æœæ˜¯å¦è½åœ¨èŒƒå›´é‡Œï¼Œå¦å¤–è¦æ³¨æ„è¡¥ç ä½“ç³»ä¸‹ä¸¤ç«¯çš„å€¼æ˜¯ä¸å¯¹ç§°çš„ã€‚</p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2020/04/19/allow-connections-from-lan-for-trojan-qt5/">Allow Connections From LAN for Trojan-qt5</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2020-04-19
        </span>
        
          <div class="post-category">
            
              <a href="/categories/CODE-LIFE/">CODE-LIFE</a>
            
          </div>
        
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p>å› ä¸ºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œæœºåœºçš„æœåŠ¡å•†æŠŠåè®®ä» SS åˆ‡æ¢åˆ°äº† Trojanã€‚ä½†æ˜¯ä¹‹å‰çš„ SS windows å®¢æˆ·ç«¯åªæ”¯æŒ SS åè®®ï¼Œæ‰€ä»¥åˆ‡æ¢ååªèƒ½æ¢ Trojan-qt5 ä½œä¸ºå®¢æˆ·ç«¯ã€‚</p>
<p>ä½†æ˜¯è¿™ä¸ªå®¢æˆ·ç«¯åšçš„å®åœ¨ä¸æ€ä¹ˆæ ·ï¼Œä½œè€…ä¼¼ä¹æ˜¯åœ¨åŸæ¥çš„ ss-qt5 çš„åŸºç¡€ä¸Šåšçš„ä¿®æ”¹ï¼Œé›†æˆäº† libtrojanï¼›ä»¥è‡³äºä¹‹å‰ SS-Windows ç”¨çš„å¥½å¥½çš„ <em>Allow Connections From LAN</em> åŠŸèƒ½åˆ°è¿™é‡Œæ²¡æ³•ç”¨äº†ã€‚</p>
<p>æ›´æ”¹ socks5 ç›‘å¬åœ°å€ä¸º <code>INETADDR_ANY</code> ç¡®å®èƒ½è®©å±€åŸŸç½‘å†…çš„å…¶ä»–ä¸»æœºé“¾æ¥ socks5 ä»£ç†ï¼Œä½†æ˜¯ HTTP ä»£ç†å°±ç¥å¥‡çš„ä¸èƒ½ç”¨äº†â€¦</p>
<p>è¯•éªŒäº†ä¸€ç•ªç»“æœå‘ç°è¦ä½¿ HTTP ä»£ç†èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œsocks5 ä»£ç†ç›‘å¬åœ°å€å¿…é¡»æ˜¯ <code>localhost</code>â€¦ ğŸ¤ª</p>
<p>å› ä¸ºæˆ‘çš„ Linux å¼€å‘ç¯å¢ƒæ˜¯æ­å»ºåœ¨è™šæ‹Ÿæœºé‡Œå¹¶é€šè¿‡ X11 è½¬å‘åˆ°å®¿ä¸»æœºçš„ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨æ¥è‡ª LAN çš„è¿æ¥ä¼šä¸¥é‡å½±å“å¼€å‘æ•ˆç‡ã€‚</p>
<h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><ol>
<li>è‡ªå·±å†™ä¸€ä¸ª tcp socket è¿è¡Œåœ¨å®¿ä¸»æœºä¸Šï¼Œå¹¶ç›‘å¬ <code>INETADDR_ANY</code>ï¼ŒMint æŠŠè½¬å‘å™¨ä½œä¸ºä»£ç†</li>
<li>ç”¨ netcat å®ç°</li>
<li>æ‰¾å…¶ä»–æ›¿ä»£å“</li>
</ol>
<p>å…ˆè€ƒè™‘ (1)ï¼Œç„¶è€Œå‘ç° netcat å¯ä»¥å®ç°å•æ¬¡è¿æ¥è½¬å‘ï¼Œä½†æ˜¯åç»­çš„åŒä¸€ä¸ªè¿æ¥çš„é€šä¿¡ä¼šç›´æ¥ hang ä½ï¼Œå¯èƒ½å“ªé‡Œå§¿åŠ¿ä¸å¯¹</p>
<p>å†è€ƒè™‘ (2)ï¼Œå‘ç°å¯ä»¥ç”¨ socatã€‚</p>
<p>WSL é‡Œé€šè¿‡ apt å®‰è£…ï¼Œç„¶å</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">socat tcp<span class="_">-l</span>:10086,fork,reuseaddr tcp:127.0.0.1:10081</span><br></pre></td></tr></table></figure>
<p>Mint æŠŠå®¿ä¸»æœºçš„ 10086 ç«¯å£ä½œä¸ºä»£ç†ç«¯å£</p>
<p>å—¯ï¼Œå‘ç°å·¥ä½œéå¸¸é¡ºç•…â€¦</p>
<p>è¿™æ ·å°±ä¸ç”¨è€ƒè™‘ (3) äº†ï¼Œä¸ç„¶å“ªæ€•ç”¨ ASIO ä¹Ÿå·®ä¸å¤šè¦ç™¾æ¥è¡Œä»£ç ã€‚</p>

        
      
    </div>

    

    

  </article>

    
  </section>

  
  <nav class="pagination">
    
    
      <a class="next" href="/page/2/">
        <span class="next-text">ä¸‹ä¸€é¡µ</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>


          </div>
          

        </div>
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:your@email.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    
    
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>


<div class="copyright">
  <span class="power-by">
    ç”± <a class="hexo-link" href="https://hexo.io/">Hexo</a> å¼ºåŠ›é©±åŠ¨
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    ä¸»é¢˜ - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2015 - 
    
    2020

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Kingsley Chen</span>
  </span>
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    


    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  


    <script type="text/javascript" src="/js/src/even.js?v=2.6.0"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.6.0"></script>

  </body>
</html>
