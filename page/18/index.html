<!DOCTYPE html>
<html lang="default">
  <head><meta name="generator" content="Hexo 3.9.0">
    
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">

<meta name="theme-color" content="#f8f5ec">
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">



  <meta name="description" content="Gone with the ruins">













  <link rel="alternate" href="/atom.xml" title="KCçš„åºŸå¢Ÿå †">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.6.0">



<link rel="canonical" href="http://kingsamchen.github.io/page/18/">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.6.0">






  



  









    <title> KCçš„åºŸå¢Ÿå † </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">KCçš„åºŸå¢Ÿå †</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            é¦–é¡µ
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            å½’æ¡£
          
        </li>
      </a>
    
      <a href="/friends/">
        <li class="mobile-menu-item">
          
          
            Friends
          
        </li>
      </a>
    
      <a href="/about">
        <li class="mobile-menu-item">
          
          
            å…³äº
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">KCçš„åºŸå¢Ÿå †</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              é¦–é¡µ
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              å½’æ¡£
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/friends/">
            
            
              Friends
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/about">
            
            
              å…³äº
            
          </a>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  <section id="posts" class="posts">
    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2017/01/11/automatically-convert-non-capturing-lambdas-to-normal-function-pointers/">è‡ªåŠ¨å°† non-capturing lambda è½¬æ¢ä¸ºå‡½æ•°æŒ‡é’ˆ</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2017-01-11
        </span>
        
          <div class="post-category">
            
              <a href="/categories/PROGRAMMING/">PROGRAMMING</a>
            
          </div>
        
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p>åœ¨å¼€å‘æŸç§‘å­¦çš„ç›´æ’­å§¬çš„è¿‡ç¨‹ä¸­ï¼Œç»å¸¸éœ€è¦åœ¨ obs-studio å¤„ç†æºä¹‹åç´§æ¥ç€åšä¸€äº›äº‹æƒ…ï¼Œä¾‹å¦‚é’ˆå¯¹å¤§å›¾ç‰‡æºåšè‡ªåŠ¨æ”¾ç¼©ç­‰ã€‚</p>
<p>obs-studio é‡‡ç”¨ä¸€ä¸ªä¸“æœ‰çš„ graphics rendering thread æ¥æ¸²æŸ“å„ç§ visualizable sourcesï¼Œå¹¶ä¸”å…è®¸ä½ æ ¹æ®éœ€æ±‚ï¼Œæ³¨å†Œå„ç§åº•å±‚æºæ“ä½œäº‹ä»¶çš„å›è°ƒå‡½æ•°ï¼ˆobs-studio è‡ªå·±ç§°ä¹‹ä¸º signal handlerï¼‰ã€‚</p>
<p>æˆ‘åœ¨ obs signal handler ä¹‹ä¸Šï¼Œåˆ©ç”¨ <code>std::function</code> æ„å»ºäº†ä¸€å±‚è‡ªå·±çš„ signal-handlerï¼Œå°†åŸå§‹çš„ obs äº‹ä»¶ç»è¿‡åˆç†è½¬æ¢åå¾—åˆ°è¯­ä¹‰æ›´åŠ æ˜ç¡®çš„ç›´æ’­å§¬ä¸“å±äº‹ä»¶ï¼Œå¹¶ä¸”é€šçŸ¥ä¸Šå±‚ã€‚</p>
<p>ä½†æ˜¯å‰é¢æåˆ°ï¼Œå„ç§æºæ“ä½œéƒ½æ˜¯åœ¨ obs ä¸“å±çš„æ¸²æŸ“çº¿ç¨‹ä¸Šå®Œæˆçš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å‘ obs æ³¨å†Œçš„ handler ä¹Ÿå¿…ç„¶è¿è¡Œåœ¨è¿™ä¸ªä¸“å±çº¿ç¨‹ä¸Šï¼›è¿™æ˜¾ç„¶ä¸æ˜¯ä¸€ä¸ªå¥½ç°è±¡ï¼Œå› ä¸ºåœ¨ç›´æ’­å§¬ç¨‹åºè¯­ä¹‰ä¸‹ï¼Œè¿™éƒ¨åˆ†æ“ä½œåº”å±äºæˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ UI çº¿ç¨‹ï¼Œå¹¶ä¸”ç”¨æˆ·å¯è§çš„ UI å…ƒç´ çš„æ“ä½œä¹Ÿå¿…é¡»åªèƒ½åœ¨ UI çº¿ç¨‹ä¸­å®Œæˆã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ signal è½¬æ¢çš„åŒæ—¶åˆ‡æ¢çº¿ç¨‹ï¼Œè®© <code>std::function</code> çš„è°ƒç”¨å‘ç”Ÿåœ¨æŒ‡å®šçš„çº¿ç¨‹ã€‚</p>
<p>äºæ˜¯è¿™é‡Œé‡åˆ°è¿™ä¸ª post è¦è§£å†³çš„é—®é¢˜ï¼šæˆ‘ä»¬ä½¿ç”¨ chromium base lib æ¥å®Œæˆå„ç§çº¿ç¨‹æ“ä½œï¼Œ<strong>ä½†æ˜¯ <code>base::Bind()</code> ä¸æ¥å— lambda ä½œä¸º currying çš„è½½ä½“</strong>ï¼Œå› ä¸ºè¿™å¥— lib æ˜¯åœ¨ C++ 11 æ ‡å‡†åŒ–ä¹‹å‰å°±å®ç°çš„ï¼Œå› æ­¤ chromium team å®ç°è¿™ä¸ªè½®å­çš„æ—¶å€™å¹¶æ²¡æœ‰è€ƒè™‘ C++ 11 çš„ lambda expressionsã€‚</p>
<p>æ–¹æ¡ˆ1ï¼šä½¿ç”¨ç‹¬ç«‹çš„å‡½æ•°æ¥äº§ç”Ÿ <code>base::Callback</code></p>
<p>ä¼˜ç‚¹æ˜¯ç›´è§‚æ˜ç¡®è€Œä¸”å¾ˆä¼ ç»Ÿä¸å®¹æ˜“å‡ºé”™ï¼›</p>
<p>ç¼ºç‚¹æ˜¯ï¼Œæ¯ä¸ªå‡½æ•°å¹³å‡åªæœ‰5è¡Œä¸åˆ°çš„ä»£ç ï¼ˆæ¯•ç«Ÿåªæ˜¯é€šè¿‡è°ƒç”¨ <code>std::function</code> åšä¸€ä¸ªè½¬å‘ï¼‰ï¼Œè€Œä¸”æˆ‘ä»¬è¦å†™å¤§é‡è¿™æ ·çš„å‡½æ•°ã€‚ã€‚ã€‚å¦å¤–ç”±äºè¿™äº›ç‹¬ç«‹çš„å‡½æ•°éƒ½æ”¾åˆ°äº†æºæ–‡ä»¶å¼€å¤´çš„ anonymous namespace é‡Œï¼Œé€ æˆé˜…è¯»ä»£ç æ—¶çš„ä¸Šä¸‹æ–‡å‰²è£‚ã€‚è¿™ä¹Ÿæ˜¯å½“åˆå¼•å…¥ lambda çš„ä¸€ä¸ªå¾ˆé‡è¦çš„åŸå› ã€‚</p>
<p>æ–¹æ¡ˆ2ï¼šä½¿ç”¨ non-capturing lambdaï¼Œä½†æ˜¯è‡ªå·±æ‰‹åŠ¨ cast åˆ°å‡½æ•°æŒ‡é’ˆ</p>
<p>ä¼˜ç‚¹æ˜¯åˆ©ç”¨ lambda æ¥é™åˆ¶äº†è¿™éƒ¨åˆ†â€œè½¬å‘â€å‡½æ•°çš„å¯è§æ€§ï¼›</p>
<p>ç¼ºç‚¹æ˜¯ï¼Œä¸ä»…ä¼šé€ æˆä¸Šä¸‹æ–‡å‰²è£‚ï¼Œè€Œä¸”æ‰‹åŠ¨ cast éå¸¸çš„ tediousã€‚</p>
<p>æ€ç´¢ç‰‡åˆ»åæˆ‘æ‰“ç®—è‡ªå·±å®ç°ä¸€ä¸ª <code>lambda_decay()</code>ï¼Œæ¥å°† non-capturing lambda è‡ªåŠ¨è½¬æ¢ä¸ºç­‰ä»·çš„å‡½æ•°æŒ‡é’ˆã€‚</p>
<p>å€ŸåŠ© template å’Œä¸€ä¸ª trick å¯ä»¥åšåˆ°å¦‚ä¸‹çš„æ•ˆæœ</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> lpfn = <span class="keyword">void</span>(*)(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp;);</span><br><span class="line"></span><br><span class="line"><span class="function">lpfn <span class="title">Foo</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> lambda_decay([](<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; s) &#123; <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; s &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>; &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> ptr = Foo();</span><br><span class="line">    ptr(<span class="string">"hello world"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å¯ä»¥ç›´æ¥å°† lambda â€œåµŒåˆ°â€ <code>base::Bind()</code> é‡Œï¼Œæå¤§æå‡å¹¸ç¦æ„Ÿã€‚</p>
<p>è¿™é‡Œè¯´ä¸¤ä¸ªæˆ‘å¹¶ä¸è®¤ä¸ºæ˜¯ç¼ºç‚¹çš„å±€é™æ€§ï¼š</p>
<ol>
<li>ä¸èƒ½ä½¿ç”¨åœ¨ capturing lambdas ä¸Šã€‚è¿™å…¶å®æ˜¯æˆ‘æ°å¥½éœ€è¦çš„ï¼Œå› ä¸º capturing lambda ä¼šæœ‰å„ç§å®‰å…¨éšæ‚£ï¼Œé…åˆ <code>base::Bind()</code> ä¸€ä¸ªä¸å°å¿ƒå°±å®¹æ˜“å‡ºå‘ï¼›å¦å¤–æˆ‘çš„ç›®çš„æœ¬æ¥å°±æ˜¯è½¬æ¢å¾—åˆ°èƒ½è¢« <code>base::Bind()</code> ä½¿ç”¨çš„ç­‰ä»·å‡½æ•°æŒ‡é’ˆï¼Œè€Œæ­£å¸¸æƒ…å†µä¸‹ä» non-capturing lambdas cast å¾—åˆ°ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆæ˜¯è‰¯å¥½å®šä¹‰çš„ååˆ†æ˜ç¡®çš„è¡Œä¸ºã€‚</li>
<li>ä¸èƒ½ä½¿ç”¨åœ¨ generic lambdas ä¸Šã€‚generic lambdas å¾ˆå¥½å¾ˆæœ‰ç”¨ï¼Œä½†æ˜¯å®ƒä¸æ˜¯é“¶å¼¹ï¼Œå°¤å…¶åœ¨é…åˆ <code>base::Bind()</code> ä½¿ç”¨çš„æƒ…å†µä¸‹ã€‚</li>
</ol>
<p>æ¥ä¸‹æ¥æ˜¯å®ç°æ–¹æ³•</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">dememberize</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> C, <span class="keyword">typename</span> R, <span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">dememberize</span>&lt;R(C::*)(Args...) const&gt; &#123;</span></span><br><span class="line">    <span class="keyword">using</span> type = R(*)(Args...);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">lambda_pointerize_impl</span> &#123;</span></span><br><span class="line">    <span class="keyword">using</span> type = <span class="keyword">typename</span> dememberize&lt;<span class="keyword">decltype</span>(&amp;T::<span class="keyword">operator</span>())&gt;::type;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">using</span> lambda_pointerize = <span class="keyword">typename</span> lambda_pointerize_impl&lt;T&gt;::type;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> F&gt;</span><br><span class="line">lambda_pointerize&lt;F&gt; lambda_decay(F lambda)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> lambda_pointerize&lt;F&gt;(lambda);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶å®å¦‚æœ VS 2013 æ”¯æŒ <code>constexpr</code> çš„è¯ï¼Œå…¶å®ç”¨èµ·æ¥ä¼šæ›´ä¼˜é›…ã€‚</p>
<p>å¦ï¼šæˆ‘å‘ç°è‹±æ–‡åœ¨è‡ªåˆ›å•è¯ä¸Šç®€ç›´å¤ªæœ‰æ„Ÿè§‰äº†ã€‚ã€‚ã€‚ã€‚</p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2017/01/04/monthly-read-posts-in-dec-2016/">Monthly Read Posts in Dec 2016</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2017-01-04
        </span>
        
          <div class="post-category">
            
              <a href="/categories/PROGRAMMING/">PROGRAMMING</a>
            
          </div>
        
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p><a href="http://ithare.com/c-performance-common-wisdoms-and-common-wisdoms/" target="_blank" rel="noopener">C++ Performance: Common Wisdoms and Common â€œWisdomsâ€</a></p>
<p>The post discusses some oftenly-argued performance related aspects of C++.</p>
<p>Topics/objects include:</p>
<ul>
<li>C++ Exceptions â€“ (Almost-)Zero-Cost until Thrown</li>
<li>Smart Pointers and STL: Allocations are Still Evil</li>
<li>Using boost:: â€“ Case by Case and Only If You Do Need It</li>
<li>Polymorphism â€“ Two-Fold Impact</li>
<li>RTTI â€“ Can be Easily Avoided Most of the Time</li>
<li>On Branch (mis)-Predictions and Pipeline Stalls</li>
<li>On inline asm and SSE</li>
<li>On inlines and force-inlines</li>
<li>On templates</li>
<li>On compiler flags</li>
<li>On Manual Loop Unrolling</li>
<li>â€œFor-freeâ€ Optimizations a.k.a. Avoiding Premature Pessimization</li>
</ul>
<p>All suggestion based on a fundamental pre-requisite: Three things Really Matter for performance.</p>
<p>The first one is Algorithm, the second one is your code being Non-Blocking, and the third one is Data Locality.</p>
<p>The rest of the tricks, while potentially useful, should be used only on case-by-case basis, when a bottleneck is identified. Otherwise it will be a Premature Optimisation.</p>
<p>Note: ä½œè€…æ˜¯ä¸€ä¸ªæ¸¸æˆå¼€å‘è€…ï¼Œä¸Šè¿°è§‚ç‚¹ä¹Ÿæ˜¯ç»“åˆæ¸¸æˆå¼€å‘é˜è¿°çš„ï¼Œå› æ­¤å¯¹ç›¸å½“ä¸€éƒ¨åˆ†é«˜æ€§èƒ½åº”ç”¨ä¹Ÿæœ‰å‚è€ƒæ„ä¹‰ã€‚</p>
<hr>
<p><a href="http://nvie.com/posts/iterators-vs-generators/" target="_blank" rel="noopener">Iterables vs. Iterators vs. Generators</a></p>
<p>Key points:</p>
<p>Anything that <strong>can return an iterator</strong> (usually via overriding <code>__iter__()</code>) is <em>iterable</em>.</p>
<p>Anything that <strong>can be iterated</strong> (usually via overriding <code>__next__()</code>, or overriding <code>next()</code> in python 2.x) is an <em>iterator</em>.</p>
<p>A generator is a <strong>special kind of iterator</strong>; it make you avoid writing <code>__netxt__()</code> and <code>__iter__()</code>.</p>
<p>Two types of generator:</p>
<ul>
<li>Generator function: A function with yield to return value, the return value of the functio call is a generator</li>
<li>Generator expression: A expression using comprehension-syntax</li>
</ul>
<p>Noteï¼šæœ‰ C++ STL èƒŒæ™¯åŸºæœ¬çœ‹è¿™ç§é—®é¢˜éƒ½ç§’æ‡‚â€¦</p>
<hr>
<p><a href="http://michael-j.net/2016/12/15/%E6%9E%B6%E6%9E%84%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BC%9A%E8%85%90%E5%8C%96/" target="_blank" rel="noopener">æ¶æ„ä¸ºä»€ä¹ˆä¼šè…åŒ–</a></p>
<p><strong>æ–‡ä¸­è§‚ç‚¹</strong></p>
<ul>
<li>ä¸ç†è§£é¡¹ç›®ä¸šåŠ¡ä»·å€¼ï¼Œå¯¹äºå®é™…éœ€æ±‚æŠŠæ¡ä¸æ˜ç¡®</li>
<li>è¿‡åº¦è®¾è®¡ï¼Œå¯¼è‡´æ‰©å±•æ€§å·®</li>
<li>æ‡’äºé‡æ„</li>
</ul>
<p><strong>ä¸ªäººè§‚ç‚¹</strong></p>
<ul>
<li>æ˜ç¡®/ç†è§£éœ€æ±‚æ˜¯ç¬¬ä¸€ä½</li>
<li>è¿‡åº¦è®¾è®¡å¯¼è‡´æ‰©å±•æ€§å·®å­˜ç–‘ï¼Œå®é™…ä¸Šè¿‡åº¦è®¾è®¡å¾€å¾€æ¥æºäºéœ€æ±‚æŠŠæ¡ä¸å‡†</li>
<li>åˆå§‹æ¶æ„è®¾è®¡å¾ˆé‡è¦ï¼Œå¯¹é¡¹ç›®é¢†å¯¼è€…è¦æ±‚è¾ƒé«˜</li>
<li>é‡æ„å¯å‚è€ƒæœ€å°æ»‘å¡åŸåˆ™ï¼ˆæ¯æ¬¡ç¦»å¼€ä¸€æ®µä»£ç ï¼Œä»£ç éƒ½è¦æ¯”åˆšæ¥æ‰‹æ—¶æ›´æ¸…æ™°æ•´æ´ï¼‰</li>
</ul>
<hr>
<p><a href="https://akrzemi1.wordpress.com/2016/06/29/competing-constructors/" target="_blank" rel="noopener">Competing constructors</a></p>
<p>Competing constructor: two constructors that would take the same sequence of arguments (if one is somehow made invisible), but also that they do different, incompatible things.</p>
<p>Main observations:</p>
<ul>
<li>Competing functions complicate resolution for human beings</li>
<li>Donâ€™t write competing constructors, or even competing functions.</li>
<li>Take care of class template function, one instantiation may turn into a competing function.</li>
<li>Use tag with overload function can benefit from more clearer semantics</li>
</ul>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2016/12/18/using-urlrequest-from-chromium-net-lib-to-implement-a-resumable-urldownloader/">åˆ©ç”¨ chromium net åº“çš„ URLRequest å®ç°æ”¯æŒæ–­ç‚¹ç»­ä¼ çš„ URLDownloader</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-12-18
        </span>
        
          <div class="post-category">
            
              <a href="/categories/PROGRAMMING/">PROGRAMMING</a>
            
          </div>
        
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p>æœ€è¿‘å› ä¸ºè¦å®ç°æŸç›´æ’­å§¬çš„è‡ªåŠ¨æ›´æ–°åŠŸèƒ½ï¼Œäºæ˜¯å°±è¦æ±‚å®¢æˆ·ç«¯èƒ½å¤Ÿè‡ªåŠ¨ä¸‹è½½å®‰è£…åŒ…ï¼Œæ‰€ä»¥å°±è¦å®ç°ä¸€ä¸ªç®€å•çš„æ”¯æŒç»­ä¼ çš„ä¸‹è½½åŠŸèƒ½ã€‚</p>
<p>å› ä¸ºç”¨äº† chromium çš„æ¡†æ¶ï¼Œæ‰€ä»¥è‡ªç„¶æ˜¯åŸºäº chromium net lib å»å®ç°ï¼›ç¨å¾®ç¿»äº†ä¸€ä¸‹æºç ç›®å½•ï¼Œæœ€åå†³å®šåœ¨ <code>net::URLRequest</code> çš„åŸºç¡€ä¸Šè‡ªå·±å°è£…ä¸€ä¸ª <code>URLDownloader</code>ã€‚</p>
<p>è™½ç„¶ä¹‹å‰æŸè±¹æµè§ˆå™¨ä¹Ÿæœ‰æ¶æ„é­”æ”¹è¿‡çš„ä¸‹è½½ï¼Œä½†æ˜¯ç›¸å…³åŠŸèƒ½ä¸€ç›´å’Œæˆ‘æ²¡å…³ç³»ï¼Œæ‰€ä»¥è¿™æ¬¡åŸºæœ¬ç®—æ˜¯ from scratchï¼ŒæœŸé—´ä¹Ÿå› ä¸ºèµ„æ–™æ–‡æ¡£åŸºæœ¬æ²¡æœ‰ï¼Œç»•äº†ä¸€äº›å¼¯è·¯ï¼Œå…¨é ä¸€è¾¹çœ‹æºç ä¸€éè‡ªå·±é€šè¿‡demoè°ƒè¯•å»å­¦ä¹ â€¦</p>
<p>ä¸ºäº†æ–¹ä¾¿å¯èƒ½çš„åæ¥äººï¼Œè¿™é‡Œç¨ä½œè®°å½•ã€‚</p>
<p>å®Œæ•´çš„demoæºç å¯ä»¥çœ‹è¿™é‡Œï¼š<a href="https://github.com/kingsamchen/Eureka/tree/master/SimpleDownloader" target="_blank" rel="noopener">SimpleDownloader</a></p>
<p>æŠŠ <code>URLDownloader</code> çš„å¤´æ–‡ä»¶å•ç‹¬æ‘˜å‡ºæ¥</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> DOWNLOADER_URL_DOWNLOADER_H_</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DOWNLOADER_URL_DOWNLOADER_H_</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"base/basictypes.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"base/files/file_path.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"base/memory/ref_counted.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"base/threading/thread_checker.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"net/base/io_buffer.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"net/url_request/url_request.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"net/url_request/url_request_context.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"url/gurl.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> downloader &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// The user of URLDownloader must ensure that the construction and operations of an URLDownloader</span></span><br><span class="line"><span class="comment">// instance are performed on a same thread.</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">URLDownloader</span> :</span> <span class="keyword">public</span> net::URLRequest::Delegate &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">CompleteCallback</span> &#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="keyword">virtual</span> ~CompleteCallback() &#123;&#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnDownloadSuccess</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">OnDownloadFailure</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// The caller of this constructor must make sure:</span></span><br><span class="line">    <span class="comment">// - `save_path` is writable;</span></span><br><span class="line">    <span class="comment">// - the object `callback` refers to is alive during the entire lifecycle of URLDownloader, since</span></span><br><span class="line">    <span class="comment">//   the class itself doesn't acquire the ownership for the `callback`.</span></span><br><span class="line">    URLDownloader(<span class="keyword">const</span> GURL&amp; url, <span class="keyword">const</span> base::FilePath&amp; save_path, CompleteCallback* callback);</span><br><span class="line"></span><br><span class="line">    ~URLDownloader() = <span class="keyword">default</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Starts or resumes the download.</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Stops the download.</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Stop</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">OnResponseStarted</span><span class="params">(net::URLRequest* request)</span> override</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">OnReadCompleted</span><span class="params">(net::URLRequest* request, <span class="keyword">int</span> bytes_read)</span> override</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Saves received network data (stored in `buf_`) to disk write cache, and writes to disk</span></span><br><span class="line">    <span class="comment">// if necessary.</span></span><br><span class="line">    <span class="comment">// It is legal to call this function with 0 passed in as `bytes_received`, when you want to</span></span><br><span class="line">    <span class="comment">// force flushing cache to disk.</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">SaveReceivedChunk</span><span class="params">(<span class="keyword">int</span> bytes_received, <span class="keyword">bool</span> force_write_to_disk)</span></span>;</span><br><span class="line"></span><br><span class="line">    DISALLOW_COPY_AND_ASSIGN(URLDownloader);</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    GURL url_;</span><br><span class="line">    base::FilePath save_path_;</span><br><span class="line">    base::FilePath tmp_save_path_;</span><br><span class="line">    CompleteCallback* complete_callback_;</span><br><span class="line">    <span class="keyword">size_t</span> downloaded_bytes_;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt; disk_write_cache_;</span><br><span class="line">    scoped_refptr&lt;net::IOBuffer&gt; buf_;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">unique_ptr</span>&lt;net::URLRequestContext&gt; request_context_;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">unique_ptr</span>&lt;net::URLRequest&gt; request_;</span><br><span class="line">    base::ThreadChecker thread_checker_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&#125;   <span class="comment">// namespace bililive</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span>  <span class="comment">// DOWNLOADER_URL_DOWNLOADER_H_</span></span></span><br></pre></td></tr></table></figure>
<p>æ ¸å¿ƒåªæœ‰å››ä¸ªå‡½æ•°ï¼š<code>URLRequest::Start()</code>, <code>OnResponseStarted()</code>, <code>URLRequest::Read()</code>ï¼Œå’Œ <code>OnReadCompleted()</code>ã€‚</p>
<p>è¿™å››ä¸ªå‡½æ•°çš„ interactions å¤§æ¦‚å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>Start()</code> æ‰§è¡Œåå†…éƒ¨ä¼šè°ƒç”¨ <code>OnResponseStarted()</code></li>
<li>åœ¨ <code>OnResponseStarted()</code> ä¸­ï¼Œå¦‚æœ request å’Œ response çš„é€šä¿¡éƒ½æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œåˆ™è¦ç”¨ <code>Read()</code> è¯»å–æ¥æ”¶åˆ°çš„ç½‘ç»œ IO æ•°æ®ï¼Œæ¥ç€è°ƒç”¨ <code>OnReadCompleted()</code> åˆ‡æ¢çŠ¶æ€ï¼›è¿™ä¸ªæ­¥éª¤ç§°ä¹‹ä¸º initial reading</li>
<li>åœ¨ <code>OnReadCompleted()</code> ä¸­ï¼Œåå¤åˆ©ç”¨ <code>Read()</code> è¯»å–ç½‘ç»œæ•°æ®</li>
</ul>
<p><code>Read()</code> å’Œ <code>OnReadCompleted()</code> ä¹‹é—´æœ‰ä¸€ä¸ªå®¹æ˜“è¢«å¿½ç•¥çš„ç»†èŠ‚ï¼š åˆ©ç”¨ <code>Read()</code> ä»è¯»å–ç½‘ç»œ IO æ•°æ®æ—¶</p>
<ol>
<li>å¦‚æœæ•°æ®ç«‹å³å¯ç”¨ï¼Œåˆ™ <code>Read()</code> ä¼šæ­£å¸¸è¯»å–æ•°æ®</li>
<li>å¦‚æœæ•°æ®å½“å‰ä¸å¯ç”¨ï¼Œåˆ™ä¼šè§¦å‘ asynchronous readingï¼Œä½†æ˜¯ <code>Read()</code> å‡½æ•°ä¼šé©¬ä¸Šè¿”å›ï¼›ç­‰åˆ°åº•å±‚è·å–åˆ° IO æ•°æ®åï¼Œå†…éƒ¨è‡ªå·±ä¼šè°ƒç”¨ <code>OnReadCompleted()</code></li>
</ol>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜è¦æ³¨æ„ <code>URLRequest</code> å¯¹è±¡çš„<strong>æ„é€ å’Œæ“ä½œ</strong>å¿…é¡»åœ¨åŒä¸€ä¸ªçº¿ç¨‹ã€‚</p>
<p>è‡³äºç»­ä¼ ï¼Œæœ¬è´¨å°±æ˜¯åˆ©ç”¨äº† HTTP request header çš„ rangeï¼Œå…·ä½“è¯·å‚è€ƒä»£ç ã€‚</p>
<p>æœ€åè¯´ä¸€å¥ï¼Œå¦‚æœä½ çš„ç›®çš„æ˜¯å®ç°ä¸€å¥—å’ŒæœåŠ¡ç«¯ RESTFul API é€šä¿¡çš„è®¾æ–½ï¼Œé‚£ä¹ˆç›´æ¥ä½¿ç”¨ <code>net::URLFetcher</code> æ˜¯ä¸ªæ›´å¥½çš„é€‰æ‹©ï¼›å› ä¸ºåè€…æ˜¯åœ¨ <code>net::URLRequest</code> åŸºç¡€ä¹‹ä¸Šé’ˆå¯¹å­—ç¬¦å¤„ç†åŠ çš„ä¸€ä¸ªwrapperï¼Œå±è”½äº†å…·ä½“çš„ IO data read ç»†èŠ‚ã€‚</p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2016/12/04/monthly-read-posts-in-nov-2016/">Monthly Read Posts in Nov 2016</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-12-04
        </span>
        
          <div class="post-category">
            
              <a href="/categories/PROGRAMMING/">PROGRAMMING</a>
            
          </div>
        
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p><a href="http://eli.thegreenplace.net/2011/09/06/stack-frame-layout-on-x86-64" target="_blank" rel="noopener">Stack Frame Layout on X86-64</a></p>
<p><strong>Main observations</strong></p>
<p>For AMD64 X64 ABI compiliant platforms (such as Linux), the major changes include:</p>
<ul>
<li>Introduces a red-zone storage area on the stack</li>
<li>Officially makes frame pointer explicitly optional</li>
</ul>
<p>For Windows X64 ABI(though depictated in supplementary):</p>
<ul>
<li>No red-zone; instead, a pre-allocated home-space is enforced for every function call</li>
<li>Cleanup of old calling convention legacy; no more worry about cdecl/fastcall/stdcall etc.</li>
</ul>
<p><a href="http://www.golgi.io/security-ssl-tls/" target="_blank" rel="noopener">Understanding Security in IoT: SSL/TLS</a><br><a href="http://insights.thoughtworkers.org/talk-about-https/" target="_blank" rel="noopener">æˆ‘ä¹Ÿæƒ³æ¥è°ˆè°ˆHTTPS</a></p>
<p><strong>Why HTTPS</strong></p>
<p>Why HTTP is not secure?</p>
<p>Because it transports information in plain text and with no anti-eavesdroping protection.</p>
<p><strong>How does it work</strong></p>
<p>After TCP connection is established, the client and server will futher start TLS/SSL handshake:</p>
<ol>
<li>Client-Hello</li>
<li>Server-Hello</li>
<li>Authentication and Key Exchange</li>
<li>Server-Finish</li>
<li>Client-Finish</li>
</ol>
<p><strong>Extra Bonus</strong></p>
<p>How to use openssl for https.</p>
<p>å¸§å“¥åœ¨ä»–çš„<a href="http://blog.syscallx.com" target="_blank" rel="noopener">æŠ€æœ¯åšå®¢åˆ†ç«™</a>ä¸Šæœ‰ä¸‰ç¯‡å’Œ TLS/SSL åè®®å®ç°ç›¸å…³çš„ postsï¼Œå¯ä»¥æ”¾åˆ°ä¸‹ä¸ªæœˆçš„ reading list é‡Œ</p>
<p><a href="http://thereignn.ghost.io/on-dry-and-the-cost-of-wrongful-abstractions/" target="_blank" rel="noopener">ON DRY AND THE COST OF WRONGFUL ABSTRACTIONS</a></p>
<p><strong>Insight</strong></p>
<p>Duplicating code sometimes can be a good thing (when the cost imposed by abstractions is too high); namely, context matters.</p>
<p><strong>Reasons</strong></p>
<p>Programmers spend far more time reading code (to understand logic behind) than writing code.</p>
<p>Abstractions cut both ways: every abstraction comes at a cost.</p>
<p>Every abstraction imposes an extra layer of knowledge, which places cognitive load on brain, and in turn, increases the time spent on understanding that piece of code.</p>
<p>In some extreme cases(everything is encapsulated in abstractions), the abstraction lost its value, and became a wrongful one.</p>
<p><strong>Conclusion</strong></p>
<p>Always abstract if the cost of abstraction does not surpass the cost of duplicating code.</p>
<p>But, itâ€™s just hard to get it right in real practice.</p>
<p><strong>Extra Comments</strong></p>
<p>ä¹‹å‰çœ‹è¿‡ä¸€ç¯‡ç±»ä¼¼çš„ postï¼Œæ ‡é¢˜å¤§æ¦‚æ˜¯ <em>dependency versus redundancy</em>ï¼Œå°è±¡ä¸­é‡Œé¢å™è¿°çš„è§‚ç‚¹æ¯”è¿™è¾¹æ›´åŠ çš„å…·ä½“ã€‚</p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2016/11/20/disable-crash-fast-in-debug-mode-due-to-invalid-parameters-when-using-breakpad/">é¿å…ä½¿ç”¨ breakpad æ—¶è°ƒè¯•æ¨¡å¼ä¸‹æŸäº›é”™è¯¯è·³è¿‡è°ƒè¯•å™¨è‡ªåŠ¨å¼•å‘å´©æºƒå¤„ç†</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-11-20
        </span>
        
          <div class="post-category">
            
              <a href="/categories/PROGRAMMING/">PROGRAMMING</a>
            
          </div>
        
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <h3 id="ç°è±¡"><a href="#ç°è±¡" class="headerlink" title="ç°è±¡"></a>ç°è±¡</h3><p>æŸä¸ªå°æœ‹å‹ï¼ˆè™½ç„¶å’Œæˆ‘åŒå¹´åŒå±Šâ€¦ï¼‰å†™ä»£ç æ—¶ä¸æ³¨æ„ï¼Œå‡ºç°æœªçŸ¥é”™è¯¯ï¼Œä½†æ˜¯å³ä½¿è°ƒè¯•å™¨å¯ç”¨æ‰€æœ‰æ–­ç‚¹é€‰é¡¹ï¼Œä¹Ÿå¹¶æ²¡æœ‰æ–­åœ¨å‡ºç°é”™è¯¯çš„åœ°æ–¹ï¼Œè€Œæ˜¯ç›´æ¥è¿›å…¥äº†æˆ‘å†™çš„ crash handlerã€‚</p>
<h3 id="åˆ†æè¿‡ç¨‹"><a href="#åˆ†æè¿‡ç¨‹" class="headerlink" title="åˆ†æè¿‡ç¨‹"></a>åˆ†æè¿‡ç¨‹</h3><p>åœ¨è°ƒç”¨ä¼šå‡ºç°é”™è¯¯çš„å‡½æ•°å‰åŠ å…¥</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*<span class="keyword">static_cast</span>&lt;<span class="keyword">int</span>*&gt;(<span class="number">0x0</span>) = <span class="number">0xDEADBEEF</span>;</span><br></pre></td></tr></table></figure>
<p>è°ƒè¯•è¿è¡Œï¼Œdebugger æˆåŠŸæ–­ä¸‹ï¼›è¯´æ˜ç›¸å…³åŠŸèƒ½å‡æ­£å¸¸ï¼Œé—®é¢˜åº”è¯¥åªå’Œè¯¥å‡½æ•°äº§ç”Ÿçš„é”™è¯¯æœ‰å…³ã€‚</p>
<p>æ‰“å¼€ crash handler ç”Ÿæˆçš„ dump æ–‡ä»¶ï¼Œè®¾ç½®ç¬¦å·è¡¨ï¼Œå‘ç°é”™è¯¯å‘ç”ŸåŸå› æ˜¯ï¼š <code>vector::operator[]</code> è®¿é—®ä¸‹æ ‡è¶Šç•Œï¼Œä½†æ˜¯è¯¥é”™è¯¯ç›´æ¥è§¦å‘ crash handler</p>
<h3 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><p>å»æ‰ client å®‰è£… crash handler å‰çš„</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_CrtSetReportMode(_CRT_ASSERT, <span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p>å³å¯è§£å†³é—®é¢˜ã€‚</p>
<h3 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h3><p>å› ä¸ºæ ‡å‡†è§„å®š <code>vector::operator[]</code> æ“ä½œä¸åš bounds checkingï¼Œæœ‰é—®é¢˜æƒ…å†µä¸‹ç›´æ¥å¯¼è‡´ undefined behaviorï¼›MSVC ä¸ºäº†æ›´å¿«è¯Šæ–­é—®é¢˜ï¼ŒDebug æ¨¡å¼ä¸‹ä¼šå¯¹è¿™ä¸ªæ“ä½œè¿›è¡Œ CRT ASSERTã€‚</p>
<p>è€Œ <code>_CrtSetReportMode()</code> å±è”½äº† CRT ASSERTï¼Œæ‰€ä»¥ç›´æ¥è¿›å…¥äº† crash handlerã€‚</p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2016/11/19/recommend-csapp-3e-course-video-and-bomb-lab/">æ¨è CSAPP:3e è¯¾ç¨‹è§†é¢‘ä»¥åŠ Bomb Lab</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-11-19
        </span>
        
          <div class="post-category">
            
              <a href="/categories/PROGRAMMING/">PROGRAMMING</a>
            
          </div>
        
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p>ç»è¿‡å·®ä¸å¤š 7 å¹´æ—¶é—´ï¼ˆ2008 ~ 2015ï¼‰ï¼ŒCSAPP ç»ˆäºå‡ºäº† 3rd editionï¼›æ ¹æ®å®˜æ–¹çš„ changelogï¼Œæ–°ç‰ˆå…¨é¢ç”¨ x64 çš„ä½“ç³»ç»“æ„å»æ›¿ä»£äº†æ—§ç‰ˆçš„ ia-32ã€‚</p>
<p>ä¸ç®¡æ‰‹å¤´æœ‰æ²¡æœ‰ç¬¬ä¸‰ç‰ˆçš„ä¹¦ï¼ˆè®²é“ç†å…¶å®æŒºè´µçš„ï¼Œæœºå·¥çš„ç¿»è¯‘ç‰ˆ 2016/12 ä¼šå‘è¡Œï¼Œä½†æ˜¯ä¸çŸ¥é“è‹±æ–‡ç‰ˆ/å½±å°ç‰ˆä»€ä¹ˆæ—¶å€™å‘ï¼‰ï¼Œè¯¾ç¨‹çš„åœ¨çº¿è§†é¢‘éƒ½æ˜¯å¾ˆå¥½çš„ä¸€ä¸ªè¡¥å……æ‰‹æ®µã€‚</p>
<p>è§†é¢‘åœ°å€ï¼š<a href="https://scs.hosted.panopto.com/Panopto/Pages/Sessions/List.aspx#folderID=%22b96d90ae-9871-4fae-91e2-b1627b43e25e%22&amp;maxResults=10&amp;folderQuery=%22introduction%20to%20computer%20system%22&amp;page=3" target="_blank" rel="noopener">csapp:3e coruse videos</a></p>
<p><strong>æ¸©é¦¨æç¤ºï¼šéœ€è¦æ¢¯å­ éœ€è¦æ¢¯å­ éœ€è¦æ¢¯å­</strong></p>
<p>å¦å¤–é¡ºæ‰‹å¼ºçƒˆå»ºè®®å°è¯•ä¸€ä¸‹è¯¾ç¨‹æä¾›çš„ labsï¼Œä¾‹å¦‚å‰ä¸¤å¤©åœ¨ç©çš„ bomb labï¼Œç®€ç›´æ˜¯ä¸“é—¨é‡èº«ä¸º chapter 3 ç›¸å…³å†…å®¹å®šåˆ¶çš„ï¼Œå¯ä»¥è¿…é€Ÿå¸®åŠ©å­¦ä¹ è€…ç†Ÿæ‚‰æ±‡ç¼–å’Œæœ€åŸºæœ¬çš„é€†å‘çŸ¥è¯†ã€‚</p>
<p>ä¸æ­¤å½¢æˆå¼ºçƒˆåå·®çš„æ˜¯å›½å†…é«˜æ ¡çš„è¯¾ç¨‹å’Œè®­ç»ƒæ–¹å¼ï¼Œç®€ç›´ä½•åšé“§ã€‚</p>
<p>labs åœ°å€ï¼š<a href="http://csapp.cs.cmu.edu/3e/labs.html" target="_blank" rel="noopener">csapp:3e labs</a></p>
<p><strong>ï¼ˆå†æ¬¡ï¼‰æ¸©é¦¨æç¤ºï¼šéœ€è¦æ¢¯å­ éœ€è¦æ¢¯å­ éœ€è¦æ¢¯å­</strong></p>
<p>æœ€åè´´ä¸€å¼  bomb lab é€šå…³æˆªå›¾</p>
<p><img src="/img/csapp_bomb_lab.png" alt></p>
<p>ï¼ˆè‡ªç™½ï¼šå‰å››å…³æˆ‘çœŸçš„æ˜¯éå¸¸è®¤çœŸçš„ç©çš„ï¼Œåé¢ä¸¤å…³å®åœ¨å¤ªé•¿äº†ï¼Œ<code>disas</code> å‡ºæ¥çš„å†…å®¹éƒ½è¦å¥½æœºå±å¹•æ‰èƒ½æ˜¾ç¤ºå®Œï¼Œå®åœ¨æ²¡è€å¿ƒäº†å°±ç›´æ¥â€œçœ¼ç®—æ ˆå¹³è¡¡ï¼Œæ‰‹æ”¹RIPâ€ç»™è¿‡å»äº†â€¦</p>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2016/10/03/install-ycm-plugin-on-WSL/">åœ¨ WSL çš„ VIM é‡Œå®‰è£… YCM</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-10-03
        </span>
        
          <div class="post-category">
            
              <a href="/categories/PROGRAMMING/">PROGRAMMING</a>
            
          </div>
        
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <p>æ³¨ 1ï¼šæ­¤å¤„çš„ WSL æŒ‡çš„æ˜¯ <em>Windows Subsytem for Linux</em>ï¼Œä¸æ˜¯â€œçŒ¥çæµâ€</p>
<p>æ³¨ 2ï¼šå¦‚æœæ˜¯åœ¨ä¸­å›½å¹¶ä¸”æ²¡æœ‰ä¸“ç”¨çš„å…¨å±€ç§‘å­¦ä¸Šç½‘çº¿è·¯ï¼ˆæ¯”å¦‚åœ¨è‡ªå·±å®¶é‡Œï¼‰ï¼Œå»ºè®®æ‰¾ä¸€ä¸ªç±»ä¼¼ SS çš„æ¢¯å­ï¼Œè®© WSL é‡Œçš„ç½‘ç»œæ“ä½œèµ°ä»£ç†ï¼Œæé«˜é€Ÿåº¦ï¼Œé¿å…å› ä¸ºæŸäº›è¿æ¥è¢«å’Œè°å¯¼è‡´æ‚²å‰§å‘ç”Ÿã€‚</p>
<p>å¦‚æœæœ‰ SSï¼Œé‚£ä¹ˆè¿›å…¥ WSL åæ‰§è¡Œå‘½ä»¤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export http_proxy=http://127.0.0.1:1080</span><br><span class="line">export https_proxy=http://127.0.0.1:1080</span><br></pre></td></tr></table></figure>
<p>å¯¹å½“å‰ç”¨æˆ·è®¾ç½®ä»£ç†ã€‚</p>
<p>å¦‚æœéœ€è¦ä½¿ç”¨ apt-get æ“ä½œï¼Œé‚£ä¹ˆéœ€è¦é¦–å…ˆ <code>su</code> è¿›å…¥ root è´¦æˆ·ï¼Œåœ¨ root ä¸‹è®¾ç½®ä»£ç†ã€‚</p>
<p>æ­¤å¤„è®¾ç½®çš„ç¯å¢ƒå˜é‡åœ¨æŸä¸ª terminal é€€å‡ºåè‡ªåŠ¨é”€æ¯ï¼Œä¸‹æ¬¡è¿›å…¥ terminal éœ€è¦é‡å¤è®¾ç½®ã€‚å¦‚æœä½ çš„ä»£ç†éå¸¸ç¨³å®šéå¸¸å¿«ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘æ”¹å†™ profileï¼Œé¿å…æ¯æ¬¡æ‰‹è¾“ã€‚</p>
<p><em><strong>Special thanks to @xqq here</strong></em></p>
<h3 id="æ›´æ–°è‡ªå¸¦çš„-VIM"><a href="#æ›´æ–°è‡ªå¸¦çš„-VIM" class="headerlink" title="æ›´æ–°è‡ªå¸¦çš„ VIM"></a>æ›´æ–°è‡ªå¸¦çš„ VIM</h3><p>å› ä¸º WSL é‡Œçš„ ubuntu æ˜¯ 14.04 LTSï¼Œå› æ­¤é‡Œé¢é™„å¸¦çš„ vim å¹¶ä¸æ»¡è¶³<strong>æœ€æ–°</strong>çš„ YCM çš„æœ€ä½ç‰ˆæœ¬è¦æ±‚ï¼Œå¦‚æœä¸å‡çº§ä¼šå‡ºç° ycm å·¥ä½œå¼‚å¸¸ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:pkg-vim/vim-daily</span><br><span class="line">sudo apt-get update &amp;&amp; sudo apt-get upgrade</span><br></pre></td></tr></table></figure>
<h3 id="å®‰è£…æ„å»ºåŸºç¡€ä¾èµ–"><a href="#å®‰è£…æ„å»ºåŸºç¡€ä¾èµ–" class="headerlink" title="å®‰è£…æ„å»ºåŸºç¡€ä¾èµ–"></a>å®‰è£…æ„å»ºåŸºç¡€ä¾èµ–</h3><p>ä¸»è¦åŒ…æ‹¬ï¼šCMake å’Œ python-dev packages</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install build-essential cmake</span><br><span class="line">sudo apt-get install python-dev python3-dev</span><br></pre></td></tr></table></figure>
<h3 id="å®‰è£…-VIM-æ’ä»¶ç®¡ç†å™¨-Vundle"><a href="#å®‰è£…-VIM-æ’ä»¶ç®¡ç†å™¨-Vundle" class="headerlink" title="å®‰è£… VIM æ’ä»¶ç®¡ç†å™¨ Vundle"></a>å®‰è£… VIM æ’ä»¶ç®¡ç†å™¨ Vundle</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim</span><br></pre></td></tr></table></figure>
<p>æ’ä»¶è®¾ç½®å‚è€ƒ <a href="https://github.com/VundleVim/Vundle.vim" target="_blank" rel="noopener">è¿™é‡Œ</a></p>
<h3 id="å®‰è£…-YCM"><a href="#å®‰è£…-YCM" class="headerlink" title="å®‰è£… YCM"></a>å®‰è£… YCM</h3><p>è™½ç„¶æˆ‘ä»¬å®‰è£…äº† vundleï¼Œä½†æ˜¯æˆ‘ä»¬ä¸ä¼šç›´æ¥é€šè¿‡ vundle è£… ycmï¼Œå› ä¸ºå¤ªæ…¢äº†ã€‚</p>
<p>å½“ç„¶å¦‚æœä½ åœ¨å›½å¤–æˆ–è€…æœ‰ç§‘å­¦ä¸Šç½‘ä¸“çº¿ï¼Œé‚£å°±æ— æ‰€è°“äº†â€¦ä¸è¿‡è°è®©æˆ‘ä»¬æ˜¯ç©·å±Œä¸å‘¢ã€‚</p>
<p>é¦–å…ˆè¿›å…¥ç›®å½• <code>~/.vim/bundle</code>ï¼Œç„¶åæŠŠ YCM çš„ repo æ‹‰ä¸‹æ¥ï¼Œè®°å¾—è¦ç”¨ <code>--recursive</code>ï¼Œå› ä¸ºç°åœ¨çš„ ycm ä¾èµ–çš„ç¬¬ä¸‰æ–¹æ¨¡å—å¤ªå¤šäº†â€¦</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone --recursive https://github.com/Valloric/YouCompleteMe.git</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ“ä½œå¯¹ä½ çš„æ¢¯å­æ˜¯ä¸€ä¸ªæå¤§çš„è€ƒéªŒï¼Œå¦‚æœä¸­é€” clone æŒ‚äº†ï¼Œå°±è¿›å…¥ ycm çš„ç›®å½•ï¼Œæ¥ç€ç”¨ submodule update å»ç»§ç»­æ‹–ä»£ç å³å¯ã€‚</p>
<p>æƒ³å½“åˆæˆ‘çš„ SS åœ¨è¿™é‡Œæ–­äº† 5-6 æ¬¡ï¼Œæ¯ä¸€æ¬¡ connection lost éƒ½è®©æˆ‘é—®å€™äº†ä¸€éå…šå’Œå›½å®¶â€¦</p>
<p>ä»£ç æ‹‰å®Œä¹‹åè¿˜æ²¡ç»“æŸï¼Œè¿™ä¸ªæ—¶å€™æ‰“å¼€ <code>.vimrc</code>ï¼ŒæŠŠ ycm åŠ åˆ° vundle çš„è®¾ç½®åˆ—è¡¨é‡Œï¼Œç„¶åæ‰“å¼€ vim èµ°ä¸€é <code>PluginInstall</code>ã€‚ä½ åº”è¯¥ä¼šçœ‹åˆ° ycm è¢«é£å¿«çš„å®‰è£…å®Œäº†ï¼ˆå…¶å®ä¹Ÿå°±æ ¡éªŒäº†ä¸€ä¸‹ğŸ˜ï¼‰</p>
<h3 id="ç¼–è¯‘-ycm"><a href="#ç¼–è¯‘-ycm" class="headerlink" title="ç¼–è¯‘ ycm"></a>ç¼–è¯‘ ycm</h3><p>æºä»£ç æ‹–å®Œäº†å°±è¯¥è½®åˆ°ç¼–è¯‘äº†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/.vim/bundle/YouCompleteMe</span><br><span class="line">./install.py --clang-completer</span><br></pre></td></tr></table></figure>
<p>è„šæœ¬é¦–å…ˆä¼šå»ä¸‹è½½ clang-3.9ï¼Œç„¶åèµ°ä¸€é cmake çš„ç¼–è¯‘ï¼Œç­‰ä¸€ä¼šå„¿å°±å¥½ã€‚</p>
<h3 id="Debut"><a href="#Debut" class="headerlink" title="Debut"></a>Debut</h3><p>æ¥ä¸€å¼ æœ€ç»ˆæ•ˆæœå›¾</p>
<p><img src="img/wsl_vim_ycm.jpg" alt></p>

        
      
    </div>

    

    

  </article>

    
  </section>

  
  <nav class="pagination">
    
      <a class="prev" href="/page/17/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text">ä¸Šä¸€é¡µ</span>
      </a>
    
    
      <a class="next" href="/page/19/">
        <span class="next-text">ä¸‹ä¸€é¡µ</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>


          </div>
          

        </div>
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:your@email.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    
    
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>


<div class="copyright">
  <span class="power-by">
    ç”± <a class="hexo-link" href="https://hexo.io/">Hexo</a> å¼ºåŠ›é©±åŠ¨
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    ä¸»é¢˜ - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2015 - 
    
    2020

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Kingsley Chen</span>
  </span>
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    


    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  


    <script type="text/javascript" src="/js/src/even.js?v=2.6.0"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.6.0"></script>

  </body>
</html>
